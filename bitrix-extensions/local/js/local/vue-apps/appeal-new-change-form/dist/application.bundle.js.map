{"version":3,"file":"application.bundle.js","sources":["../src/stores/form.js","../src/components/hidden-fields.js","../src/components/docs-block.js","../src/components/fieldset-multi.js","../src/components/controls-block.js","../src/components/formControlRadioWithControls.js","../src/components/confirm-docs-block.js","../src/components/submit-button.js","../src/components/application.js","../src/stores/data.js","../src/loader.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const formStore = defineStore('form', {\r\n  state: () => ({\r\n    hidden: [],\r\n    docsBlock: {},\r\n    controlsBlock: {},\r\n    confirmDocsBlock: {},\r\n    autosaveTimeoutId: 0,\r\n    autosave: 5000,\r\n    agreement: {},\r\n    url: {},\r\n  }),\r\n  actions: {\r\n    bitrixLogs({ id, message }) {\r\n      if (window.BX) {\r\n        BX.ajax.post(\r\n          '/local/ajax/logs.php',\r\n          {\r\n            id,\r\n            el: document.querySelector('input[name = \"APPEAL_ID\"]').value,\r\n            message,\r\n            level: 1,\r\n          },\r\n          function (result) {}\r\n        );\r\n      }\r\n    },\r\n    createMulti({ parent }) {\r\n      console.log(parent.id)\r\n      parent.property = 'multi';\r\n      parent.multi = [];\r\n    },\r\n    addMulti({ parent, add }) {\r\n      const randomId = Math.round(Math.random() * 1000);\r\n      const sub = [];\r\n\r\n      if (add.sub && add.sub.forEach) {\r\n        add.sub.forEach((s) => {\r\n          s.id = `${s.id}${randomId}`;\r\n          sub.push({ ...s });\r\n        });\r\n        add.sub = sub;\r\n      }\r\n\r\n      add.id = `${add.id}${randomId}`;\r\n      parent.multi.push(add);\r\n    },\r\n    removeMulti({ parent, index }) {\r\n      parent.multi.splice(index, 1);\r\n    },\r\n\r\n    changeControlValue({ control, value, checked }) {\r\n      switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n        case 'tel':\r\n        case 'email':\r\n          this.changeTextControlValue({ control, value });\r\n          break;\r\n        case 'hint':\r\n          this.changeHintControlValue({ control, value });\r\n          break;\r\n        // case 'multiselect':\r\n        //   commit('changeMultiselectValue', { control, value, checked });\r\n        //   break;\r\n        // case 'checkbox':\r\n        //   commit('changeCheckboxValue', { control, checked });\r\n        //   break;\r\n        case 'select':\r\n          this[\r\n            `changeSelect${control.type\r\n              .substring(0, 1)\r\n              .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n          ]({ control, value });\r\n          break;\r\n        case 'file':\r\n          this.changeFileValue({ control, value });\r\n          break;\r\n        case 'date':\r\n          this.changeDateValue({ control, value });\r\n          break;\r\n        // case 'color':\r\n        //   commit('changeColorValue', { control, value });\r\n        //   break;\r\n      }\r\n    },\r\n    changeTextControlValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeHintControlValue({ control, value }) {\r\n      control.value = value;\r\n\r\n      if (value.autocomplete && value.autocomplete.forEach) {\r\n        value.autocomplete.forEach((o) => {\r\n          const control = this.controlsBlock.controls.find(\r\n            (c) => c.id === o.id\r\n          );\r\n          if (control) {\r\n            control.value = o.value;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeSelectDropdownValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeDateValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeFileValue({ control, value }) {\r\n      control.value = value;\r\n      if (control.type === 'upload') {\r\n        this.uploadFile(control, value);\r\n      }\r\n    },\r\n\r\n    checkDoc({doc}) {\r\n      this.confirmDocsBlock.items.forEach((item) => {\r\n        item.checked = false;\r\n      });\r\n      doc.checked = true;\r\n    },\r\n\r\n    //hint\r\n    // async runHintsAction({ control, action }) {\r\n    //   if (control.value && typeof control.value === 'string') {\r\n    //     const sign = action.indexOf('?') < 0 ? '?' : '&';\r\n    //     action = `${action}${sign}s=${control.value}`;\r\n    //   }\r\n    //   const response = await fetch(action);\r\n    //   const result = await response.json();\r\n    //   this.setHints({ control, value: result });\r\n    // },\r\n\r\n    async runHintsAction({ control, action }) {\r\n      if (control.value && typeof control.value === 'string') {\r\n        const sign = action.indexOf('?') < 0 ? '?' : '&';\r\n        action = `${action}${sign}s=${control.value}`;\r\n      }\r\n      try {\r\n        // Создаем AbortController для возможности отмены запроса\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 20000); // 20 секунд таймаут\r\n\r\n        const response = await fetch(action, {\r\n          signal: controller.signal,\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        clearTimeout(timeoutId);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const result = await response.json();\r\n\r\n        if (result.status === 'success' && result.data) {\r\n          this.setHints({ control, value: result.data });\r\n        } else if (result.errors) {\r\n          console.error('Server returned errors:', result.errors);\r\n        } else {\r\n          throw new Error('Invalid response format');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching hints:', error);\r\n      }\r\n    },\r\n    setHints({ control, value }) {\r\n      control.hints = value;\r\n    },\r\n\r\n    //file\r\n    async uploadFile(control, file) {\r\n      control.upload = {};\r\n      let formData = new FormData();\r\n\r\n      if (file === null) {\r\n        //delete\r\n        formData.append('DELETE', 'Y');\r\n        if (control.upload.response) {\r\n          formData.append('FILE', control.upload.response.FILE);\r\n        }\r\n      } else {\r\n        //first\r\n        formData.append('FILES', file);\r\n        if (control.upload.response) {\r\n          //update\r\n          formData.append('FILE', control.upload.response.FILE);\r\n        }\r\n      }\r\n\r\n      const xhr = new XMLHttpRequest();\r\n      const url = control.action;\r\n      xhr.open('POST', url /*'/markup/upload.php'*/);\r\n      //xhr.setRequestHeader('Content-Type', 'multipart/form-data');\r\n      xhr.setRequestHeader('Authentication', BX.bitrix_sessid());\r\n\r\n      //progress\r\n      let first = true;\r\n      xhr.upload.addEventListener('progress', ({ loaded, total }) => {\r\n        control.upload.progress = { first, loaded, total };\r\n        first = false;\r\n      });\r\n      xhr.upload.addEventListener('loadstart', () => {\r\n        // console.log('loadstart');\r\n      });\r\n      xhr.upload.addEventListener('abort', () => {\r\n        // console.log('abort');\r\n      });\r\n      xhr.upload.addEventListener('error', (err) => {\r\n        console.log('error', err);\r\n\r\n        control.upload.response = {\r\n          STATUS: 'error',\r\n          errors: [\r\n            {\r\n              message: err,\r\n            },\r\n          ],\r\n        };\r\n      });\r\n      xhr.upload.addEventListener('load', () => {\r\n        // console.log('load');\r\n      });\r\n      xhr.upload.addEventListener('timeout', () => {\r\n        // console.log('timeout');\r\n      });\r\n      xhr.upload.addEventListener('loadend', () => {\r\n        // console.log('loadend');\r\n      });\r\n\r\n      xhr.onreadystatechange = () => {\r\n        control.upload.readyState = xhr.readyState;\r\n\r\n        if (xhr.readyState === 4) {\r\n          try {\r\n            control.upload.response = JSON.parse(xhr.response);\r\n          } catch (err) {\r\n            control.upload.response = {\r\n              STATUS: 'error',\r\n              errors: [\r\n                {\r\n                  message: err,\r\n                },\r\n              ],\r\n            };\r\n            console.log(err);\r\n          }\r\n        }\r\n      };\r\n\r\n      xhr.send(formData);\r\n    },\r\n  },\r\n});\r\n","export const HiddenFields = {\r\n  data() {\r\n    return {};\r\n  },\r\n  props: ['hidden'],\r\n  template: `\r\n    <div>\r\n      <input v-for=\"field in hidden\" :key=\"generateKey()\" type=\"hidden\" :name=\"field.name\" :value=\"field.value\">\r\n    </div>\r\n  `,\r\n  methods: {\r\n    generateKey() {\r\n      return Date.now() * Math.random();\r\n    },\r\n  },\r\n};\r\n","export const DocsBlock = {\r\n  data() {\r\n    return {};\r\n  },\r\n  props: ['docsBlock'],\r\n  template: `\r\n    <div>\r\n      <h2 v-if=\"docsBlock.title\">{{docsBlock.title}}</h2>\r\n      <p v-if=\"docsBlock.text\" v-html=\"docsBlock.text\"></p>\r\n      <div class=\"b-docs-block\" v-if=\"docsBlock && docsBlock.items.length\">\r\n        <div class=\"b-docs-block__item\" href=\"/pages/news/\" v-for=\"(item, index) in docsBlock.items\" :key=\"item.id\">\r\n          <hr v-if=\"index !== 0\">\r\n          <div class=\"b-docs-block__body\">\r\n            <a class=\"b-docs-block__icon\" :href=\"item.url\" :style=\"'background-image: url( ' + item.icon + ' );'\"></a>\r\n            <span class=\"b-docs-block__text\">\r\n              <a :href=\"item.url\">{{item.title}}</a>\r\n              <span class=\"b-docs-block__data\" v-if=\"item.data.length\">\r\n                <span class=\"text-muted\" v-for=\"data in item.data\" :key=\"data\">{{data}}</span>\r\n              </span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `,\r\n};\r\n","import '../css/fieldset-multi.css'\r\n\r\nimport { ControlChoice } from 'local.vue-components.control-choice';\r\n\r\nexport const FieldsetMulti = {\r\n  data() {\r\n    return {\r\n      emptyFieldset: {},\r\n      multi: null,\r\n      fieldset: {\r\n        id: '123f',\r\n        title: 'Место работы',\r\n        type: 'fieldset',\r\n        multi: 3,\r\n        controls: [\r\n          {\r\n\t\t\t\t\t\t\"property\": 'text',\r\n\t\t\t\t\t\tid: 'PROPERTY_355_0',\r\n\t\t\t\t\t\tname: 'PROPERTY[355][0]',\r\n\t\t\t\t\t\t\"label\": \"ФИО кандидата *\",\r\n\t\t\t\t\t\t\"required\": true,\r\n\t\t\t\t\t\t\"value\": \"\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"property\": 'hint',\r\n\t\t\t\t\t\tid: 'PROPERTY_358_0',\r\n\t\t\t\t\t\tname: 'PROPERTY[358][0]',\r\n\t\t\t\t\t\t\"label\": \"ОРНЗ кандидата\",\r\n\t\t\t\t\t\t\"value\": \"\",\r\n\t\t\t\t\t\t\"count\": 3,\r\n\t\t\t\t\t\t\"action\": \"/markup/pages/appeal-new-change-form/hints.json\",\r\n\t\t\t\t\t\t\"required\": false,\r\n\t\t\t\t\t\t\"disabled\": false,\r\n\t\t\t\t\t\t\"multi\": 3,\r\n            \"hint_external\": \"ОРНЗ кандидата, если он является членом СРО ААС\"\r\n\t\t\t\t\t},\r\n          {\r\n\t\t\t\t\t\t\"property\": 'tel',\r\n\t\t\t\t\t\tid: 'PROPERTY_360_0',\r\n\t\t\t\t\t\tname: 'PROPERTY[360][0]',\r\n\t\t\t\t\t\t\"label\": \"Телефон кандидата *\",\r\n\t\t\t\t\t\t\"required\": true,\r\n\t\t\t\t\t\t\"value\": \"\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"property\": 'email',\r\n\t\t\t\t\t\tid: 'PROPERTY_361_0',\r\n\t\t\t\t\t\tname: 'PROPERTY[361][0]',\r\n\t\t\t\t\t\t\"label\": \"Адрес электронной почты кандидата *\",\r\n\t\t\t\t\t\t\"required\": true,\r\n\t\t\t\t\t\t\"value\": \"\",\r\n\t\t\t\t\t},\r\n          {\r\n            \"property\": \"date\",\r\n            \"type\": \"range\",\r\n            \"id\": \"id7\",\r\n            \"label\": \"Calendar\",\r\n            \"name\": \"DATE_FROM_TO\",\r\n            \"required\": true,\r\n            \"value\": [\r\n              \"20.02.2024\",\r\n              \"28.02.2024\"\r\n            ],\r\n            \"hint_external\": \"Обсуждаем проекты международных стандартов и документов\"\r\n          },\r\n          {\r\n            \"property\": \"select\",\r\n            \"type\": \"dropdown\",\r\n            \"id\": \"id13\",\r\n            \"name\": \"STATUS\",\r\n            \"label\": \"Status\",\r\n            \"options\": [\r\n              {\r\n                \"label\": \"molestias\",\r\n                \"code\": \"23423423423\"\r\n              },\r\n              {\r\n                \"label\": \"Farming\",\r\n                \"code\": \"324234324\"\r\n              },\r\n              {\r\n                \"label\": \"Very\",\r\n                \"code\": \"324234325\"\r\n              }\r\n            ],\r\n            \"value\": \"\",\r\n            \"disabled\": false,\r\n            \"hint_external\": \"Обсуждаем проекты международных стандартов и документов\"\r\n          }\r\n        ]\r\n      },\r\n    };\r\n  },\r\n  props: ['fieldset1'],\r\n  components: { ControlChoice },\r\n  template: `\r\n    <div class=\"twpx-fieldset-multi\">\r\n      <div class=\"twpx-fieldset-multi__item\" v-for=\"(fieldsetItem, fieldsetIndex) in fieldset.multi\" :key=\"fieldsetItem.id\">\r\n        <div v-if=\"fieldset.multi.length > 1\" @click=\"remove(fieldsetIndex)\" class=\"btn-delete\"></div>\r\n        <h4 class=\"twpx-fieldset-multi__title\">{{ fieldset.title }} {{ fieldsetIndex + 1 }}</h4>\r\n\r\n        <div class=\"twpx-fieldset-multi__controls\">\r\n\r\n          <ControlChoice\r\n            v-for=\"(formControl, controlIndex) in fieldsetItem.controls\"\r\n            :key=\"formControl.id\"\r\n            :control=\"formControl\"\r\n            @create=\"$emit('create', $event)\"\r\n            @add=\"$emit('add', $event)\"\r\n            @remove=\"$emit('remove', $event)\"\r\n            @input=\"$emit('input', $event)\"\r\n            @focus=\"$emit('focus', $event)\"\r\n            @blur=\"$emit('blur', $event)\"\r\n            @enter=\"$emit('enter', $event)\"\r\n            @hints=\"$emit('hints', $event)\"\r\n          />\r\n\r\n        </div>\r\n      </div>\r\n      <hr class=\"hr--line\" style=\"margin-bottom: 2.5rem;\">\r\n      <button class=\"btn btn-success btn-md\" :disabled=\"isBtnDisabled\" @click.prevent=\"add\">Добавить еще</button>\r\n      <hr class=\"hr--lg\">\r\n      <hr class=\"hr--lg\">\r\n    </div>\r\n  `,\r\n  emits: [\r\n    'autosave',\r\n    'timeoutAutosave',\r\n    'create',\r\n    'add',\r\n    'remove',\r\n    'input',\r\n    'focus',\r\n    'blur',\r\n    'enter',\r\n  ],\r\n  computed: {\r\n    isBtnDisabled() {\r\n      return this.fieldset.multi.length === this.multi;\r\n    }\r\n  },\r\n  methods: {\r\n    //transition\r\n    enter: function (el, done) {\r\n      Velocity(el, 'slideDown', {\r\n        easing: 'ease',\r\n        duration: 500,\r\n      });\r\n    },\r\n    leave: function (el, done) {\r\n      Velocity(el, 'slideUp', {\r\n        easing: 'ease',\r\n        duration: 500,\r\n      });\r\n    },\r\n    add() {\r\n      const a = JSON.parse(JSON.stringify(this.emptyFieldset));\r\n      a.id = Math.floor(Math.random * 1000);\r\n\r\n      this.$emit('add', {\r\n        parent: this.fieldset,\r\n        add: a\r\n      });\r\n\r\n      this.autosave();\r\n    },\r\n    remove(index) {\r\n      this.$emit('remove', {\r\n        parent: this.fieldset,\r\n        index\r\n      });\r\n      this.autosave();\r\n    },\r\n    autosave() {\r\n      this.$emit('autosave');\r\n    },\r\n    timeoutAutosave() {\r\n      this.$emit('timeoutAutosave');\r\n    },\r\n    clearEmptyFieldset() {\r\n      this.emptyFieldset?.controls.forEach(c => {\r\n        switch (c.property) {\r\n          case 'checkbox':\r\n            c.checked = false;\r\n            break;\r\n          default:\r\n            c.value = '';\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  },\r\n  beforeMount() {\r\n    this.emptyFieldset = JSON.parse(JSON.stringify(this.fieldset));\r\n    this.clearEmptyFieldset();\r\n    this.multi = this.fieldset.multi;\r\n    this.$emit('create', {parent: this.fieldset});\r\n    this.add();\r\n    console.log(this.emptyFieldset.controls[1].multi)\r\n  }\r\n};","import { ControlChoice } from 'local.vue-components.control-choice';\r\nimport { FieldsetMulti } from './fieldset-multi';\r\n\r\n\r\nexport const ControlsBlock = {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: {\r\n    ControlChoice,\r\n    FieldsetMulti\r\n  },\r\n  props: ['controlsBlock'],\r\n  template: `\r\n  <div>\r\n    <h2>{{ controlsBlock.title }}</h2>\r\n    <p v-html=\"controlsBlock.text\"></p>\r\n    <hr class=\"hr--sl\">\r\n\r\n    <FieldsetMulti v-if=\"true || formControl.type==='fieldset'\"\r\n      :fieldset=\"formControl\"\r\n      @create=\"$emit('create', $event)\"\r\n      @add=\"$emit('add', $event)\"\r\n      @remove=\"$emit('remove', $event)\"\r\n      @input=\"$emit('input', $event)\"\r\n      @focus=\"$emit('focus', $event)\"\r\n      @blur=\"$emit('blur', $event)\"\r\n      @enter=\"$emit('enter', $event)\"\r\n      @hints=\"$emit('hints', $event)\"\r\n    />\r\n\r\n    <div v-for=\"(formControl, controlIndex) in controlsBlock.controls\" :key=\"formControl.id\">\r\n\r\n      <div class=\"row align-items-center\">\r\n        <div class=\"col-lg-6 col-12\">\r\n\r\n          <ControlChoice\r\n            :control=\"formControl\"\r\n            @create=\"$emit('create', $event)\"\r\n            @add=\"$emit('add', $event)\"\r\n            @remove=\"$emit('remove', $event)\"\r\n            @input=\"$emit('input', $event)\"\r\n            @focus=\"$emit('focus', $event)\"\r\n            @blur=\"$emit('blur', $event)\"\r\n            @enter=\"$emit('enter', $event)\"\r\n            @hints=\"$emit('hints', $event)\"\r\n          />\r\n        \r\n        </div>\r\n        <hr class=\"hr--xs d-block d-lg-none w-100\">\r\n        <div class=\"col-lg-6 col-12 small\">\r\n          <div v-if=\"formControl.completeBlock && formControl.completeBlock.comment\" class=\"text-muted b-complete-comment\">{{formControl.completeBlock.comment}}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <hr class=\"hr--sl\">\r\n\r\n    </div>\r\n  </div>\r\n  `,\r\n  emits: [\r\n    'autosave',\r\n    'timeoutAutosave',\r\n    'create',\r\n    'add',\r\n    'remove',\r\n    'input',\r\n    'focus',\r\n    'blur',\r\n    'enter',\r\n  ],\r\n  methods: {\r\n    autosave() {\r\n      this.$emit('autosave');\r\n    },\r\n    timeoutAutosave() {\r\n      this.$emit('timeoutAutosave');\r\n    },\r\n  },\r\n};\r\n","import { ControlChoice } from 'local.vue-components.control-choice';\r\n\r\nexport const FormControlRadioWithControls = {\r\n    data() {\r\n      return {\r\n        checked: this.doc.checked,\r\n      };\r\n    },\r\n    components: {\r\n      ControlChoice\r\n    },\r\n    props: ['index', 'doc', 'blockFlag'],\r\n    emits: [\r\n        'checkDoc',\r\n\r\n        'autosave',\r\n        'timeoutAutosave',\r\n        'create',\r\n        'add',\r\n        'remove',\r\n        'input',\r\n        'focus',\r\n        'blur',\r\n        'enter',\r\n    ],\r\n    template: `\r\n        <div class=\"b-form-control-vc\" :class=\"{'i-active': doc.checked, 'i-block': blockFlag}\">\r\n\r\n            <label :class=\"{'i-active': checked}\" class=\"b-form-control-vc__top\">\r\n                <div class=\"b-form-control-vc__content\">\r\n                    <div class=\"b-form-control-vc__text\">\r\n                        <b v-if=\"!blockFlag\" v-html=\"doc.title\"></b>\r\n                        <span v-html=\"doc.text\"></span>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class=\"b-radio-vc\">\r\n                    <input type=\"radio\"\r\n                        :name=\"doc.name\"\r\n                        :checked=\"ckecked\"\r\n                        :value=\"doc.value\"\r\n                        class=\"with-gap\"\r\n                        @change=\"change\"\r\n                    >\r\n                    <span></span>\r\n                </div>\r\n            </label>\r\n\r\n            <div class=\"b-form-control-vc__fields\" v-show=\"blockFlag || doc.checked\">\r\n\r\n                <hr class=\"hr--line\" style=\"margin-bottom: 2.5rem;\">\r\n\r\n                <div v-for=\"(control, index) in doc.controls\" :key=\"control.id\">\r\n                    <ControlChoice\r\n                        :control=\"control\"\r\n                        @create=\"create\"\r\n                        @add=\"add\"\r\n                        @remove=\"remove\"\r\n                        @input=\"input\"\r\n                        @focus=\"focus\"\r\n                        @blur=\"blur\"\r\n                        @enter=\"enter\"\r\n                    />\r\n                    <hr>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    `,\r\n    methods: {\r\n        change(e) {\r\n            //highlight\r\n            /*if (e.target.checked) {\r\n              e.target\r\n                .closest('.row')\r\n                .querySelectorAll('label')\r\n                .forEach(function (label) {\r\n                  //set inactive\r\n                  label.classList.remove('i-active');\r\n                });\r\n              e.target.closest('label').classList.add('i-active');\r\n            }*/\r\n    \r\n            //set checked\r\n            this.checked = true;\r\n    \r\n            //set question as active\r\n            this.$emit('checkDoc', { doc: this.doc});\r\n    \r\n            //show the form if it is the first radio\r\n            // this.$emit('set-form-active', this.index);\r\n    \r\n            //autosave\r\n            // (async () => {\r\n            //   try {\r\n            //     let response = await fetch(\r\n            //       `${this.$store.state.url.autosave}?name=${this.control.name}&value=${this.control.value}&element_id=${store.state.reportId}`\r\n            //     );\r\n            //     let result = await response.json();\r\n            //     if (result.STATUS !== 'Y') {\r\n            //       throw new Error('Ошибка автосохранения');\r\n            //     }\r\n            //   } catch (err) {\r\n            //     throw err;\r\n            //   }\r\n            // })();\r\n            // //autosave whole form\r\n            // this.$emit('autosave');\r\n        },\r\n        autosave() {\r\n          this.$emit('autosave');\r\n        },\r\n        timeoutAutosave() {\r\n          this.$emit('timeoutAutosave');\r\n        },\r\n        create(args) {\r\n          this.$emit('create', args);\r\n        },\r\n        add(args) {\r\n          this.$emit('add', args);\r\n        },\r\n        remove(args) {\r\n          this.$emit('remove', args);\r\n        },\r\n        input(args) {\r\n          this.$emit('input', args);\r\n        },\r\n        focus() {\r\n          this.$emit('focus', args);\r\n        },\r\n        blur() {\r\n          this.$emit('blur', args);\r\n        },\r\n        enter() {\r\n          this.$emit('enter', args);\r\n        },\r\n    },\r\n  };\r\n  ","import { FormControlRadioWithControls } from './formControlRadioWithControls.js';\r\n\r\nexport const ConfirmDocsBlock = {\r\n  components: {\r\n    FormControlRadioWithControls\r\n  },\r\n  props: ['confirmDocsBlock'],\r\n  template: `\r\n    <div>\r\n\r\n      <h2 v-if=\"confirmDocsBlock.title\">{{ confirmDocsBlock.title }}</h2>\r\n\r\n      <p v-if=\"confirmDocsBlock.items.length !== 1 && confirmDocsBlock.text\" v-html=\"confirmDocsBlock.text\"></p>\r\n\r\n      <div v-for=\"(doc, index) in confirmDocsBlock.items\">\r\n\r\n        <FormControlRadioWithControls\r\n          :index=\"index\"\r\n          :doc=\"doc\"\r\n          :blockFlag=\"confirmDocsBlock.items.length === 1\"\r\n          \r\n          @checkDoc=\"checkDoc\"\r\n          @create=\"create\"\r\n          @add=\"add\"\r\n          @remove=\"remove\"\r\n          @input=\"input\"\r\n          @focus=\"focus\"\r\n          @blur=\"blur\"\r\n          @enter=\"enter\"\r\n        />\r\n\r\n        <hr>\r\n      </div>\r\n\r\n    </div>`,\r\n  emits: [\r\n    'autosave',\r\n    'timeoutAutosave',\r\n    'create',\r\n    'add',\r\n    'remove',\r\n    'input',\r\n    'focus',\r\n    'blur',\r\n    'enter',\r\n  ],\r\n  methods: {\r\n    checkDoc(args) {\r\n      this.$emit('checkDoc', args);\r\n    },\r\n    autosave() {\r\n      this.$emit('autosave');\r\n    },\r\n    timeoutAutosave() {\r\n      this.$emit('timeoutAutosave');\r\n    },\r\n    create(args) {\r\n      this.$emit('create', args);\r\n    },\r\n    add(args) {\r\n      this.$emit('add', args);\r\n    },\r\n    remove(args) {\r\n      this.$emit('remove', args);\r\n    },\r\n    input(args) {\r\n      this.$emit('input', args);\r\n    },\r\n    focus() {\r\n      this.$emit('focus', args);\r\n    },\r\n    blur() {\r\n      this.$emit('blur', args);\r\n    },\r\n    enter() {\r\n      this.$emit('enter', args);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.confirmDocsBlock.items.forEach((item) => {\r\n      if (item.controls) {\r\n        item.controls.forEach((control) => {\r\n          if (!control.value && control.sub) {\r\n            control.sub.forEach((s) => {\r\n              s.disabled = true;\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  },\r\n};\r\n","export const SubmitButton = {\r\n  data() {\r\n    return {};\r\n  },\r\n  props: ['agreement', 'controlsBlock', 'confirmDocsFlag'],\r\n  emits: ['bitrixLogs'],\r\n  template: `\r\n    <div v-if=\"agreement\">\r\n      <div class=\"b-checkbox\" id=\"agreement\" :class=\"{invalid: agreement.invalid}\">\r\n        <label>\r\n          <input class=\"filled-in\" type=\"checkbox\" required=\"\" :name=\"agreement.name\" :value=\"agreement.value\" :checked=\"checked\" v-model=\"checked\"><span v-html=\"agreement.text\"></span>\r\n        </label>\r\n      </div>\r\n      <hr class=\"hr--lg\">\r\n      <div class=\"b-appeal-new-change-form__submit\">\r\n        <a href=\"#\" class=\"btn btn-secondary btn-lg\" data-toggle=\"modal\" data-target=\"#submitConfirmModal\" :disabled=\"isDisabled\" @click=\"clickSubmit($event)\">Отправить</a>\r\n        <small class=\"text-muted\" v-if=\"isDisabled\">Вы не закончили заполнение обязательных полей. <a href=\"#\" @click.prevent=\"clickContinue\">Продолжить</a></small>\r\n      </div>\r\n    </div>\r\n  `,\r\n  watch: {\r\n    checked(val) {\r\n      this.$emit('bitrixLogs', {\r\n        id: 12,\r\n        message: `${this.agreement.text}: ${val}`,\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    checked() {\r\n      return this.agreement ? this.agreement.checked : false;\r\n    },\r\n    isDisabled() {\r\n      //controls\r\n      let controlsFlag = true;\r\n      let controlsPatternFlag = true;\r\n      if (this.controlsBlock && this.controlsBlock.controls) {\r\n        //required\r\n        const requiredControls = this.controlsBlock.controls.filter(\r\n          (control) => control.required\r\n        );\r\n        controlsFlag = requiredControls.every((control) => {\r\n          if (control.multy) {\r\n            return control.value.every((value) => value.val !== '');\r\n          } else {\r\n            return control.value !== '';\r\n          }\r\n        });\r\n        //width pattern\r\n        const patternControls = this.controlsBlock.controls.filter(\r\n          (control) => control.pattern\r\n        );\r\n        controlsPatternFlag = patternControls.every((control) => {\r\n          if (control.multy) {\r\n            return control.value.every(\r\n              (value) =>\r\n                value.val === '' ||\r\n                new RegExp(control.pattern, 'ig').test(value.val)\r\n            );\r\n          } else {\r\n            return (\r\n              control.value === '' ||\r\n              new RegExp(control.pattern, 'ig').test(control.value)\r\n            );\r\n          }\r\n        });\r\n      }\r\n\r\n      //confirm docs\r\n      let confirmDocsFlag = true;\r\n      if (this.confirmDocsBlock && this.confirmDocsBlock.items) {\r\n        const checked = this.confirmDocsBlock.items.find(\r\n          (item) => item.checked === true\r\n        );\r\n\r\n        const requiredConfirm = checked\r\n          ? checked.controls.filter((control) => control.required)\r\n          : undefined;\r\n\r\n        confirmDocsFlag = requiredConfirm\r\n          ? requiredConfirm.every((control) =>\r\n              control.value && typeof control.value === 'object'\r\n                ? control.value.every((value) => value.val !== '')\r\n                : control.value !== ''\r\n            )\r\n          : false;\r\n      }\r\n\r\n      //checkbox\r\n      const checkboxFlag = this.checked;\r\n\r\n      return !(\r\n        controlsFlag &&\r\n        controlsPatternFlag &&\r\n        confirmDocsFlag &&\r\n        checkboxFlag\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    clickSubmit(e) {\r\n      this.$emit('bitrixLogs', {\r\n        id: 13,\r\n        message: e.target.innerHTML,\r\n      });\r\n    },\r\n    clickContinue() {\r\n      const control = Array.from(\r\n        document.querySelector('.b-appeal-new-change-form form').elements\r\n      ).find((elem) => {\r\n        let isRequired = elem.classList.contains('mx-input')\r\n          ? elem.closest('.mx-datepicker').getAttribute('data-required')\r\n          : elem.getAttribute('data-required');\r\n\r\n        if (\r\n          elem.getAttribute('type') === 'file' &&\r\n          !elem.closest('.b-form-control-vc').querySelector('input[type=radio]')\r\n            .checked\r\n        ) {\r\n          isRequired = false;\r\n        }\r\n\r\n        const value =\r\n          elem.getAttribute('type') === 'file'\r\n            ? elem.getAttribute('data-value')\r\n            : elem.value;\r\n\r\n        const pattern = elem.getAttribute('data-pattern');\r\n\r\n        if (pattern && value !== '') {\r\n          return !new RegExp(pattern, 'ig').test(value);\r\n        } else {\r\n          return (\r\n            isRequired &&\r\n            elem.tagName.toLowerCase() !== 'button' &&\r\n            elem.getAttribute('type') !== 'hidden' &&\r\n            value === ''\r\n          );\r\n        }\r\n      });\r\n\r\n      if (!control) return;\r\n\r\n      if (control.closest('.b-float-label')) {\r\n        control.closest('.b-float-label').classList.add('invalid');\r\n      } else if (control.closest('.b-float-label--file')) {\r\n        control.closest('.b-float-label--file').classList.add('invalid');\r\n      }\r\n\r\n      window.scrollTo({\r\n        top: control.getBoundingClientRect().top + window.scrollY - 120,\r\n        behavior: 'smooth',\r\n      });\r\n\r\n      setTimeout(() => {\r\n        control.focus();\r\n      }, 1000);\r\n    },\r\n  },\r\n};\r\n","import '../css/application.css';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { formStore } from '../stores/form';\r\n\r\nimport { HiddenFields } from './hidden-fields';\r\nimport { DocsBlock } from './docs-block';\r\nimport { ControlsBlock } from './controls-block';\r\nimport { ConfirmDocsBlock } from './confirm-docs-block';\r\nimport { SubmitButton } from './submit-button';\r\n\r\nexport const Application = {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: {\r\n    HiddenFields,\r\n    DocsBlock,\r\n    ControlsBlock,\r\n    ConfirmDocsBlock,\r\n    SubmitButton,\r\n  },\r\n  // language=Vue\r\n\r\n  template: `\r\n    <div>\r\n      <HiddenFields v-if=\"hidden\" :hidden=\"hidden\" />\r\n\r\n      <div v-if=\"docsBlock && docsBlock.items && docsBlock.items.length\">\r\n        <DocsBlock :docsBlock=\"docsBlock\" @timeoutAutosave=\"timeoutAutosave\" @autosave=\"autosave\" />\r\n        <hr class=\"hr--lg\">\r\n      </div>\r\n\r\n      <div v-if=\"controlsBlock && controlsBlock.controls && controlsBlock.controls.length\">\r\n        <ControlsBlock :controlsBlock=\"controlsBlock\" @create=\"createMulti\" @add=\"addMulti\" @remove=\"removeMulti\" @input=\"input\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" @hints=\"hints\" @timeoutAutosave=\"timeoutAutosave\" @autosave=\"autosave\" />\r\n        <hr class=\"hr--lg\">\r\n      </div>\r\n\r\n      <div v-if=\"confirmDocsBlock && confirmDocsBlock.items && confirmDocsBlock.items.length\">\r\n        <ConfirmDocsBlock\r\n          :confirmDocsBlock=\"confirmDocsBlock\"\r\n          @checkDoc=\"checkDoc\"\r\n          @create=\"createMulti\"\r\n          @add=\"addMulti\"\r\n          @remove=\"removeMulti\"\r\n          @input=\"input\"\r\n          @focus=\"focus\"\r\n          @blur=\"blur\"\r\n          @enter=\"enter\"\r\n          @hints=\"hints\"\r\n          @timeoutAutosave=\"timeoutAutosave\"\r\n          @autosave=\"autosave\"\r\n        />\r\n        <hr class=\"hr--lg\">\r\n      </div>\r\n\r\n      <SubmitButton :agreement=\"agreement\" :controlsBlock=\"controlsBlock\" :confirmDocsBlock=\"confirmDocsBlock\" @bitrixLogs=\"bitrixLogs\" @timeoutAutosave=\"timeoutAutosave\" @autosave=\"autosave\" />\r\n\r\n    </div>\r\n\t`,\r\n  computed: {\r\n    ...mapState(formStore, [\r\n      'hidden',\r\n      'docsBlock',\r\n      'controlsBlock',\r\n      'confirmDocsBlock',\r\n      'autosaveTimeoutId',\r\n      'autosave',\r\n      'agreement',\r\n      'url',\r\n    ]),\r\n  },\r\n  methods: {\r\n    ...mapActions(formStore, [\r\n      'bitrixLogs',\r\n      'runHintsAction',\r\n      'setHints',\r\n      'changeControlValue',\r\n      'createMulti',\r\n      'addMulti',\r\n      'removeMulti',\r\n      'checkDoc'\r\n    ]),\r\n    hints({ type, control, action, value }) {\r\n      switch (type) {\r\n        case 'get':\r\n          this.runHintsAction({\r\n            control,\r\n            action,\r\n          });\r\n          break;\r\n        case 'set':\r\n          this.setHints({\r\n            control,\r\n            value,\r\n          });\r\n          break;\r\n      }\r\n    },\r\n    input({ control, value, checked }) {\r\n      this.changeControlValue({\r\n        control,\r\n        value,\r\n        checked,\r\n      });\r\n    },\r\n    focus() {\r\n      // console.log('focus');\r\n    },\r\n    blur() {\r\n      // console.log('blur');\r\n    },\r\n    enter() {\r\n      // console.log('enter');\r\n    },\r\n  },\r\n};\r\n","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    sessid: '',\r\n    signedParameters: '',\r\n  }),\r\n});\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { dataStore } from './stores/data';\r\nimport { formStore } from './stores/form';\r\n\r\nexport class AppealNewChangeForm {\r\n  #store;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options): void {\r\n    this.#store = createPinia();\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run(): void {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'Appeal new change form component',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application/>',\r\n      mounted() {\r\n        dataStore().sessid = self.options.sessid || '';\r\n        dataStore().signedParameters = self.options.signedParameters || '';\r\n\r\n        formStore().hidden = self.options.data.hidden;\r\n        formStore().docsBlock = self.options.data.docsBlock;\r\n        formStore().controlsBlock = self.options.data.controlsBlock;\r\n        formStore().confirmDocsBlock = self.options.data.confirmDocsBlock;\r\n        formStore().autosaveTimeoutId = self.options.data.autosaveTimeoutId;\r\n        formStore().autosave = self.options.data.autosave;\r\n        formStore().agreement = self.options.data.agreement;\r\n        formStore().url = self.options.data.url;\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication(): void {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getFormStore(): Object {\r\n    return formStore;\r\n  }\r\n}\r\n"],"names":["formStore","defineStore","state","hidden","docsBlock","controlsBlock","confirmDocsBlock","autosaveTimeoutId","autosave","agreement","url","actions","bitrixLogs","id","message","window","BX","ajax","post","el","document","querySelector","value","level","result","createMulti","parent","console","log","property","multi","addMulti","add","randomId","Math","round","random","sub","forEach","s","push","removeMulti","index","splice","changeControlValue","control","checked","changeTextControlValue","changeHintControlValue","type","substring","toUpperCase","toLowerCase","changeFileValue","changeDateValue","autocomplete","o","controls","find","c","changeSelectRadioValue","changeSelectDropdownValue","uploadFile","checkDoc","doc","items","item","runHintsAction","action","sign","indexOf","controller","AbortController","timeoutId","setTimeout","abort","fetch","signal","headers","response","clearTimeout","ok","Error","status","json","data","setHints","errors","error","hints","file","upload","formData","FormData","append","FILE","xhr","XMLHttpRequest","open","setRequestHeader","bitrix_sessid","first","addEventListener","loaded","total","progress","err","STATUS","onreadystatechange","readyState","JSON","parse","send","HiddenFields","props","template","methods","generateKey","Date","now","DocsBlock","FieldsetMulti","emptyFieldset","fieldset","title","name","components","ControlChoice","emits","computed","isBtnDisabled","length","enter","done","Velocity","easing","duration","leave","a","stringify","floor","$emit","remove","timeoutAutosave","clearEmptyFieldset","beforeMount","ControlsBlock","FormControlRadioWithControls","change","e","create","args","input","focus","blur","ConfirmDocsBlock","mounted","disabled","SubmitButton","watch","val","text","isDisabled","controlsFlag","controlsPatternFlag","requiredControls","filter","required","every","multy","patternControls","pattern","RegExp","test","confirmDocsFlag","requiredConfirm","undefined","checkboxFlag","clickSubmit","target","innerHTML","clickContinue","Array","from","elements","elem","isRequired","classList","contains","closest","getAttribute","tagName","scrollTo","top","getBoundingClientRect","scrollY","behavior","Application","mapState","mapActions","dataStore","sessid","signedParameters","AppealNewChangeForm","rootNode","options","createPinia","self","BitrixVue","createApp","use","mount","setActivePinia"],"mappings":"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"}