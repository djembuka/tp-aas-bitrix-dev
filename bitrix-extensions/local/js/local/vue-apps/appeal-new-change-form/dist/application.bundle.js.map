{"version":3,"file":"application.bundle.js","sources":["../src/stores/form.js","../src/components/hidden-fields.js","../src/components/docs-block.js","../src/components/data-to-change.js","../src/components/confirm-docs-block.js","../src/components/submit-button.js","../src/components/application.js","../src/stores/data.js","../src/loader.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const formStore = defineStore('form', {\r\n  state: () => ({\r\n    hidden: [],\r\n    docsBlock: {},\r\n    controlsBlock: {},\r\n    confirmDocsBlock: {},\r\n    autosaveTimeoutId: 0,\r\n    autosave: 5000,\r\n    agreement: {},\r\n    url: {},\r\n  }),\r\n  actions: {\r\n    bitrixLogs({ id, message }) {\r\n      if (window.BX) {\r\n        BX.ajax.post(\r\n          '/local/ajax/logs.php',\r\n          {\r\n            id,\r\n            el: document.querySelector('input[name = \"APPEAL_ID\"]').value,\r\n            message,\r\n            level: 1,\r\n          },\r\n          function (result) {}\r\n        );\r\n      }\r\n    },\r\n    createMulti({ parent }) {\r\n      parent.property = 'multi';\r\n      parent.multi = [];\r\n    },\r\n    addMulti({ parent, add }) {\r\n      const randomId = Math.round(Math.random() * 1000);\r\n      const sub = [];\r\n\r\n      if (add.sub && add.sub.forEach) {\r\n        add.sub.forEach((s) => {\r\n          s.id = `${s.id}${randomId}`;\r\n          sub.push({ ...s });\r\n        });\r\n        add.sub = sub;\r\n      }\r\n\r\n      add.id = `${add.id}${randomId}`;\r\n      parent.multi.push(add);\r\n    },\r\n    removeMulti({ parent, index }) {\r\n      parent.multi.splice(index, 1);\r\n    },\r\n    changeTextControlValue({ control, value }) {\r\n      console.log(control, value);\r\n      control.value = value;\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeSelectDropdownValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeDateValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeControlValue({ control, value, checked }) {\r\n      switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n        case 'hint':\r\n          this.changeTextControlValue({ control, value });\r\n          break;\r\n        // case 'multiselect':\r\n        //   commit('changeMultiselectValue', { control, value, checked });\r\n        //   break;\r\n        // case 'checkbox':\r\n        //   commit('changeCheckboxValue', { control, checked });\r\n        //   break;\r\n        case 'select':\r\n          this[\r\n            `changeSelect${control.type\r\n              .substring(0, 1)\r\n              .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n          ]({ control, value });\r\n          break;\r\n        // case 'file':\r\n        //   commit('changeFileValue', { control, value });\r\n        //   break;\r\n        case 'date':\r\n          this.changeDateValue({ control, value });\r\n          break;\r\n        // case 'color':\r\n        //   commit('changeColorValue', { control, value });\r\n        //   break;\r\n      }\r\n    },\r\n  },\r\n});\r\n","export const HiddenFields = {\r\n  data() {\r\n    return {};\r\n  },\r\n  props: ['hidden'],\r\n  template: `\r\n    <div>\r\n      <input v-for=\"field in hidden\" :key=\"generateKey()\" type=\"hidden\" :name=\"field.name\" :value=\"field.value\">\r\n    </div>\r\n  `,\r\n  methods: {\r\n    generateKey() {\r\n      return Date.now() * Math.random();\r\n    },\r\n  },\r\n};\r\n","export const DocsBlock = {\r\n  data() {\r\n    return {};\r\n  },\r\n  props: ['docsBlock'],\r\n  template: `\r\n    <div>\r\n      <h2 v-if=\"docsBlock.title\">{{docsBlock.title}}</h2>\r\n      <p v-if=\"docsBlock.text\" v-html=\"docsBlock.text\"></p>\r\n      <div class=\"b-docs-block\" v-if=\"docsBlock && docsBlock.items.length\">\r\n        <div class=\"b-docs-block__item\" href=\"/pages/news/\" v-for=\"(item, index) in docsBlock.items\" :key=\"item.id\">\r\n          <hr v-if=\"index !== 0\">\r\n          <div class=\"b-docs-block__body\">\r\n            <a class=\"b-docs-block__icon\" :href=\"item.url\" :style=\"'background-image: url( ' + item.icon + ' );'\"></a>\r\n            <span class=\"b-docs-block__text\">\r\n              <a :href=\"item.url\">{{item.title}}</a>\r\n              <span class=\"b-docs-block__data\" v-if=\"item.data.length\">\r\n                <span class=\"text-muted\" v-for=\"data in item.data\" :key=\"data\">{{data}}</span>\r\n              </span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `,\r\n};\r\n","import { ControlChoice } from 'local.vue-components.control-choice';\r\n\r\nexport const DataToChange = {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: { ControlChoice },\r\n  props: ['controlsBlock'],\r\n  template: `\r\n  <div>\r\n    <h2>{{ controlsBlock.title }}</h2>\r\n    <p v-html=\"controlsBlock.text\"></p>\r\n    <hr class=\"hr--sl\">\r\n    <div v-for=\"(formControl, controlIndex) in controlsBlock.controls\" :key=\"formControl.id\">\r\n\r\n      <div class=\"row align-items-center\">\r\n        <div class=\"col-lg-6 col-12\">\r\n          <ControlChoice :control=\"formControl\" @create=\"create\" @add=\"add\" @remove=\"remove\" @input=\"input\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" @hints=\"hints\" />\r\n        </div>\r\n        <hr class=\"hr--xs d-block d-lg-none w-100\">\r\n        <div class=\"col-lg-6 col-12 small\">\r\n          <div v-if=\"formControl.completeBlock && formControl.completeBlock.comment\" class=\"text-muted b-complete-comment\">{{formControl.completeBlock.comment}}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <hr class=\"hr--sl\">\r\n\r\n    </div>\r\n  </div>\r\n  `,\r\n  emits: ['autosave', 'timeoutAutosave'],\r\n  methods: {\r\n    autosave() {\r\n      this.$emit('autosave');\r\n    },\r\n    timeoutAutosave() {\r\n      this.$emit('timeoutAutosave');\r\n    },\r\n    create(args) {\r\n      this.$emit('create', args);\r\n    },\r\n    add(args) {\r\n      this.$emit('add', args);\r\n    },\r\n    remove(args) {\r\n      this.$emit('remove', args);\r\n    },\r\n    input(args) {\r\n      this.$emit('input', args);\r\n    },\r\n    focus() {\r\n      this.$emit('focus', args);\r\n    },\r\n    blur() {\r\n      this.$emit('blur', args);\r\n    },\r\n    enter() {\r\n      this.$emit('enter', args);\r\n    },\r\n  },\r\n};\r\n","export const ConfirmDocsBlock = {\r\n  props: ['confirmDocsBlock'],\r\n  template: `\r\n    <div>\r\n\r\n      <h2 v-if=\"confirmDocsBlock.title\">{{ confirmDocsBlock.title }}</h2>\r\n\r\n      <p v-if=\"confirmDocsBlock.items.length !== 1 && confirmDocsBlock.text\" v-html=\"confirmDocsBlock.text\"></p>\r\n\r\n      <div v-for=\"(doc, index) in confirmDocsBlock.items\">\r\n        File\r\n        <hr>\r\n      </div>\r\n\r\n    </div>`,\r\n};\r\n","export const SubmitButton = {\r\n  data() {\r\n    return {};\r\n  },\r\n  props: ['agreement', 'controlsBlock', 'confirmDocsFlag'],\r\n  emits: ['bitrixLogs'],\r\n  template: `\r\n    <div v-if=\"agreement\">\r\n      <div class=\"b-checkbox\" id=\"agreement\" :class=\"{invalid: agreement.invalid}\">\r\n        <label>\r\n          <input class=\"filled-in\" type=\"checkbox\" required=\"\" :name=\"agreement.name\" :value=\"agreement.value\" :checked=\"checked\" v-model=\"checked\"><span v-html=\"agreement.text\"></span>\r\n        </label>\r\n      </div>\r\n      <hr class=\"hr--lg\">\r\n      <div class=\"b-appeal-new-change-form__submit\">\r\n        <a href=\"#\" class=\"btn btn-secondary btn-lg\" data-toggle=\"modal\" data-target=\"#submitConfirmModal\" :disabled=\"isDisabled\" @click=\"clickSubmit($event)\">Отправить</a>\r\n        <small class=\"text-muted\" v-if=\"isDisabled\">Вы не закончили заполнение обязательных полей. <a href=\"#\" @click.prevent=\"clickContinue\">Продолжить</a></small>\r\n      </div>\r\n    </div>\r\n  `,\r\n  watch: {\r\n    checked(val) {\r\n      this.$emit('bitrixLogs', {\r\n        id: 12,\r\n        message: `${this.agreement.text}: ${val}`,\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    checked() {\r\n      return this.agreement ? this.agreement.checked : false;\r\n    },\r\n    isDisabled() {\r\n      //controls\r\n      let controlsFlag = true;\r\n      let controlsPatternFlag = true;\r\n      if (this.controlsBlock && this.controlsBlock.controls) {\r\n        //required\r\n        const requiredControls = this.controlsBlock.controls.filter(\r\n          (control) => control.required\r\n        );\r\n        controlsFlag = requiredControls.every((control) => {\r\n          if (control.multy) {\r\n            return control.value.every((value) => value.val !== '');\r\n          } else {\r\n            return control.value !== '';\r\n          }\r\n        });\r\n        //width pattern\r\n        const patternControls = this.controlsBlock.controls.filter(\r\n          (control) => control.pattern\r\n        );\r\n        controlsPatternFlag = patternControls.every((control) => {\r\n          if (control.multy) {\r\n            return control.value.every(\r\n              (value) =>\r\n                value.val === '' ||\r\n                new RegExp(control.pattern, 'ig').test(value.val)\r\n            );\r\n          } else {\r\n            return (\r\n              control.value === '' ||\r\n              new RegExp(control.pattern, 'ig').test(control.value)\r\n            );\r\n          }\r\n        });\r\n      }\r\n\r\n      //confirm docs\r\n      let confirmDocsFlag = true;\r\n      if (this.confirmDocsBlock && this.confirmDocsBlock.items) {\r\n        const checked = this.confirmDocsBlock.items.find(\r\n          (item) => item.checked === true\r\n        );\r\n\r\n        const requiredConfirm = checked\r\n          ? checked.controls.filter((control) => control.required)\r\n          : undefined;\r\n\r\n        confirmDocsFlag = requiredConfirm\r\n          ? requiredConfirm.every((control) =>\r\n              control.value && typeof control.value === 'object'\r\n                ? control.value.every((value) => value.val !== '')\r\n                : control.value !== ''\r\n            )\r\n          : false;\r\n      }\r\n\r\n      //checkbox\r\n      const checkboxFlag = this.checked;\r\n\r\n      return !(\r\n        controlsFlag &&\r\n        controlsPatternFlag &&\r\n        confirmDocsFlag &&\r\n        checkboxFlag\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    clickSubmit(e) {\r\n      this.$emit('bitrixLogs', {\r\n        id: 13,\r\n        message: e.target.innerHTML,\r\n      });\r\n    },\r\n    clickContinue() {\r\n      const control = Array.from(\r\n        document.querySelector('.b-appeal-new-change-form form').elements\r\n      ).find((elem) => {\r\n        let isRequired = elem.classList.contains('mx-input')\r\n          ? elem.closest('.mx-datepicker').getAttribute('data-required')\r\n          : elem.getAttribute('data-required');\r\n\r\n        if (\r\n          elem.getAttribute('type') === 'file' &&\r\n          !elem.closest('.b-form-control-vc').querySelector('input[type=radio]')\r\n            .checked\r\n        ) {\r\n          isRequired = false;\r\n        }\r\n\r\n        const value =\r\n          elem.getAttribute('type') === 'file'\r\n            ? elem.getAttribute('data-value')\r\n            : elem.value;\r\n\r\n        const pattern = elem.getAttribute('data-pattern');\r\n\r\n        if (pattern && value !== '') {\r\n          return !new RegExp(pattern, 'ig').test(value);\r\n        } else {\r\n          return (\r\n            isRequired &&\r\n            elem.tagName.toLowerCase() !== 'button' &&\r\n            elem.getAttribute('type') !== 'hidden' &&\r\n            value === ''\r\n          );\r\n        }\r\n      });\r\n\r\n      if (!control) return;\r\n\r\n      if (control.closest('.b-float-label')) {\r\n        control.closest('.b-float-label').classList.add('invalid');\r\n      } else if (control.closest('.b-float-label--file')) {\r\n        control.closest('.b-float-label--file').classList.add('invalid');\r\n      }\r\n\r\n      window.scrollTo({\r\n        top: control.getBoundingClientRect().top + window.scrollY - 120,\r\n        behavior: 'smooth',\r\n      });\r\n\r\n      setTimeout(() => {\r\n        control.focus();\r\n      }, 1000);\r\n    },\r\n  },\r\n};\r\n","import './application.css';\r\n\r\nimport { ControlChoice } from 'local.vue-components.control-choice';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { formStore } from '../stores/form';\r\n\r\nimport { HiddenFields } from './hidden-fields';\r\nimport { DocsBlock } from './docs-block';\r\nimport { DataToChange } from './data-to-change';\r\nimport { ConfirmDocsBlock } from './confirm-docs-block';\r\nimport { SubmitButton } from './submit-button';\r\n\r\nexport const Application = {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: {\r\n    ControlChoice,\r\n    HiddenFields,\r\n    DocsBlock,\r\n    DataToChange,\r\n    ConfirmDocsBlock,\r\n    SubmitButton,\r\n  },\r\n  // language=Vue\r\n\r\n  template: `\r\n    <div>\r\n      <HiddenFields v-if=\"hidden\" :hidden=\"hidden\" />\r\n\r\n      <div v-if=\"docsBlock && docsBlock.items && docsBlock.items.length\">\r\n        <DocsBlock :docsBlock=\"docsBlock\" @timeoutAutosave=\"timeoutAutosave\" @autosave=\"autosave\" />\r\n        <hr class=\"hr--lg\">\r\n      </div>\r\n\r\n      <div v-if=\"controlsBlock && controlsBlock.controls && controlsBlock.controls.length\">\r\n        <DataToChange :controlsBlock=\"controlsBlock\" @create=\"createMulti\" @add=\"addMulti\" @remove=\"removeMulti\" @input=\"input\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" @hints=\"hints\" @timeoutAutosave=\"timeoutAutosave\" @autosave=\"autosave\" />\r\n        <hr class=\"hr--lg\">\r\n      </div>\r\n\r\n      <div v-if=\"confirmDocsBlock && confirmDocsBlock.items && confirmDocsBlock.items.length\">\r\n        <ConfirmDocsBlock :confirmDocsBlock=\"confirmDocsBlock\" @timeoutAutosave=\"timeoutAutosave\" @autosave=\"autosave\" />\r\n        <hr class=\"hr--lg\">\r\n      </div>\r\n\r\n      <SubmitButton :agreement=\"agreement\" :controlsBlock=\"controlsBlock\" :confirmDocsBlock=\"confirmDocsBlock\" @bitrixLogs=\"bitrixLogs\" @timeoutAutosave=\"timeoutAutosave\" @autosave=\"autosave\" />\r\n\r\n    </div>\r\n\t`,\r\n  computed: {\r\n    ...mapState(formStore, [\r\n      'hidden',\r\n      'docsBlock',\r\n      'controlsBlock',\r\n      'confirmDocsBlock',\r\n      'autosaveTimeoutId',\r\n      'autosave',\r\n      'agreement',\r\n      'url',\r\n    ]),\r\n  },\r\n  methods: {\r\n    ...mapActions(formStore, [\r\n      'bitrixLogs',\r\n      'runHintsAction',\r\n      'setHints',\r\n      'changeControlValue',\r\n      'createMulti',\r\n      'addMulti',\r\n      'removeMulti',\r\n    ]),\r\n    hints({ type, control, action, value }) {\r\n      switch (type) {\r\n        case 'get':\r\n          this.runHintsAction({\r\n            control,\r\n            action,\r\n          });\r\n          break;\r\n        case 'set':\r\n          this.setHints({\r\n            control,\r\n            value,\r\n          });\r\n          break;\r\n      }\r\n    },\r\n    input({ control, value, checked }) {\r\n      this.changeControlValue({\r\n        control,\r\n        value,\r\n        checked,\r\n      });\r\n    },\r\n    focus() {\r\n      console.log('focus');\r\n    },\r\n    blur() {\r\n      console.log('blur');\r\n    },\r\n    enter() {\r\n      console.log('enter');\r\n    },\r\n  },\r\n};\r\n","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    sessionid: '',\r\n    signedParameters: '',\r\n  }),\r\n});\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { dataStore } from './stores/data';\r\nimport { formStore } from './stores/form';\r\n\r\nexport class AppealNewChangeForm {\r\n  #store;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options): void {\r\n    this.#store = createPinia();\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run(): void {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'Appeal new change form component',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application/>',\r\n      mounted() {\r\n        dataStore().sessionid = self.options.SESSION_ID || '';\r\n        dataStore().signedParameters = self.options.SIGNED_PARAMETERS || '';\r\n\r\n        formStore().hidden = self.options.data.hidden;\r\n        formStore().docsBlock = self.options.data.docsBlock;\r\n        formStore().controlsBlock = self.options.data.controlsBlock;\r\n        formStore().confirmDocsBlock = self.options.data.confirmDocsBlock;\r\n        formStore().autosaveTimeoutId = self.options.data.autosaveTimeoutId;\r\n        formStore().autosave = self.options.data.autosave;\r\n        formStore().agreement = self.options.data.agreement;\r\n        formStore().url = self.options.data.url;\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication(): void {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getFormStore(): Object {\r\n    return formStore;\r\n  }\r\n}\r\n"],"names":["formStore","defineStore","state","hidden","docsBlock","controlsBlock","confirmDocsBlock","autosaveTimeoutId","autosave","agreement","url","actions","bitrixLogs","id","message","window","BX","ajax","post","el","document","querySelector","value","level","result","createMulti","parent","property","multi","addMulti","add","randomId","Math","round","random","sub","forEach","s","push","removeMulti","index","splice","changeTextControlValue","control","console","log","changeSelectRadioValue","changeSelectDropdownValue","changeDateValue","changeControlValue","checked","type","substring","toUpperCase","toLowerCase","HiddenFields","data","props","template","methods","generateKey","Date","now","DocsBlock","DataToChange","components","ControlChoice","emits","$emit","timeoutAutosave","create","args","remove","input","focus","blur","enter","ConfirmDocsBlock","SubmitButton","watch","val","text","computed","isDisabled","controlsFlag","controlsPatternFlag","controls","requiredControls","filter","required","every","multy","patternControls","pattern","RegExp","test","confirmDocsFlag","items","find","item","requiredConfirm","undefined","checkboxFlag","clickSubmit","e","target","innerHTML","clickContinue","Array","from","elements","elem","isRequired","classList","contains","closest","getAttribute","tagName","scrollTo","top","getBoundingClientRect","scrollY","behavior","setTimeout","Application","mapState","mapActions","hints","action","runHintsAction","setHints","dataStore","sessionid","signedParameters","AppealNewChangeForm","rootNode","options","createPinia","self","BitrixVue","createApp","name","mounted","SESSION_ID","SIGNED_PARAMETERS","use","mount","setActivePinia"],"mappings":";;;;;;AAAA,EAEO,IAAMA,SAAS,GAAGC,yBAAW,CAAC,MAAM,EAAE;IAC3CC,KAAK,EAAE;MAAA,OAAO;QACZC,MAAM,EAAE,EAAE;QACVC,SAAS,EAAE,EAAE;QACbC,aAAa,EAAE,EAAE;QACjBC,gBAAgB,EAAE,EAAE;QACpBC,iBAAiB,EAAE,CAAC;QACpBC,QAAQ,EAAE,IAAI;QACdC,SAAS,EAAE,EAAE;QACbC,GAAG,EAAE;OACN;KAAC;IACFC,OAAO,EAAE;MACPC,UAAU,4BAAkB;QAAA,IAAfC,EAAE,QAAFA,EAAE;UAAEC,OAAO,QAAPA,OAAO;QACtB,IAAIC,MAAM,CAACC,EAAE,EAAE;UACbA,EAAE,CAACC,IAAI,CAACC,IAAI,CACV,sBAAsB,EACtB;YACEL,EAAE,EAAFA,EAAE;YACFM,EAAE,EAAEC,QAAQ,CAACC,aAAa,CAAC,2BAA2B,CAAC,CAACC,KAAK;YAC7DR,OAAO,EAAPA,OAAO;YACPS,KAAK,EAAE;WACR,EACD,UAAUC,MAAM,EAAE,EAAE,CACrB;;OAEJ;MACDC,WAAW,8BAAa;QAAA,IAAVC,MAAM,SAANA,MAAM;QAClBA,MAAM,CAACC,QAAQ,GAAG,OAAO;QACzBD,MAAM,CAACE,KAAK,GAAG,EAAE;OAClB;MACDC,QAAQ,2BAAkB;QAAA,IAAfH,MAAM,SAANA,MAAM;UAAEI,GAAG,SAAHA,GAAG;QACpB,IAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,IAAI,CAAC;QACjD,IAAMC,GAAG,GAAG,EAAE;QAEd,IAAIL,GAAG,CAACK,GAAG,IAAIL,GAAG,CAACK,GAAG,CAACC,OAAO,EAAE;UAC9BN,GAAG,CAACK,GAAG,CAACC,OAAO,CAAC,UAACC,CAAC,EAAK;YACrBA,CAAC,CAACxB,EAAE,aAAMwB,CAAC,CAACxB,EAAE,SAAGkB,QAAQ,CAAE;YAC3BI,GAAG,CAACG,IAAI,mBAAMD,CAAC,EAAG;WACnB,CAAC;UACFP,GAAG,CAACK,GAAG,GAAGA,GAAG;;QAGfL,GAAG,CAACjB,EAAE,aAAMiB,GAAG,CAACjB,EAAE,SAAGkB,QAAQ,CAAE;QAC/BL,MAAM,CAACE,KAAK,CAACU,IAAI,CAACR,GAAG,CAAC;OACvB;MACDS,WAAW,8BAAoB;QAAA,IAAjBb,MAAM,SAANA,MAAM;UAAEc,KAAK,SAALA,KAAK;QACzBd,MAAM,CAACE,KAAK,CAACa,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;OAC9B;MACDE,sBAAsB,yCAAqB;QAAA,IAAlBC,OAAO,SAAPA,OAAO;UAAErB,KAAK,SAALA,KAAK;QACrCsB,OAAO,CAACC,GAAG,CAACF,OAAO,EAAErB,KAAK,CAAC;QAC3BqB,OAAO,CAACrB,KAAK,GAAGA,KAAK;OACtB;MACDwB,sBAAsB,yCAAqB;QAAA,IAAlBH,OAAO,SAAPA,OAAO;UAAErB,KAAK,SAALA,KAAK;QACrCqB,OAAO,CAACrB,KAAK,GAAGA,KAAK;OACtB;MACDyB,yBAAyB,4CAAqB;QAAA,IAAlBJ,OAAO,SAAPA,OAAO;UAAErB,KAAK,SAALA,KAAK;QACxCqB,OAAO,CAACrB,KAAK,GAAGA,KAAK;OACtB;MACD0B,eAAe,kCAAqB;QAAA,IAAlBL,OAAO,SAAPA,OAAO;UAAErB,KAAK,SAALA,KAAK;QAC9BqB,OAAO,CAACrB,KAAK,GAAGA,KAAK;OACtB;MACD2B,kBAAkB,qCAA8B;QAAA,IAA3BN,OAAO,SAAPA,OAAO;UAAErB,KAAK,SAALA,KAAK;UAAE4B,OAAO,SAAPA,OAAO;QAC1C,QAAQP,OAAO,CAAChB,QAAQ;UACtB,KAAK,MAAM;UACX,KAAK,UAAU;UACf,KAAK,MAAM;YACT,IAAI,CAACe,sBAAsB,CAAC;cAAEC,OAAO,EAAPA,OAAO;cAAErB,KAAK,EAALA;aAAO,CAAC;YAC/C;;;;;;;UAOF,KAAK,QAAQ;YACX,IAAI,uBACaqB,OAAO,CAACQ,IAAI,CACxBC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CACfC,WAAW,EAAE,SAAGV,OAAO,CAACQ,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC,CAACE,WAAW,EAAE,WAC3D,CAAC;cAAEX,OAAO,EAAPA,OAAO;cAAErB,KAAK,EAALA;aAAO,CAAC;YACrB;;;;UAIF,KAAK,MAAM;YACT,IAAI,CAAC0B,eAAe,CAAC;cAAEL,OAAO,EAAPA,OAAO;cAAErB,KAAK,EAALA;aAAO,CAAC;YACxC;;;;;;;EAOV,CAAC,CAAC;;EC/FK,IAAMiC,YAAY,GAAG;IAC1BC,IAAI,kBAAG;MACL,OAAO,EAAE;KACV;IACDC,KAAK,EAAE,CAAC,QAAQ,CAAC;IACjBC,QAAQ,2JAIP;IACDC,OAAO,EAAE;MACPC,WAAW,yBAAG;QACZ,OAAOC,IAAI,CAACC,GAAG,EAAE,GAAG9B,IAAI,CAACE,MAAM,EAAE;;;EAGvC,CAAC;;ECfM,IAAM6B,SAAS,GAAG;IACvBP,IAAI,kBAAG;MACL,OAAO,EAAE;KACV;IACDC,KAAK,EAAE,CAAC,WAAW,CAAC;IACpBC,QAAQ;EAoBV,CAAC;;ECvBM,IAAMM,YAAY,GAAG;IAC1BR,IAAI,kBAAG;MACL,OAAO,EAAE;KACV;IACDS,UAAU,EAAE;MAAEC,aAAa,EAAbA;KAAe;IAC7BT,KAAK,EAAE,CAAC,eAAe,CAAC;IACxBC,QAAQ,82BAqBP;IACDS,KAAK,EAAE,CAAC,UAAU,EAAE,iBAAiB,CAAC;IACtCR,OAAO,EAAE;MACPnD,QAAQ,sBAAG;QACT,IAAI,CAAC4D,KAAK,CAAC,UAAU,CAAC;OACvB;MACDC,eAAe,6BAAG;QAChB,IAAI,CAACD,KAAK,CAAC,iBAAiB,CAAC;OAC9B;MACDE,MAAM,kBAACC,IAAI,EAAE;QACX,IAAI,CAACH,KAAK,CAAC,QAAQ,EAAEG,IAAI,CAAC;OAC3B;MACDzC,GAAG,eAACyC,IAAI,EAAE;QACR,IAAI,CAACH,KAAK,CAAC,KAAK,EAAEG,IAAI,CAAC;OACxB;MACDC,MAAM,kBAACD,IAAI,EAAE;QACX,IAAI,CAACH,KAAK,CAAC,QAAQ,EAAEG,IAAI,CAAC;OAC3B;MACDE,KAAK,iBAACF,IAAI,EAAE;QACV,IAAI,CAACH,KAAK,CAAC,OAAO,EAAEG,IAAI,CAAC;OAC1B;MACDG,KAAK,mBAAG;QACN,IAAI,CAACN,KAAK,CAAC,OAAO,EAAEG,IAAI,CAAC;OAC1B;MACDI,IAAI,kBAAG;QACL,IAAI,CAACP,KAAK,CAAC,MAAM,EAAEG,IAAI,CAAC;OACzB;MACDK,KAAK,mBAAG;QACN,IAAI,CAACR,KAAK,CAAC,OAAO,EAAEG,IAAI,CAAC;;;EAG/B,CAAC;;EC5DM,IAAMM,gBAAgB,GAAG;IAC9BpB,KAAK,EAAE,CAAC,kBAAkB,CAAC;IAC3BC,QAAQ;EAaV,CAAC;;ECfM,IAAMoB,YAAY,GAAG;IAC1BtB,IAAI,kBAAG;MACL,OAAO,EAAE;KACV;IACDC,KAAK,EAAE,CAAC,WAAW,EAAE,eAAe,EAAE,iBAAiB,CAAC;IACxDU,KAAK,EAAE,CAAC,YAAY,CAAC;IACrBT,QAAQ,2nCAaP;IACDqB,KAAK,EAAE;MACL7B,OAAO,mBAAC8B,GAAG,EAAE;QACX,IAAI,CAACZ,KAAK,CAAC,YAAY,EAAE;UACvBvD,EAAE,EAAE,EAAE;UACNC,OAAO,YAAK,IAAI,CAACL,SAAS,CAACwE,IAAI,eAAKD,GAAG;SACxC,CAAC;;KAEL;IACDE,QAAQ,EAAE;MACRhC,OAAO,qBAAG;QACR,OAAO,IAAI,CAACzC,SAAS,GAAG,IAAI,CAACA,SAAS,CAACyC,OAAO,GAAG,KAAK;OACvD;MACDiC,UAAU,wBAAG;;QAEX,IAAIC,YAAY,GAAG,IAAI;QACvB,IAAIC,mBAAmB,GAAG,IAAI;QAC9B,IAAI,IAAI,CAAChF,aAAa,IAAI,IAAI,CAACA,aAAa,CAACiF,QAAQ,EAAE;;UAErD,IAAMC,gBAAgB,GAAG,IAAI,CAAClF,aAAa,CAACiF,QAAQ,CAACE,MAAM,CACzD,UAAC7C,OAAO;YAAA,OAAKA,OAAO,CAAC8C,QAAQ;YAC9B;UACDL,YAAY,GAAGG,gBAAgB,CAACG,KAAK,CAAC,UAAC/C,OAAO,EAAK;YACjD,IAAIA,OAAO,CAACgD,KAAK,EAAE;cACjB,OAAOhD,OAAO,CAACrB,KAAK,CAACoE,KAAK,CAAC,UAACpE,KAAK;gBAAA,OAAKA,KAAK,CAAC0D,GAAG,KAAK,EAAE;gBAAC;aACxD,MAAM;cACL,OAAOrC,OAAO,CAACrB,KAAK,KAAK,EAAE;;WAE9B,CAAC;;UAEF,IAAMsE,eAAe,GAAG,IAAI,CAACvF,aAAa,CAACiF,QAAQ,CAACE,MAAM,CACxD,UAAC7C,OAAO;YAAA,OAAKA,OAAO,CAACkD,OAAO;YAC7B;UACDR,mBAAmB,GAAGO,eAAe,CAACF,KAAK,CAAC,UAAC/C,OAAO,EAAK;YACvD,IAAIA,OAAO,CAACgD,KAAK,EAAE;cACjB,OAAOhD,OAAO,CAACrB,KAAK,CAACoE,KAAK,CACxB,UAACpE,KAAK;gBAAA,OACJA,KAAK,CAAC0D,GAAG,KAAK,EAAE,IAChB,IAAIc,MAAM,CAACnD,OAAO,CAACkD,OAAO,EAAE,IAAI,CAAC,CAACE,IAAI,CAACzE,KAAK,CAAC0D,GAAG,CAAC;gBACpD;aACF,MAAM;cACL,OACErC,OAAO,CAACrB,KAAK,KAAK,EAAE,IACpB,IAAIwE,MAAM,CAACnD,OAAO,CAACkD,OAAO,EAAE,IAAI,CAAC,CAACE,IAAI,CAACpD,OAAO,CAACrB,KAAK,CAAC;;WAG1D,CAAC;;;;QAIJ,IAAI0E,eAAe,GAAG,IAAI;QAC1B,IAAI,IAAI,CAAC1F,gBAAgB,IAAI,IAAI,CAACA,gBAAgB,CAAC2F,KAAK,EAAE;UACxD,IAAM/C,OAAO,GAAG,IAAI,CAAC5C,gBAAgB,CAAC2F,KAAK,CAACC,IAAI,CAC9C,UAACC,IAAI;YAAA,OAAKA,IAAI,CAACjD,OAAO,KAAK,IAAI;YAChC;UAED,IAAMkD,eAAe,GAAGlD,OAAO,GAC3BA,OAAO,CAACoC,QAAQ,CAACE,MAAM,CAAC,UAAC7C,OAAO;YAAA,OAAKA,OAAO,CAAC8C,QAAQ;YAAC,GACtDY,SAAS;UAEbL,eAAe,GAAGI,eAAe,GAC7BA,eAAe,CAACV,KAAK,CAAC,UAAC/C,OAAO;YAAA,OAC5BA,OAAO,CAACrB,KAAK,IAAI,uBAAOqB,OAAO,CAACrB,KAAK,MAAK,QAAQ,GAC9CqB,OAAO,CAACrB,KAAK,CAACoE,KAAK,CAAC,UAACpE,KAAK;cAAA,OAAKA,KAAK,CAAC0D,GAAG,KAAK,EAAE;cAAC,GAChDrC,OAAO,CAACrB,KAAK,KAAK,EAAE;YACzB,GACD,KAAK;;;;QAIX,IAAMgF,YAAY,GAAG,IAAI,CAACpD,OAAO;QAEjC,OAAO,EACLkC,YAAY,IACZC,mBAAmB,IACnBW,eAAe,IACfM,YAAY,CACb;;KAEJ;IACD3C,OAAO,EAAE;MACP4C,WAAW,uBAACC,CAAC,EAAE;QACb,IAAI,CAACpC,KAAK,CAAC,YAAY,EAAE;UACvBvD,EAAE,EAAE,EAAE;UACNC,OAAO,EAAE0F,CAAC,CAACC,MAAM,CAACC;SACnB,CAAC;OACH;MACDC,aAAa,2BAAG;QACd,IAAMhE,OAAO,GAAGiE,KAAK,CAACC,IAAI,CACxBzF,QAAQ,CAACC,aAAa,CAAC,gCAAgC,CAAC,CAACyF,QAAQ,CAClE,CAACZ,IAAI,CAAC,UAACa,IAAI,EAAK;UACf,IAAIC,UAAU,GAAGD,IAAI,CAACE,SAAS,CAACC,QAAQ,CAAC,UAAU,CAAC,GAChDH,IAAI,CAACI,OAAO,CAAC,gBAAgB,CAAC,CAACC,YAAY,CAAC,eAAe,CAAC,GAC5DL,IAAI,CAACK,YAAY,CAAC,eAAe,CAAC;UAEtC,IACEL,IAAI,CAACK,YAAY,CAAC,MAAM,CAAC,KAAK,MAAM,IACpC,CAACL,IAAI,CAACI,OAAO,CAAC,oBAAoB,CAAC,CAAC9F,aAAa,CAAC,mBAAmB,CAAC,CACnE6B,OAAO,EACV;YACA8D,UAAU,GAAG,KAAK;;UAGpB,IAAM1F,KAAK,GACTyF,IAAI,CAACK,YAAY,CAAC,MAAM,CAAC,KAAK,MAAM,GAChCL,IAAI,CAACK,YAAY,CAAC,YAAY,CAAC,GAC/BL,IAAI,CAACzF,KAAK;UAEhB,IAAMuE,OAAO,GAAGkB,IAAI,CAACK,YAAY,CAAC,cAAc,CAAC;UAEjD,IAAIvB,OAAO,IAAIvE,KAAK,KAAK,EAAE,EAAE;YAC3B,OAAO,CAAC,IAAIwE,MAAM,CAACD,OAAO,EAAE,IAAI,CAAC,CAACE,IAAI,CAACzE,KAAK,CAAC;WAC9C,MAAM;YACL,OACE0F,UAAU,IACVD,IAAI,CAACM,OAAO,CAAC/D,WAAW,EAAE,KAAK,QAAQ,IACvCyD,IAAI,CAACK,YAAY,CAAC,MAAM,CAAC,KAAK,QAAQ,IACtC9F,KAAK,KAAK,EAAE;;SAGjB,CAAC;QAEF,IAAI,CAACqB,OAAO,EAAE;QAEd,IAAIA,OAAO,CAACwE,OAAO,CAAC,gBAAgB,CAAC,EAAE;UACrCxE,OAAO,CAACwE,OAAO,CAAC,gBAAgB,CAAC,CAACF,SAAS,CAACnF,GAAG,CAAC,SAAS,CAAC;SAC3D,MAAM,IAAIa,OAAO,CAACwE,OAAO,CAAC,sBAAsB,CAAC,EAAE;UAClDxE,OAAO,CAACwE,OAAO,CAAC,sBAAsB,CAAC,CAACF,SAAS,CAACnF,GAAG,CAAC,SAAS,CAAC;;QAGlEf,MAAM,CAACuG,QAAQ,CAAC;UACdC,GAAG,EAAE5E,OAAO,CAAC6E,qBAAqB,EAAE,CAACD,GAAG,GAAGxG,MAAM,CAAC0G,OAAO,GAAG,GAAG;UAC/DC,QAAQ,EAAE;SACX,CAAC;QAEFC,UAAU,CAAC,YAAM;UACfhF,OAAO,CAAC+B,KAAK,EAAE;SAChB,EAAE,IAAI,CAAC;;;EAGd,CAAC;;;;AC/JD,EAaO,IAAMkD,WAAW,GAAG;IACzBpE,IAAI,kBAAG;MACL,OAAO,EAAE;KACV;IACDS,UAAU,EAAE;MACVC,aAAa,EAAbA,+CAAa;MACbX,YAAY,EAAZA,YAAY;MACZQ,SAAS,EAATA,SAAS;MACTC,YAAY,EAAZA,YAAY;MACZa,gBAAgB,EAAhBA,gBAAgB;MAChBC,YAAY,EAAZA;KACD;;;IAGDpB,QAAQ,ksCAsBR;IACAwB,QAAQ,sBACH2C,sBAAQ,CAAC7H,SAAS,EAAE,CACrB,QAAQ,EACR,WAAW,EACX,eAAe,EACf,kBAAkB,EAClB,mBAAmB,EACnB,UAAU,EACV,WAAW,EACX,KAAK,CACN,CAAC,CACH;IACD2D,OAAO,sCACFmE,wBAAU,CAAC9H,SAAS,EAAE,CACvB,YAAY,EACZ,gBAAgB,EAChB,UAAU,EACV,oBAAoB,EACpB,aAAa,EACb,UAAU,EACV,aAAa,CACd,CAAC;MACF+H,KAAK,uBAAmC;QAAA,IAAhC5E,IAAI,QAAJA,IAAI;UAAER,OAAO,QAAPA,OAAO;UAAEqF,MAAM,QAANA,MAAM;UAAE1G,KAAK,QAALA,KAAK;QAClC,QAAQ6B,IAAI;UACV,KAAK,KAAK;YACR,IAAI,CAAC8E,cAAc,CAAC;cAClBtF,OAAO,EAAPA,OAAO;cACPqF,MAAM,EAANA;aACD,CAAC;YACF;UACF,KAAK,KAAK;YACR,IAAI,CAACE,QAAQ,CAAC;cACZvF,OAAO,EAAPA,OAAO;cACPrB,KAAK,EAALA;aACD,CAAC;YACF;;OAEL;MACDmD,KAAK,wBAA8B;QAAA,IAA3B9B,OAAO,SAAPA,OAAO;UAAErB,KAAK,SAALA,KAAK;UAAE4B,OAAO,SAAPA,OAAO;QAC7B,IAAI,CAACD,kBAAkB,CAAC;UACtBN,OAAO,EAAPA,OAAO;UACPrB,KAAK,EAALA,KAAK;UACL4B,OAAO,EAAPA;SACD,CAAC;OACH;MACDwB,KAAK,mBAAG;QACN9B,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;OACrB;MACD8B,IAAI,kBAAG;QACL/B,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;OACpB;MACD+B,KAAK,mBAAG;QACNhC,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;;;EAG1B,CAAC;;ECvGM,IAAMsF,SAAS,GAAGlI,yBAAW,CAAC,MAAM,EAAE;IAC3CC,KAAK,EAAE;MAAA,OAAO;QACZkI,SAAS,EAAE,EAAE;QACbC,gBAAgB,EAAE;OACnB;;EACH,CAAC,CAAC;;;;ACPF,EAI0C;EAAA;EAAA;AAE1C,MAAaC,mBAAmB;IAK9B,6BAAYC,QAAQ,EAAEC,OAAO,EAAQ;MAAA;MAAA;QAAA;QAAA;;MAAA;QAAA;QAAA;;MAAA;QAAA;QAAA;;MACnC,sCAAI,UAAUC,yBAAW,EAAE;MAC3B,sCAAI,aAAarH,QAAQ,CAACC,aAAa,CAACkH,QAAQ,CAAC;MACjD,IAAI,CAACC,OAAO,GAAGA,OAAO;;IACvB;MAAA;MAAA,sBAEW;QACV,IAAME,IAAI,GAAG,IAAI;QAEjB,sCAAI,gBAAgBC,iBAAS,CAACC,SAAS,CAAC;UACtCC,IAAI,EAAE,kCAAkC;UACxC5E,UAAU,EAAE;YACV2D,WAAW,EAAXA;WACD;UACDlE,QAAQ,EAAE,gBAAgB;UAC1BoF,OAAO,qBAAG;YACRX,SAAS,EAAE,CAACC,SAAS,GAAGM,IAAI,CAACF,OAAO,CAACO,UAAU,IAAI,EAAE;YACrDZ,SAAS,EAAE,CAACE,gBAAgB,GAAGK,IAAI,CAACF,OAAO,CAACQ,iBAAiB,IAAI,EAAE;YAEnEhJ,SAAS,EAAE,CAACG,MAAM,GAAGuI,IAAI,CAACF,OAAO,CAAChF,IAAI,CAACrD,MAAM;YAC7CH,SAAS,EAAE,CAACI,SAAS,GAAGsI,IAAI,CAACF,OAAO,CAAChF,IAAI,CAACpD,SAAS;YACnDJ,SAAS,EAAE,CAACK,aAAa,GAAGqI,IAAI,CAACF,OAAO,CAAChF,IAAI,CAACnD,aAAa;YAC3DL,SAAS,EAAE,CAACM,gBAAgB,GAAGoI,IAAI,CAACF,OAAO,CAAChF,IAAI,CAAClD,gBAAgB;YACjEN,SAAS,EAAE,CAACO,iBAAiB,GAAGmI,IAAI,CAACF,OAAO,CAAChF,IAAI,CAACjD,iBAAiB;YACnEP,SAAS,EAAE,CAACQ,QAAQ,GAAGkI,IAAI,CAACF,OAAO,CAAChF,IAAI,CAAChD,QAAQ;YACjDR,SAAS,EAAE,CAACS,SAAS,GAAGiI,IAAI,CAACF,OAAO,CAAChF,IAAI,CAAC/C,SAAS;YACnDT,SAAS,EAAE,CAACU,GAAG,GAAGgI,IAAI,CAACF,OAAO,CAAChF,IAAI,CAAC9C,GAAG;;SAE1C,CAAC;QAEF,sCAAI,gBAAcuI,GAAG,mCAAC,IAAI,UAAQ;QAClC,sCAAI,gBAAcC,KAAK,mCAAC,IAAI,aAAW;;;MACxC;MAAA,oDAEyC;QACxCC,4BAAc,mCAAC,IAAI,UAAQ;;;MAC5B;MAAA,+BAEsB;QACrB,OAAOnJ,SAAS;;;IACjB;EAAA;;;;;;;;"}