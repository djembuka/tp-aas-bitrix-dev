{"version":3,"file":"application.bundle.js","sources":["../src/stores/data.js","../src/stores/result.js","../src/stores/application.js","../src/stores/controls.js","../src/components/application.js","../src/components/the-navigation.js","../src/components/stepComponent.js","../src/components/the-buttons.js","../src/pages/step.js","../src/components/resultItemComponent.js","../src/components/groupApplicationComponent.js","../src/components/resultApplicationForm.js","../src/components/resultApplicationSuccess.js","../src/pages/result.js","../src/loader.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    customData: {},\r\n    signedParameters: '',\r\n    lang: {},\r\n    actions: [],\r\n\r\n    error: '',\r\n    loading: false,\r\n\r\n    resultApplicationGroupId: 1,\r\n    applicationID: null\r\n  }),\r\n  actions: {\r\n    changeProp(prop, value) {\r\n      this[prop] = value;\r\n    },\r\n    createUrl(controls) {\r\n        const url = new URL(window.location.href);\r\n        controls.forEach(c => {\r\n          let value = c.value\r\n          if (c.property === 'hint') {\r\n            value = c.value?.id\r\n          }\r\n          url.searchParams.set(c.name, String(value));\r\n        });\r\n        window.history.pushState({}, '', url);\r\n    },\r\n    runBitrixMethod(method, data, formData) {\r\n      if (!this.actions[method] || !Array.isArray(this.actions[method])) {\r\n        return Promise.reject({errors: [{message: `No such method ${method}`}]});\r\n      }\r\n\r\n      let payload;\r\n      \r\n      // Если есть formData, добавляем к нему customData и передаем как data\r\n      if (formData instanceof FormData) {\r\n        // Добавляем customData к FormData\r\n        Object.entries(this.customData).forEach(([key, value]) => {\r\n          if (value !== undefined && value !== null) {\r\n            formData.append(key, value);\r\n          }\r\n        });\r\n        payload = formData;\r\n      } else if (data) {\r\n        // Если есть data, объединяем с customData в объект\r\n        payload = {\r\n          ...this.customData,\r\n          ...data\r\n        };\r\n      } else {\r\n        // Если нет ни data, ни formData, передаем только customData\r\n        payload = this.customData;\r\n      }\r\n\r\n      return BX.ajax.runComponentAction(this.actions[method][0], this.actions[method][1], {\r\n        mode: 'class',\r\n        data: payload,\r\n        signedParameters: this.signedParameters,\r\n      })\r\n    }\r\n  }\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const resultStore = defineStore('result', {\r\n  state: () => ({\r\n    loading: false,\r\n\r\n    formIdArray: [],\r\n    formDataArray: [],\r\n    startIndex: 0,\r\n    maxCountPerRequest: 3,\r\n    loadingMore: false,\r\n    applicationModalStateWatcher: false,\r\n\r\n    resultApplicationGroup: {},\r\n    resultApplicationControls: [],\r\n    resultApplicationState: 'form',\r\n    resultApplicationError: '',\r\n\r\n    chosenCompanyId: undefined\r\n  }),\r\n  getters: {\r\n    groupApplicationArray(state) {\r\n      return state.formDataArray\r\n        .filter(d => d.checkbox.checked)\r\n        .map(d => d.id);\r\n    }\r\n  },\r\n  actions: {\r\n    changeResultApplicationGroup(groups, resultApplicationGroupId) {\r\n      if (groups && groups.filter) {\r\n        this.resultApplicationGroup = groups.filter(g => String(g.id) === String(resultApplicationGroupId))\r\n      }\r\n    },\r\n    changeResultApplicationControls(controls, resultApplicationGroupId) {\r\n      if (controls && controls.filter) {\r\n        this.resultApplicationControls = \r\n            controls\r\n                .filter(c => String(c.groupid) === String(resultApplicationGroupId))\r\n                .map(c => {\r\n                    if (c.required) {\r\n                        c.label = `${c.label} *`;\r\n                    }\r\n                    return c;\r\n                });\r\n      }\r\n    },\r\n    setFormIdArray(data) {\r\n        this.formIdArray = data;\r\n    },\r\n    setFormDataArray(data) {\r\n        this.formDataArray = this.formDataArray.concat(data);\r\n    },\r\n    setStartIndex(value) {\r\n      this.startIndex = value;\r\n    },\r\n    setMaxCountPerRequest(value) {\r\n      this.maxCountPerRequest = value;\r\n    },\r\n    changeResultProp(prop, value) {\r\n      this[prop] = value;\r\n    }\r\n  }});","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const applicationStore = defineStore('application', {\r\n    state: () => ({\r\n        applicationControls: [],\r\n        applicationGroups: []\r\n    }),\r\n    actions: {\r\n        changeApplicationGroups(groups, resultApplicationGroupId) {\r\n            if (groups && groups.filter) {\r\n                this.applicationGroups = groups.filter(g => String(g.id) !== String(resultApplicationGroupId))\r\n            }\r\n        },\r\n        changeApplicationControls(controls, resultApplicationGroupId) {\r\n            if (controls && controls.filter) {\r\n                this.applicationControls = \r\n                    controls\r\n                        .filter(c => String(c.groupid) !== String(resultApplicationGroupId))\r\n                        .map(c => {\r\n                            if (c.required) {\r\n                                c.label = `${c.label} *`;\r\n                            }\r\n                            return c;\r\n                        });\r\n            }\r\n        },\r\n    }\r\n});","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const controlsStore = defineStore('controls', {\r\n  state: () => ({\r\n    controls: []\r\n  }),\r\n  actions: {\r\n    changeControls(controls) {\r\n        this.controls = controls;\r\n    },\r\n    changeTextControlValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeSelectDropdownValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeDateValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeCheckboxValue({ control, checked }) {\r\n        control.checked = checked;\r\n    },\r\n    changeFileValue({ control, value }) {\r\n        control.value = value;\r\n        if (control.type === 'upload') {\r\n        this.uploadFile(control, value);\r\n        }\r\n    },\r\n    changeControlValue({ control, value, checked }) {\r\n        switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n        case 'hint':\r\n        case 'tel':\r\n        case 'email':\r\n        case 'num':\r\n            this.changeTextControlValue({ control, value });\r\n            break;\r\n        // case 'multiselect':\r\n        //   commit('changeMultiselectValue', { control, value, checked });\r\n        //   break;\r\n        case 'checkbox':\r\n          this.changeCheckboxValue({ control, checked });\r\n          break;\r\n        case 'select':\r\n            this[\r\n            `changeSelect${control.type\r\n                .substring(0, 1)\r\n                .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n            ]({ control, value });\r\n            break;\r\n        case 'file':\r\n            this.changeFileValue({ control, value });\r\n            break;\r\n        case 'date':\r\n            this.changeDateValue({ control, value });\r\n            break;\r\n        // case 'color':\r\n        //   commit('changeColorValue', { control, value });\r\n        //   break;\r\n        }\r\n    },\r\n    async runHintsAction({control, action}) {\r\n        const url = new URL(action, window.location.origin);\r\n        url.searchParams.append('s', control.value);\r\n\r\n        try {\r\n        // Создаем AbortController для возможности отмены запроса\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 20000); // 20 секунд таймаут\r\n\r\n        const response = await fetch(url, {\r\n            signal: controller.signal,\r\n            headers: {\r\n            'Content-Type': 'application/json',\r\n            },\r\n        });\r\n\r\n        clearTimeout(timeoutId);\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const result = await response.json();\r\n\r\n        if (result.status === 'success' && result.data) {\r\n            this.setHints({control, value: result.data});\r\n        } else if (result.errors) {\r\n            this.error = result.errors[0]?.message\r\n        } else {\r\n            this.error = 'Invalid response format';\r\n        }\r\n        } catch (error) {\r\n            this.error = error?.message\r\n        }\r\n    },\r\n    setHints({control, value}) {\r\n        control.hints = value;\r\n    },\r\n  }\r\n});","import '../css/common.css';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data';\r\nimport { applicationStore } from '../stores/application';\r\nimport { resultStore } from '../stores/result';\r\nimport { controlsStore } from '../stores/controls';\r\n\r\nexport const Application = {\r\n    template: `\r\n        <router-view />\r\n    `,\r\n    computed: {\r\n        ...mapState(dataStore, [\r\n            'resultApplicationGroupId'\r\n        ]),\r\n        ...mapState(applicationStore, [\r\n            'applicationControls'\r\n        ]),\r\n    },\r\n    methods: {\r\n        ...mapActions(dataStore, [\r\n            'changeProp',\r\n            'runBitrixMethod',\r\n        ]),\r\n        ...mapActions(applicationStore, [\r\n            'changeApplicationGroups',\r\n            'changeApplicationControls',\r\n        ]),\r\n        ...mapActions(resultStore, [\r\n            'changeResultApplicationGroup',\r\n            'changeResultApplicationControls',\r\n            'setFormIdArray'\r\n        ]),\r\n        ...mapActions(controlsStore, [\r\n            'changeControlValue',\r\n        ]),\r\n        isUFParam() {\r\n            const urlSearchParams = new URLSearchParams(window.location.search);\r\n            let result = false;\r\n            for(const key of urlSearchParams.keys()) {\r\n              if (key.startsWith('UF_')) {\r\n                result = true;\r\n              }\r\n            }\r\n\r\n            return result;\r\n        },\r\n        setValuesToApplicationControls() {\r\n            const urlSearchParams = new URLSearchParams(window.location.search);\r\n            this.applicationControls.forEach(c => {\r\n                this.changeControlValue({\r\n                    control: c,\r\n                    value: urlSearchParams.get(c.name)\r\n                });\r\n            });\r\n        }\r\n    },\r\n    async mounted() {\r\n        this.changeProp('loading', true);\r\n        this.changeProp('error', '');\r\n\r\n        try {\r\n            const groupsResponse = await this.runBitrixMethod('applicationGroups');\r\n            this.changeApplicationGroups(groupsResponse.data, this.resultApplicationGroupId);\r\n            this.changeResultApplicationGroup(groupsResponse.data, this.resultApplicationGroupId);\r\n\r\n            const templateResponse = await this.runBitrixMethod('applicationTemplate');\r\n            this.changeApplicationControls(templateResponse.data, this.resultApplicationGroupId);\r\n            this.changeResultApplicationControls(templateResponse.data, this.resultApplicationGroupId);\r\n\r\n            const ufParam = this.isUFParam();\r\n\r\n            if (ufParam) {\r\n                this.setValuesToApplicationControls();\r\n\r\n                const controls = this.applicationControls.slice();\r\n                controls.forEach(c => {\r\n                    if (c.property === 'date' && c.type === 'range') {\r\n                        c.value = `${c.value[0]}-${c.value[1]}`\r\n                    }\r\n                });\r\n    \r\n                const saveResponse = await this.runBitrixMethod('applicationSave', {fields: controls});\r\n                const searchResponse = await this.runBitrixMethod('searchForms', {applicationID: saveResponse?.data?.applicationID});\r\n                this.setFormIdArray(searchResponse.data);\r\n                this.$router.push(`/result`);\r\n            } else {\r\n                this.changeProp('loading', false);\r\n                this.changeProp('error', '');\r\n            }\r\n        } catch(error) {\r\n            this.changeProp('loading', false);\r\n            this.changeProp('error', error?.errors ? error.errors[0].message : error);\r\n        }\r\n    }\r\n}","import '../css/navigation.css';\r\n\r\nexport const TheNavigation = {\r\n    data(){\r\n        return {}\r\n    },\r\n    props: ['groups'],\r\n    emits: ['clickNavItem'],\r\n    template: `\r\n        <div class=\"twpx-vue-marketplace-nav\">\r\n            <div class=\"twpx-vue-marketplace-nav-items\">\r\n                <div\r\n                    :class=\"{'twpx-vue-marketplace-nav__item': true, 'twpx-vue-marketplace-nav__item--active': isGroupActive(groupIndex)}\"\r\n                    v-for=\"(group, groupIndex) in groups\"\r\n                    :key=\"group.id\"\r\n                    @click.prevent=\"click(group)\">\r\n                        {{ group.label }}\r\n                </div>\r\n            </div>\r\n            <div :class=\"{'twpx-vue-marketplace-nav-line': true, 'twpx-vue-marketplace-nav-line--full': lineWidth === '100%'}\">\r\n                <div :style=\"'width: ' + lineWidth\"></div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    computed: {\r\n        currentIndex() {\r\n            const index =  this.groups.findIndex(s => String(s.id) === String(this.$route.params.id)) || 0;\r\n            return index === -1 ? 0 : index;\r\n        },\r\n        lineWidth() {\r\n            return ((this.currentIndex + 1) * 100 / this.groups.length) + '%';\r\n        }\r\n    },\r\n    methods: {\r\n        click(group) {\r\n            this.$emit('clickNavItem', {group});\r\n        },\r\n        isGroupActive(groupIndex) {\r\n            return groupIndex <= this.currentIndex;\r\n        },\r\n    },\r\n}","import { ControlComponent } from 'local.vue-components.control-component';\r\n\r\nexport const StepComponent = {\r\n    props: ['step'],\r\n    emits: ['input', 'hints'],\r\n    components: {\r\n        ControlComponent\r\n    },\r\n    template: `\r\n        <div class=\"twpx-vue-marketplace-application-html\" v-if=\"step.title || step.subtitle\">\r\n            <h4 v-if=\"step.title\">{{ step.title }}</h4>\r\n            <p v-if=\"step.subtitle\">{{ step.subtitle }}</p>\r\n        </div>\r\n\r\n        <div class=\"twpx-vue-marketplace-application-controls\">\r\n            <ControlComponent v-for=\"control in step.controls\" :key=\"control.id\" :control=\"control\" @input=\"input\" @hints=\"hints\" />\r\n        </div>\r\n    `,\r\n    methods: {\r\n        input(args) {\r\n            this.$emit('input', args);\r\n        },\r\n        hints(args) {\r\n            this.$emit('hints', args);\r\n        }\r\n    }\r\n};","import '../css/buttons.css';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\n\r\nexport const TheButtons = {\r\n  props: ['groups', 'step', 'lang'],\r\n  emits: ['send'],\r\n  components: {\r\n    ButtonComponent,\r\n  },\r\n  template: `\r\n        <div class=\"twpx-vue-marketplace-buttons\">\r\n            <ButtonComponent :text=\"lang.prevButton\" :props=\"['gray-color','large']\" @clickButton=\"goBack\" v-if=\"currentIndex > 0\" />\r\n            <ButtonComponent :text=\"lang.nextButton\" :props=\"['secondary','large']\" :disabled=\"isDisabled\" @clickButton=\"goForward\" v-if=\"currentIndex < groups.length - 1\" />\r\n            <ButtonComponent :text=\"lang.sendButton\" :props=\"['secondary','large']\" :disabled=\"isDisabled\" @clickButton=\"$emit('send')\" v-if=\"currentIndex == groups.length - 1\" />\r\n        </div>\r\n    `,\r\n  computed: {\r\n    currentIndex() {\r\n      return this.$route.params.id\r\n        ? this.groups.findIndex(\r\n            (s) => String(s.id) === String(this.$route.params.id)\r\n          )\r\n        : 0;\r\n    },\r\n    isDisabled() {\r\n      if (Array.isArray(this.step.controls)) {\r\n        return this.step.controls.find(\r\n          (c) => c.property !== 'checkbox' && c.required && !c.value\r\n        );\r\n      }\r\n      return true\r\n    },\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      const group = this.groups[this.currentIndex - 1];\r\n      if (group) {\r\n        this.$router.push(`/step/${group.id}`);\r\n      }\r\n      if (window.matchMedia(\"(max-width: 768px)\")) {\r\n        document.querySelector('.twpx-vue-marketplace-nav').scrollTo({\r\n          left: (this.currentIndex - 1) * 150,\r\n          behavior: \"smooth\",\r\n        })\r\n      }\r\n    },\r\n    goForward() {\r\n      const group = this.groups[this.currentIndex + 1];\r\n      if (group) {\r\n        this.$router.push(`/step/${group.id}`);\r\n      }\r\n      if (window.matchMedia(\"(max-width: 768px)\")) {\r\n        document.querySelector('.twpx-vue-marketplace-nav').scrollTo({\r\n          left: (this.currentIndex + 1) * 150,\r\n          behavior: \"smooth\",\r\n        })\r\n      }\r\n    },\r\n  },\r\n};\r\n","import { TheNavigation } from '../components/the-navigation';\r\nimport { StepComponent } from '../components/stepComponent'\r\nimport { TheButtons } from '../components/the-buttons';\r\n\r\nimport { MessageComponent } from 'local.vue-components.message-component';\r\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data';\r\nimport { applicationStore } from '../stores/application';\r\nimport { controlsStore } from '../stores/controls';\r\nimport { resultStore } from '../stores/result';\r\n\r\nexport const Step = {\r\n    components: {\r\n        TheNavigation,\r\n        StepComponent,\r\n        TheButtons,\r\n        MessageComponent,\r\n        LoaderCircle\r\n    },\r\n    template: `\r\n        <div class=\"twpx-vue-marketplace-application\">\r\n\r\n            <LoaderCircle :show=\"loading\" />\r\n\r\n            <MessageComponent type=\"error\" size=\"big\" :message=\"error\" v-if=\"!loading && error\" />\r\n\r\n            <div v-if=\"!loading\" class=\"twpx-vue-marketplace-application__content\">\r\n\r\n                <h2>{{ lang.application.heading }}</h2>\r\n\r\n                <TheNavigation :groups=\"applicationGroups\" @clickNavItem=\"clickNavItem\" />\r\n\r\n                <StepComponent :step=\"step\" @input=\"input\" @hints=\"hints\" />\r\n\r\n                <TheButtons :groups=\"applicationGroups\" :step=\"step\" :lang=\"lang.application\" @send=\"send\" />\r\n\r\n            </div>\r\n\r\n        </div>\r\n    `,\r\n    computed: {\r\n        ...mapState(dataStore, [\r\n            'lang',\r\n            'error',\r\n            'loading',\r\n        ]),\r\n        ...mapState(applicationStore, [\r\n            'applicationControls',\r\n            'applicationGroups'\r\n        ]),\r\n        step() {\r\n            const groupId = this.$route.params.id || (this.applicationGroups.length ? this.applicationGroups[0].id : undefined);\r\n            const group = this.applicationGroups.find(g => String(g.id) === String(groupId));\r\n            const controls = this.applicationControls.filter(c => String(c.groupid) === String(groupId));\r\n            \r\n            return controls.length ?\r\n                {\r\n                    id: groupId,\r\n                    title: group.title,\r\n                    subtitle: group.subtitle,\r\n                    controls\r\n                }\r\n                : {};\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(dataStore, [\r\n            'runBitrixMethod',\r\n            'changeProp',\r\n            'createUrl'\r\n        ]),\r\n        ...mapActions(applicationStore, [\r\n            'changeApplicationControls',\r\n            'changeApplicationGroups'\r\n        ]),\r\n        ...mapActions(controlsStore, [\r\n            'changeControlValue',\r\n            'runHintsAction',\r\n            'setHints'\r\n        ]),\r\n        ...mapActions(resultStore, [\r\n            'setFormIdArray',\r\n            'setFormTemplate',\r\n            'setFormDataArray',\r\n            'changeResultApplicationGroup',\r\n            'changeResultApplicationControls'\r\n        ]),\r\n        clickNavItem({group}) {\r\n            this.$router.push(`/step/${group.id}`);\r\n        },\r\n        showError(response, method) {\r\n            this.changeProp('loading', false);\r\n            if (response && response.errors.length) {\r\n                this.changeProp('error', `${method ? method + ' - ' : ''}${response.errors[0].message}`);\r\n            }\r\n        },\r\n        send() {\r\n            this.changeProp('loading', true);\r\n            this.changeProp('error', '');\r\n\r\n            const controls = JSON.parse(JSON.stringify(this.applicationControls.slice()));\r\n            controls.forEach(c => {\r\n                if (c.property === 'date' && c.type === 'range') {\r\n                    c.value = `${c.value[0]}-${c.value[1]}`\r\n                }\r\n                if (c.property === 'hint') {\r\n                    c.value = c.value.id\r\n                }\r\n            });\r\n\r\n            this.runBitrixMethod('applicationSave', {fields: controls})\r\n                .then(\r\n                    (response) => {\r\n                        this.changeProp('applicationID', response?.data?.applicationID)\r\n                        return this.runBitrixMethod('searchForms', {applicationID: response?.data?.applicationID})\r\n                    },\r\n                    (r) => {this.showError(r, 'applicationSave')}\r\n                )\r\n                .then(\r\n                    (response) => {\r\n                        this.setFormIdArray(response.data);\r\n\r\n                        this.createUrl(this.applicationControls);\r\n                        this.$router.push(`/result`);\r\n                    },\r\n                    (r) => {this.showError(r, 'searchForms')}\r\n                )\r\n                .catch(err => {\r\n                    this.showError(err)\r\n                })\r\n        },\r\n        input(args) {\r\n            this.changeControlValue(args)\r\n        },\r\n        hints({ type, control, action, value }) {\r\n            switch (type) {\r\n                case 'get':\r\n                    this.runHintsAction({\r\n                        control,\r\n                        action,\r\n                    });\r\n                    break;\r\n                case 'set':\r\n                    this.setHints({\r\n                        control,\r\n                        value,\r\n                    });\r\n                    break;\r\n            }\r\n        },\r\n    },\r\n    \r\n}","import '../css/result.css'\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\nimport { ControlComponent } from 'local.vue-components.control-component';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data';\r\nimport { resultStore } from '../stores/result';\r\n\r\nexport const ResultItemComponent = {\r\n    data() {\r\n        return {\r\n            s: false\r\n        }\r\n    },\r\n    components: {\r\n        ButtonComponent,\r\n        ControlComponent\r\n    },\r\n    props: ['company'],\r\n    emits: ['createApplication', 'input'],\r\n    template: `\r\n        <div class=\"twpx-vue-marketplace-company\" :data-id=\"company.id\">\r\n            <div class=\"twpx-vue-marketplace-company__text\">\r\n                <h3 v-if=\"companyName\" v-html=\"companyName\"></h3>\r\n                <p v-if=\"companyDescription\">{{ companyDescription }}</p>\r\n            </div>\r\n            <div class=\"twpx-vue-marketplace-company__properties\">\r\n                <div class=\"twpx-vue-marketplace-company__props\">\r\n                    <div class=\"twpx-vue-marketplace-company__prop\" v-for=\"prop in getProperties().slice(0,6)\" :key=\"prop.id\">\r\n                        <b>{{ prop.label }}</b>\r\n                        <span v-html=\"getValue(prop)\"></span>\r\n                    </div>\r\n                    <TransitionGroup name=\"list\">\r\n                        <div class=\"twpx-vue-marketplace-company__prop\" v-for=\"prop in getProperties().slice(6)\" :key=\"prop.id\" v-show=\"s\">\r\n                            <b>{{ prop.label }}</b>\r\n                            <span v-html=\"getValue(prop)\"></span>\r\n                        </div>\r\n                    </TransitionGroup>\r\n                </div>\r\n                <ButtonComponent :text=\"moreText\" :props=\"['serve', 'small']\" @clickButton=\"toggleMoreProperties\" />\r\n            </div>\r\n            <div class=\"twpx-vue-marketplace-company__buttons\">\r\n                <span></span>\r\n                <ButtonComponent v-if=\"false\" :text=\"lang.result.getButton\" :props=\"['icon-content', 'primary', 'medium']\" @clickButton=\"\" />\r\n                <div class=\"twpx-vue-marketplace-company__buttons__right\">\r\n                    <ControlComponent :control='company.checkbox' @input=\"input\" />\r\n                    <ButtonComponent :text=\"lang.result.sendButton\" :props=\"['secondary', 'medium']\" @clickButton=\"createApplication\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    computed: {\r\n        ...mapState(dataStore, [\r\n            'lang',\r\n        ]),\r\n        ...mapState(resultStore, [\r\n            'formTemplate',\r\n            'formData',\r\n        ]),\r\n        moreText() {\r\n            return this.s ? this.lang.result.hideProps : this.lang.result.moreProps;\r\n        },\r\n        dataObject() {\r\n            return this.company.data\r\n                .filter(d => String(d.value))\r\n                .forEach(d => {\r\n                    d.label = this.template[d.name];\r\n                });\r\n        },\r\n        companyName() {\r\n            const name = this.company.data.find(c => c.name === 'UF_NAME');\r\n            return name?.value;\r\n        },\r\n        companyDescription() {\r\n            return this.company.data.find(c => c.name === 'UF_DESCRIPTION')?.value;\r\n        },\r\n    },\r\n    methods: {\r\n        input(args) {\r\n            this.$emit('input', args);\r\n        },\r\n        createApplication() {\r\n            this.$emit('createApplication', this.company.id);\r\n        },\r\n        getProperties() {\r\n            let result = this.company.data.slice();\r\n            result = result.filter(d => d.name !== 'UF_NAME' && d.name !== 'UF_DESCRIPTION' && d.name !== 'UF_ACTIVE');\r\n            result.sort((a, b) => Number(a.sort) - Number(b.sort));\r\n\r\n            return result;\r\n        },\r\n        getValue(d) {\r\n            if (!d.value) {\r\n                return '-';\r\n            } else if (d.name === 'UF_SITE') {\r\n                let site = d.value;\r\n                if (!String(d.value).startsWith('http')) {\r\n                    site = `http://${d.value}`\r\n                }\r\n                return `<a href=\"${site}\" target=\"_blank\">${d.value}</a>`;\r\n            } else if (d.name === 'UF_EMAIL') {\r\n                return `<a href=\"mailto:${d.value}\">${d.value}</a>`;\r\n            } else if (d.name === 'UF_EGRUL_DATA') {\r\n                const s = d.value;\r\n                const date = new Date(s);\r\n                const dd = String(date.getDate()).padStart(2, \"0\");\r\n                const mm = String(date.getMonth() + 1).padStart(2, \"0\");\r\n                const yyyy = date.getFullYear();\r\n                const formatted = `${dd}.${mm}.${yyyy}`; // \"15.02.1996\"\r\n\r\n                return formatted;\r\n            }\r\n\r\n            return d.value;\r\n        },\r\n        toggleMoreProperties() {\r\n            this.s = !this.s;\r\n        },\r\n    }\r\n};","import '../css/result.css'\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data';\r\n\r\nexport const GroupApplicationComponent = {\r\n    components: {\r\n        ButtonComponent\r\n    },\r\n    props: ['groupApplicationArray'],\r\n    emits: ['createApplication'],\r\n    template: `\r\n        <div class=\"twpx-vue-marketplace-group-application\" v-if=\"groupApplicationArray.length > 0\">\r\n            <div class=\"twpx-vue-marketplace-group-application__text\">\r\n                <h4>{{ lang.result.groupApplicationHeading }}</h4>\r\n                <div>{{ lang.result.groupApplicationText }}: {{ num }} {{ pluralizeOrganization(num) }}.</div>\r\n            </div>\r\n            <ButtonComponent :text=\"lang.result.sendButton\" :props=\"['secondary', 'medium']\" @clickButton=\"createApplication\" />\r\n        </div>\r\n    `,\r\n    computed: {\r\n        ...mapState(dataStore, [\r\n            'lang',\r\n        ]),\r\n        num() {\r\n            return this.groupApplicationArray.length\r\n        }\r\n    },\r\n    methods: {\r\n        createApplication() {\r\n            this.$emit('createApplication')\r\n        },\r\n        pluralizeOrganization(n, forms = this.lang.result.groupApplicationCompany) {\r\n            const abs = Math.abs(n);\r\n            const mod10 = abs % 10;\r\n            const mod100 = abs % 100;\r\n            if (mod100 >= 11 && mod100 <= 14) return forms[2];\r\n            if (mod10 === 1) return forms[0];\r\n            if (mod10 >= 2 && mod10 <= 4) return forms[1];\r\n            return forms[2];\r\n        }\r\n    }\r\n};","import { ControlComponent } from 'local.vue-components.control-component';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\n\r\nexport const ResultApplicationForm = {\r\n    data() {\r\n        return {\r\n            id: `resultApplicationForm${Math.round(Math.random() * 1000)}`\r\n        }\r\n    },\r\n    props: ['controls', 'lang'],\r\n    emits: ['input', 'hints', 'cancel', 'send'],\r\n    components: {\r\n        ControlComponent,\r\n        ButtonComponent\r\n    },\r\n    template: `\r\n        <form :data-id=\"id\">\r\n            <div class=\"twpx-vue-marketplace__result-application-form\">\r\n                <h2 v-if=\"lang && lang?.result?.formHeading\">{{ lang.result.formHeading }}</h2>\r\n                <p v-if=\"lang && lang?.result?.formText\">{{ lang.result.formText }}</p>\r\n                <div class=\"twpx-vue-marketplace__result-application-form__wrapper\">\r\n                    <ControlComponent v-for=\"control in controls\" :key=\"control.id\" :control=\"control\" @input=\"input\" @hints=\"hints\" />\r\n                </div>\r\n                <div class=\"twpx-vue-marketplace__result-application-form__buttons\">\r\n                    <ButtonComponent :text=\"lang.result.formCancel\" :props=\"['gray-color','large']\" @clickButton=\"clickCancel\" />\r\n                    <ButtonComponent :text=\"lang.result.formSend\" :props=\"['secondary','large']\" :disabled=\"isDisabled\" @clickButton=\"clickSend\" />\r\n                </div>\r\n            </div>\r\n        </form>\r\n    `,\r\n    computed: {\r\n        isDisabled() {\r\n            if (Array.isArray(this.controls)) {\r\n              return this.controls.find(\r\n                (c) => c.property !== 'checkbox' && c.required && !c.value\r\n              );\r\n            }\r\n            return true\r\n        },\r\n    },\r\n    methods: {\r\n        input(args) {\r\n            this.$emit('input', args);\r\n        },\r\n        hints(args) {\r\n            this.$emit('hints', args);\r\n        },\r\n        clickCancel() {\r\n            this.$emit('cancel');\r\n        },\r\n        clickSend() {\r\n            this.$emit('send');\r\n        }\r\n    },\r\n};\r\n","import { ButtonComponent } from 'local.vue-components.button-component';\r\n\r\nexport const ResultApplicationSuccess = {\r\n    props: ['lang'],\r\n    emits: ['close'],\r\n    components: {\r\n        ButtonComponent\r\n    },\r\n    template: `\r\n            <div class=\"twpx-vue-marketplace__result-application-success\">\r\n                <h2 v-if=\"lang && lang?.result?.formSuccessHeading\">{{ lang.result.formSuccessHeading }}</h2>\r\n                <p v-if=\"lang && lang?.result?.formSuccessText\">{{ lang.result.formSuccessText }}</p>\r\n                <div class=\"twpx-vue-marketplace__result-application-success__button\">\r\n                    <ButtonComponent :text=\"lang.result.formSuccessButton\" :props=\"['gray-color','large']\" @clickButton=\"close\" />\r\n                </div>\r\n            </div>\r\n    `,\r\n    methods: {\r\n        close() {\r\n            this.$emit('close');\r\n        },\r\n    },\r\n};\r\n","import { MessageComponent } from 'local.vue-components.message-component';\r\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\r\nimport { MoreButton } from 'local.vue-components.more-button';\r\nimport { ModalAnyContent } from 'local.vue-components.modal-any-content';\r\n\r\nimport { ResultItemComponent } from '../components/resultItemComponent'\r\nimport { GroupApplicationComponent } from '../components/groupApplicationComponent'\r\nimport { ResultApplicationForm } from '../components/resultApplicationForm'\r\nimport { ResultApplicationSuccess } from '../components/resultApplicationSuccess'\r\n\r\nimport { dataStore } from '../stores/data';\r\nimport { resultStore } from '../stores/result';\r\nimport { applicationStore } from '../stores/application';\r\nimport { controlsStore } from '../stores/controls';\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\n\r\nexport const Result = {\r\n    components: {\r\n        MessageComponent,\r\n        LoaderCircle,\r\n        MoreButton,\r\n        ModalAnyContent,\r\n        ResultApplicationForm,\r\n        ResultApplicationSuccess,\r\n        ResultItemComponent,\r\n        GroupApplicationComponent,\r\n    },\r\n    template: `\r\n        <div class=\"twpx-vue-marketplace-result\">\r\n\r\n            <LoaderCircle :show=\"loading\" />\r\n\r\n            <MessageComponent type=\"error\" size=\"big\" :message=\"error\" v-if=\"!loading && error\" />\r\n\r\n            <ModalAnyContent :stateWatcher=\"applicationModalStateWatcher\" @onClose=\"onClose\">\r\n                <LoaderCircle v-if=\"resultApplicationLoading\" :show=\"resultApplicationLoading\" />\r\n                <MessageComponent\r\n                    v-else-if=\"resultApplicationError\"\r\n                    type=\"error\"\r\n                    size=\"big\"\r\n                    :message=\"resultApplicationError\"\r\n                />\r\n                <ResultApplicationForm\r\n                    v-else-if=\"resultApplicationState === 'form'\"\r\n                    :lang=\"lang\"\r\n                    :controls=\"resultApplicationControls\"\r\n                    @input=\"input\"\r\n                    @hints=\"hints\"\r\n                    @cancel=\"close\"\r\n                    @send=\"send\"\r\n                />\r\n                <ResultApplicationSuccess v-else :lang=\"lang\" @close=\"close\" />\r\n            </ModalAnyContent>\r\n\r\n            <MessageComponent v-if=\"!loading && !error && !formDataArray.length\" type=\"table-result\" size=\"big\" :message=\"lang.result.message || 'По выбранным фильтрам ничего не найдено. Измените параметры фильтра и попробуйте снова.'\" />\r\n\r\n            <div v-else-if=\"!loading && !error\" class=\"twpx-vue-marketplace-result__content\">\r\n\r\n                <h2>{{ lang.result.heading }}</h2>\r\n\r\n                <ResultItemComponent v-for=\"company in formDataArray\" :key=\"company.id\" :company=\"company\" @createApplication=\"createApplication\" @input=\"input\" />\r\n\r\n                <MoreButton :loading=\"loadingMore\" :show=\"showMore\" @clickMore=\"clickMore\" />\r\n\r\n                <GroupApplicationComponent :groupApplicationArray=\"groupApplicationArray\" @createApplication=\"createApplication\" />\r\n\r\n            </div>\r\n\r\n        </div>\r\n    `,\r\n    computed: {\r\n        ...mapState(dataStore, [\r\n            'lang',\r\n            'error',\r\n            'applicationID'\r\n        ]),\r\n        ...mapState(applicationStore, [\r\n            'applicationControls',\r\n        ]),\r\n        ...mapState(resultStore, [\r\n            'loading',\r\n            'formIdArray',\r\n            'formDataArray',\r\n            'groupApplicationArray',\r\n            'startIndex',\r\n            'maxCountPerRequest',\r\n            'loadingMore',\r\n            'applicationModalStateWatcher',\r\n            'resultApplicationGroup',\r\n            'resultApplicationControls',\r\n            'resultApplicationState',\r\n            'resultApplicationLoading',\r\n            'resultApplicationError',\r\n            'chosenCompanyId'\r\n        ]),\r\n        showMore() {\r\n            return this.startIndex < this.formIdArray.length\r\n        },\r\n\r\n    },\r\n    methods: {\r\n        ...mapActions(dataStore, [\r\n            'changeProp',\r\n            'runBitrixMethod',\r\n        ]),\r\n        ...mapActions(resultStore, [\r\n            'setFormDataArray',\r\n            'setStartIndex',\r\n            'setMaxCountPerRequest',\r\n            'changeResultProp'\r\n        ]),\r\n        ...mapActions(controlsStore, [\r\n            'changeControlValue',\r\n            'runHintsAction',\r\n            'setHints'\r\n        ]),\r\n        createApplication(companyId) {\r\n            this.changeResultProp('chosenCompanyId', companyId);\r\n            this.changeResultProp('applicationModalStateWatcher', !this.applicationModalStateWatcher);\r\n        },\r\n        clickMore() {\r\n            this.loadNextPage();\r\n        },\r\n        loadNextPage() {\r\n            this.changeResultProp('loadingMore', true);\r\n            try {\r\n                const requestArr = this.formIdArray\r\n                    .slice(this.startIndex, this.startIndex + this.maxCountPerRequest)\r\n                    .map((formID) => this.runBitrixMethod('formData', {code: formID}));\r\n\r\n                Promise.all(requestArr)\r\n                    .then((formDataArray) => {\r\n                        this.setFormDataArray(formDataArray.map((r, i) => {\r\n                            return {\r\n                                id: this.formIdArray[i],\r\n                                data: r.data,\r\n                                checkbox: {\r\n                                    \"property\": \"checkbox\",\r\n                                    \"type\": \"block\",\r\n                                    \"id\": Math.floor(Math.random()*1000),\r\n                                    \"name\": \"APPLICATION_GROUP\",\r\n                                    \"required\": false,\r\n                                    \"label\": this.lang.result.checkboxLable,\r\n                                    \"value\": this.formIdArray[i],\r\n                                    \"checked\": false,\r\n                                }\r\n                            }\r\n                        }));\r\n                        \r\n                        this.changeResultProp('loading', false);\r\n                        this.changeResultProp('loadingMore', false);\r\n                        this.setStartIndex(this.startIndex + this.maxCountPerRequest);\r\n                    })\r\n                    .catch((error) => {\r\n                        this.changeResultProp('loading', false);\r\n                        if (error && error?.errors.length) {\r\n                            this.changeProp('error', `formData - ${error.errors[0].message}`);\r\n                        }\r\n                    });\r\n            } catch(err) {\r\n                throw err;\r\n            }\r\n        },\r\n        input(args) {\r\n            this.changeControlValue(args)\r\n        },\r\n        hints({ type, control, action, value }) {\r\n            switch (type) {\r\n                case 'get':\r\n                    this.runHintsAction({\r\n                        control,\r\n                        action,\r\n                    });\r\n                    break;\r\n                case 'set':\r\n                    this.setHints({\r\n                        control,\r\n                        value,\r\n                    });\r\n                    break;\r\n            }\r\n        },\r\n        async send() {\r\n            this.changeResultProp('resultApplicationLoading', true);\r\n\r\n            try {\r\n                const controls = JSON.parse(JSON.stringify(this.resultApplicationControls));\r\n                controls.forEach(c => {\r\n                    if (c.property === 'date' && c.type === 'range') {\r\n                        c.value = `${c.value[0]}-${c.value[1]}`\r\n                    }\r\n                });\r\n\r\n                await this.runBitrixMethod('applicationSave', {\r\n                    fields: controls,\r\n                    applicationID: this.applicationID\r\n                });\r\n                await this.runBitrixMethod('sendMessages', {\r\n                    applicationID: this.applicationID,\r\n                    questionnaires: this.chosenCompanyId ? [this.chosenCompanyId] : this.groupApplicationArray\r\n                });\r\n                this.changeResultProp('resultApplicationLoading', false);\r\n                this.changeResultProp('resultApplicationState', 'success');\r\n            } catch(error) {\r\n                this.changeResultProp('resultApplicationLoading', false);\r\n                this.changeResultProp('resultApplicationError', error?.errors ? error.errors[0].message : error)\r\n            }\r\n        },\r\n        close() {\r\n            this.changeResultProp('applicationModalStateWatcher', !this.applicationModalStateWatcher);\r\n        },\r\n        onClose() {\r\n            this.changeResultProp('resultApplicationState', 'form');\r\n            this.changeResultProp('resultApplicationError', '');\r\n        }\r\n    },\r\n    mounted() {\r\n        this.changeProp('loading', false);\r\n        this.changeResultProp('loading', true);\r\n        this.loadNextPage();\r\n    }\r\n}","import { BitrixVue } from 'ui.vue3';\r\nimport { createRouter, createMemoryHistory } from 'ui.vue3.router';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\n\r\nimport { dataStore } from './stores/data';\r\nimport { resultStore } from './stores/result';\r\n\r\nimport { Application } from './components/application';\r\nimport { Step } from './pages/step';\r\nimport { Result } from './pages/result';\r\n\r\nexport class Marketplace {\r\n  #store;\r\n  #router;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options) {\r\n    this.#store = createPinia();\r\n    this.#router = createRouter({\r\n      history: createMemoryHistory(),\r\n      routes: [\r\n        {\r\n          path: '/',\r\n          component: Step,\r\n          alias: '/step'\r\n        },\r\n        {\r\n          path: '/step/:id',\r\n          component: Step,\r\n        },\r\n        {\r\n          path: '/result',\r\n          component: Result,\r\n        },\r\n      ],\r\n    });\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run() {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'Marketplace Application',\r\n      components: {\r\n        Application\r\n      },\r\n      template: '<Application />',\r\n      beforeMount() {\r\n        dataStore().customData = self.options.data || {};\r\n        dataStore().signedParameters = self.options.signedParameters || '';\r\n\r\n        dataStore().lang = self.options.lang || {};\r\n        dataStore().actions = self.options.actions || [];\r\n\r\n        resultStore().maxCountPerRequest = self.options.maxCountPerRequest || 3;\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.use(this.#router);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication() {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getTableStore() {\r\n    return tableStore;\r\n  }\r\n}\r\n"],"names":["dataStore","defineStore","state","customData","signedParameters","lang","actions","error","loading","resultApplicationGroupId","applicationID","changeProp","prop","value","createUrl","controls","url","URL","window","location","href","forEach","c","property","id","searchParams","set","name","String","history","pushState","runBitrixMethod","method","data","formData","Array","isArray","Promise","reject","errors","message","payload","FormData","Object","entries","key","undefined","append","BX","ajax","runComponentAction","mode","resultStore","formIdArray","formDataArray","startIndex","maxCountPerRequest","loadingMore","applicationModalStateWatcher","resultApplicationGroup","resultApplicationControls","resultApplicationState","resultApplicationError","chosenCompanyId","getters","groupApplicationArray","filter","d","checkbox","checked","map","changeResultApplicationGroup","groups","g","changeResultApplicationControls","groupid","required","label","setFormIdArray","setFormDataArray","concat","setStartIndex","setMaxCountPerRequest","changeResultProp","applicationStore","applicationControls","applicationGroups","changeApplicationGroups","changeApplicationControls","controlsStore","changeControls","changeTextControlValue","control","changeSelectRadioValue","changeSelectDropdownValue","changeDateValue","changeCheckboxValue","changeFileValue","type","uploadFile","changeControlValue","substring","toUpperCase","toLowerCase","runHintsAction","action","origin","controller","AbortController","timeoutId","setTimeout","abort","fetch","signal","headers","response","clearTimeout","ok","Error","status","json","result","setHints","hints","Application","template","computed","mapState","methods","mapActions","isUFParam","urlSearchParams","URLSearchParams","search","keys","startsWith","setValuesToApplicationControls","get","mounted","groupsResponse","templateResponse","ufParam","slice","fields","saveResponse","searchResponse","$router","push","TheNavigation","props","emits","currentIndex","index","findIndex","s","$route","params","lineWidth","length","click","group","$emit","isGroupActive","groupIndex","StepComponent","components","ControlComponent","input","args","TheButtons","ButtonComponent","isDisabled","step","find","goBack","matchMedia","document","querySelector","scrollTo","left","behavior","goForward","Step","MessageComponent","LoaderCircle","groupId","title","subtitle","clickNavItem","showError","send","JSON","parse","stringify","then","r","err","ResultItemComponent","moreText","hideProps","moreProps","dataObject","company","companyName","companyDescription","createApplication","getProperties","sort","a","b","Number","getValue","site","date","Date","dd","getDate","padStart","mm","getMonth","yyyy","getFullYear","formatted","toggleMoreProperties","GroupApplicationComponent","num","pluralizeOrganization","n","forms","groupApplicationCompany","abs","Math","mod10","mod100","ResultApplicationForm","round","random","clickCancel","clickSend","ResultApplicationSuccess","close","Result","MoreButton","ModalAnyContent","showMore","companyId","clickMore","loadNextPage","requestArr","formID","code","all","i","floor","checkboxLable","questionnaires","onClose","Marketplace","rootNode","options","createPinia","createRouter","createMemoryHistory","routes","path","component","alias","self","BitrixVue","createApp","beforeMount","use","mount","setActivePinia","tableStore"],"mappings":"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"}