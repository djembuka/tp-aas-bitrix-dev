{"version":3,"file":"application.bundle.js","sources":["../src/stores/data.js","../src/stores/A1.js","../src/components/A1.js","../src/components/application.js","../src/loader.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    sessionid: '',\r\n    signedParameters: '',\r\n    lang: {},\r\n  }),\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\nimport { dataStore } from './data';\r\n\r\nexport const a1Store = defineStore('A1', {\r\n  state: () => ({\r\n    tel: {\r\n      property: 'tel',\r\n      id: 'id0',\r\n      name: 'PHONE',\r\n      label: (() => {\r\n        return dataStore().lang;\r\n      })(),\r\n      value: '',\r\n      required: true,\r\n      disabled: false,\r\n    },\r\n    checkbox: {\r\n      property: 'checkbox',\r\n      id: 'id1',\r\n      name: 'NUM',\r\n      label: dataStore().lang,\r\n      value: '',\r\n      required: false,\r\n      disabled: false,\r\n    },\r\n  }),\r\n  getters: {\r\n    buttonDisabled() {\r\n      return !this.tel.value.trim() || !this.checkbox.value;\r\n    },\r\n  },\r\n  actions: {\r\n    changeControlValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    runFormSubmit() {\r\n      if (window.BX) {\r\n        BX.ajax\r\n          .runAction('twinpx:authorization.api.send', {\r\n            data: {\r\n              phone: this.tel.value,\r\n            },\r\n          })\r\n          .then(\r\n            (response) => {\r\n              //show code\r\n            },\r\n            (response) => {\r\n              console.log(response.errors[0].message);\r\n            }\r\n          );\r\n      }\r\n    },\r\n  },\r\n});\r\n","import { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data.js';\r\nimport { a1Store } from '../stores/A1.js';\r\n\r\nimport './A1.css';\r\n\r\nimport { MessageComponent } from 'local.vue-components.message-component';\r\nimport { ControlTel } from 'local.vue-components.control-tel';\r\nimport { ControlCheckbox } from 'local.vue-components.control-checkbox';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\n\r\nexport const A1 = {\r\n  data() {\r\n    return {\r\n      submitProps: ['large', 'secondary', 'wide'],\r\n    };\r\n  },\r\n  components: {\r\n    MessageComponent,\r\n    ControlTel,\r\n    ControlCheckbox,\r\n    ButtonComponent,\r\n  },\r\n  // language=Vue\r\n\r\n  template: `\r\n    <div class=\"vue-auth-sms-a1\">\r\n      <h3 class=\"mt-0\">{{ lang.AUTH_SMS_TITLE }}</h3>\r\n      <MessageComponent type=\"info\" :message=\"lang.AUTH_SMS_A1_MESSAGE_INFO\" :button=\"lang.AUTH_SMS_A1_BUTTON_INFO\" @clickButton=\"console.log('click button')\" />\r\n      \r\n      <MessageComponent type=\"error\" :message=\"lang.AUTH_SMS_A1_MESSAGE_INFO\" />\r\n\r\n      <div class=\"vue-auth-sms-a1-form\">\r\n        <div class=\"vue-auth-sms-a1-form-body\">\r\n          <ControlTel :control=\"tel\" @input=\"inputTel\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" />\r\n          <hr />\r\n          <ControlCheckbox :control=\"checkbox\" @input=\"inputCheckbox\" @focus=\"focus\" @blur=\"blur\" />\r\n          <hr />\r\n          <ButtonComponent :text=\"lang.AUTH_SMS_A1_BUTTON_SUBMIT\" :props=\"submitProps\" :disabled=\"buttonDisabled\" @clickButton=\"clickSubmit\" />\r\n        </div>\r\n      </div>\r\n\r\n      <hr class=\"hr--line hr--none\" />\r\n\r\n      <div class=\"vue-auth-sms-a1-ornz-enter\">\r\n\r\n        <div>\r\n          <ButtonComponent :text=\"lang.AUTH_SMS_A1_BUTTON_ORNZ\" :props=\"['medium', 'primary']\" @clickButton=\"clickORNZ\" />\r\n        </div>\r\n\r\n        <div>\r\n          <a href=\"\">{{ lang.AUTH_SMS_A1_ENTER }}</a>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\t`,\r\n  computed: {\r\n    ...mapState(dataStore, ['lang']),\r\n    ...mapState(a1Store, ['tel', 'checkbox', 'buttonDisabled']),\r\n  },\r\n  methods: {\r\n    ...mapActions(a1Store, ['changeControlValue', 'runFormSubmit']),\r\n    inputTel({ value }) {\r\n      this.changeControlValue({ value, control: this.tel });\r\n    },\r\n    inputCheckbox({ value }) {\r\n      this.changeControlValue({ value, control: this.checkbox });\r\n    },\r\n    clickSubmit() {\r\n      this.submitProps.push('load-circle');\r\n      this.runFormSubmit();\r\n    },\r\n    clickORNZ() {\r\n      console.log('click ornz');\r\n    },\r\n  },\r\n  mounted() {},\r\n};\r\n","import './application.css';\r\nimport { A1 } from './A1.js';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data';\r\n\r\nexport const Application = {\r\n  data() {},\r\n  components: {\r\n    A1,\r\n  },\r\n  // language=Vue\r\n\r\n  template: `\r\n    <div class=\"vue-auth-sms\">\r\n      <div class=\"vue-auth-sms-left\">\r\n        <A1 />\r\n      </div>\r\n      <div class=\"vue-auth-sms-right\">\r\n        <img src=\"/markup/pages/auth-sms/auth-sms-ill.png\" alt=\"\">\r\n      </div>\r\n      \r\n    </div>\r\n\t`,\r\n  computed: {\r\n    ...mapState(dataStore, ['sessionid', 'signedParameters']),\r\n  },\r\n  methods: {\r\n    // ...mapActions(tableStore, [\r\n    //   'hideErrorTable',\r\n    //   'runColumnsNames',\r\n    //   'runItems',\r\n    //   'runDefaultSort',\r\n    //   'runSetDefaultSort',\r\n    // ]),\r\n  },\r\n  mounted() {},\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { dataStore } from './stores/data';\r\n\r\nexport class AuthSMS {\r\n  #store;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options): void {\r\n    this.#store = createPinia();\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run(): void {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'Table Application',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application/>',\r\n      mounted() {\r\n        dataStore().sessid = self.options.sessid || '';\r\n        dataStore().signedParameters = self.options.signedParameters || '';\r\n        dataStore().lang = BitrixVue.getFilteredPhrases(this, 'AUTH_SMS');\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication(): void {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getTableStore(): Object {\r\n    return tableStore;\r\n  }\r\n}\r\n"],"names":["dataStore","defineStore","state","sessionid","signedParameters","lang","a1Store","tel","property","id","name","label","value","required","disabled","checkbox","getters","buttonDisabled","trim","actions","changeControlValue","control","runFormSubmit","window","BX","ajax","runAction","data","phone","then","response","console","log","errors","message","A1","submitProps","components","MessageComponent","ControlTel","ControlCheckbox","ButtonComponent","template","computed","mapState","methods","mapActions","inputTel","inputCheckbox","clickSubmit","push","clickORNZ","mounted","Application","AuthSMS","rootNode","options","createPinia","document","querySelector","self","BitrixVue","createApp","sessid","getFilteredPhrases","use","mount","setActivePinia","tableStore"],"mappings":"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"}