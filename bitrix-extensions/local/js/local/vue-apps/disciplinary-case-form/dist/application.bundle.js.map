{"version":3,"file":"application.bundle.js","sources":["../src/stores/data.js","../src/stores/form.js","../src/components/form.js","../src/components/application.js","../src/loader.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    sessid: '',\r\n    signedParameters: '',\r\n    lang: {},\r\n    actions: [],\r\n    modalStateWatcher: false,\r\n    modal: false,\r\n    cancelUrl: '',\r\n    constructor: {},\r\n    args: null\r\n  }),\r\n  actions: {\r\n    changeModalStateWatcher() {\r\n      this.modalStateWatcher = !this.modalStateWatcher;\r\n    }\r\n  }\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\nimport { dataStore } from './data';\r\n\r\nexport const formStore = defineStore('form', {\r\n  state: () => ({\r\n    loading: false,\r\n    error: '',\r\n    blocks: [],\r\n    stateWatcher: false,\r\n    formId: `id${Math.floor(Math.random() * 100000)}`\r\n  }),\r\n  actions: {\r\n    changeError(message) {\r\n      this.error = message;\r\n    },\r\n    changeHintControlValue({ control, value }) {\r\n      control.value = value;\r\n\r\n      if (typeof value === 'object' && value.autocomplete && typeof value.autocomplete === 'object') {\r\n        this.blocks.forEach(b => {\r\n          value.autocomplete.forEach(e => {\r\n            const control = b.controls.find(c => String(c.id) === String(e.id));\r\n            if (control) {\r\n              this.changeControlValue({ control, value: e.value });\r\n            }\r\n          });\r\n        });\r\n      }\r\n    },\r\n    changeTextControlValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeSelectDropdownValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeDateValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeFileValue({ control, value }) {\r\n      control.value = value;\r\n      if (control.type === 'upload') {\r\n        this.uploadFile(control, value);\r\n      }\r\n    },\r\n    changeControlValue({ control, value, checked }) {\r\n      switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n        case 'tel':\r\n        case 'email':\r\n          this.changeTextControlValue({ control, value });\r\n          break;\r\n        case 'hint':\r\n          this.changeHintControlValue({ control, value });\r\n          break;\r\n        // case 'multiselect':\r\n        //   commit('changeMultiselectValue', { control, value, checked });\r\n        //   break;\r\n        // case 'checkbox':\r\n        //   commit('changeCheckboxValue', { control, checked });\r\n        //   break;\r\n        case 'select':\r\n          this[\r\n            `changeSelect${control.type\r\n              .substring(0, 1)\r\n              .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n          ]({ control, value });\r\n          break;\r\n        case 'file':\r\n          this.changeFileValue({ control, value });\r\n          break;\r\n        case 'date':\r\n          this.changeDateValue({ control, value });\r\n          break;\r\n        // case 'color':\r\n        //   commit('changeColorValue', { control, value });\r\n        //   break;\r\n      }\r\n    },\r\n    changeBlocks(blocks) {\r\n      this.blocks = blocks;\r\n    },\r\n    async runHints(control, action) {\r\n      try {\r\n        // Создаем AbortController для возможности отмены запроса\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 20000); // 20 секунд таймаут\r\n\r\n        const url = new URL(action, window.location.origin);\r\n        url.searchParams.set('s', control.value);\r\n\r\n        const response = await fetch(url, {\r\n          signal: controller.signal,\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        clearTimeout(timeoutId);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const result = await response.json();\r\n\r\n        if (result.status === 'success' && result.data) {\r\n          this.setHints(control, result.data);\r\n        } else if (result.errors) {\r\n          this.error = result.errors[0]?.message\r\n        } else {\r\n          this.error = 'Invalid response format';\r\n        }\r\n      } catch (error) {\r\n        this.error = error?.message\r\n      }\r\n    },\r\n    setHints(control, value) {\r\n      control.hints = value;\r\n    },\r\n    changeStateWatcher() {\r\n      this.stateWatcher = !this.stateWatcher;\r\n    },\r\n    sendForm() {\r\n      this.runSaveForm();\r\n      dataStore().changeModalStateWatcher();\r\n    },\r\n    runGetForm() {\r\n      console.log(dataStore().actions)\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      const data = {};\r\n      \r\n      if (dataStore().args) {\r\n        Object.keys(dataStore().args).forEach(key => {\r\n          data[key] =  dataStore().args[key];\r\n        });\r\n      } else {\r\n        data.sessid = dataStore().sessid;\r\n        data.signedParameters = dataStore().signedParameters;\r\n      }\r\n\r\n      BX.ajax.runComponentAction(d.actions.getForm[0], d.actions.getForm[1], {\r\n        mode: 'class',\r\n        data,\r\n      })\r\n      .then((res) => {\r\n        this.loading = false;\r\n        this.changeError('');\r\n\r\n        if (res.data){\r\n          this.changeBlocks(res.data);\r\n        }\r\n      }, (response) => {\r\n        this.loading = false;\r\n        if (response && response.errors.length) {\r\n          this.changeError(response.errors[0].message);\r\n        }\r\n      });\r\n    },\r\n    runSaveForm() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      const formElem = document.querySelector(`#${this.formId} form`);\r\n      const formData = new FormData(formElem);\r\n\r\n      if (dataStore().args) {\r\n        Object.keys(dataStore().args).forEach(key => {\r\n          formData.append(key, dataStore().args[key]);\r\n        });\r\n      } else {\r\n        formData.append('sessid', dataStore().sessid);\r\n        formData.append('signedParameters', dataStore().signedParameters);\r\n      }\r\n\r\n      BX.ajax.runComponentAction(d.actions.saveForm[0], d.actions.saveForm[1], {\r\n        mode: 'class',\r\n        data: formData,\r\n      })\r\n      .then((res) => {\r\n        this.loading = false;\r\n        this.changeError('');\r\n        console.log(dataStore()?.constructor?.send[0])\r\n        if (dataStore()?.constructor?.send[0]) {\r\n          // load table\r\n          window[dataStore()?.constructor?.send[0]][dataStore()?.constructor?.send[1]]();\r\n        } else if (res?.data?.redirect) {\r\n          // redirect\r\n          window.location.href = res.data.redirect;\r\n        }\r\n      }, (response) => {\r\n        this.loading = false;\r\n        if (response && response.errors.length) {\r\n          this.changeError(response.errors[0].message);\r\n        }\r\n      });\r\n    }\r\n  },\r\n});\r\n","import './form.css';\r\n\r\nimport { ControlChoice } from 'local.vue-components.control-choice';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\r\nimport { MessageComponent } from 'local.vue-components.message-component';\r\nimport { ModalYesNo } from 'local.vue-components.modal-yes-no';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data';\r\nimport { formStore } from '../stores/form';\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: {\r\n    ControlChoice,\r\n    ButtonComponent,\r\n    LoaderCircle,\r\n    MessageComponent,\r\n    ModalYesNo\r\n  },\r\n  // language=Vue\r\n  template: `\r\n  <div class=\"disciplinary-case-form\" :id=\"formId\">\r\n\r\n    <LoaderCircle :show=\"loading\" />\r\n\r\n    <MessageComponent v-if=\"error\" type=\"error\" size=\"big\" :message=\"error\" />\r\n\r\n    <ModalYesNo\r\n      v-if=\"lang.modal\"\r\n      :heading=\"lang.modal.heading\"\r\n      :text=\"lang.modal.text\"\r\n      :yes=\"lang.modal.yes\"\r\n      :no=\"lang.modal.no\"\r\n      :stateWatcher=\"stateWatcher\"\r\n      @clickYes=\"clickYes\"\r\n      @clickNo=\"clickNo\"\r\n    />\r\n\r\n    <div v-if=\"!loading\">\r\n      <form action=\"\" v-if=\"blocks.length\">\r\n        <div class=\"disciplinary-case-form__wrapper\">\r\n\r\n            <h2>{{ lang.heading }}</h2>\r\n\r\n            <div class=\"disciplinary-case-form__block\" v-for=\"block in blocks\">\r\n              <h3>{{ block.heading }}</h3>\r\n              <ControlChoice  v-for=\"control in block.controls\" :key=\"control.id\" :control=\"control\" @input=\"input\" @hints=\"hints\"></ControlChoice>\r\n            </div>\r\n\r\n            <div class=\"disciplinary-case-form__buttons\">\r\n              <ButtonComponent :text=\"lang.cancelButton\" :props=\"cancelButtonProps\" @clickButton=\"clickCancelButton\" />\r\n              <ButtonComponent :text=\"lang.createButton\" :props=\"['secondary', 'large']\" @clickButton=\"clickCreateButton\" />\r\n            </div>\r\n\r\n        </div>\r\n      </form>\r\n      <div v-else v-html=\"lang.nodata\"></div>\r\n    </div>\r\n  </div>\r\n    `,\r\n  computed: {\r\n    ...mapState(dataStore, ['lang', 'id', 'cancelUrl', 'modal']),\r\n    ...mapState(formStore, ['loading', 'error', 'blocks', 'stateWatcher', 'formId']),\r\n    cancelButtonProps() {\r\n      const arr = ['gray-color', 'large'];\r\n      if (!this.cancelUrl && !this.modal) {\r\n        arr.push('disabled')\r\n      }\r\n      return arr;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(dataStore, ['changeModalStateWatcher']),\r\n    ...mapActions(formStore, [\r\n      'runGetForm',\r\n      'changeControlValue',\r\n      'changeStateWatcher',\r\n      'runHints',\r\n      'setHints',\r\n      'sendForm'\r\n    ]),\r\n    input(args) {\r\n      this.changeControlValue(args);\r\n    },\r\n    hints({ control, type, action, value }) {\r\n      if (type === 'get') {\r\n        this.runHints(control, action);\r\n      } else if (type === 'set') {\r\n        this.setHints(control, value);\r\n      }\r\n    },\r\n    clickCancelButton() {\r\n      if (this.modal) {\r\n        this.changeModalStateWatcher();\r\n      } else {\r\n        window.location.href = this.cancelUrl;\r\n      }\r\n    },\r\n    clickCreateButton() {\r\n      this.changeStateWatcher();\r\n    },\r\n    clickYes() {\r\n      this.sendForm()\r\n      this.changeStateWatcher();\r\n    },\r\n    clickNo() {\r\n      this.changeStateWatcher();\r\n    }\r\n  },\r\n};\r\n","import './application.css';\r\n\r\nimport { ModalAnyContent } from 'local.vue-components.modal-any-content';\r\nimport Form from './form.js';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data';\r\n\r\nexport const Application = {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: {\r\n    ModalAnyContent,\r\n    Form\r\n  },\r\n  // language=Vue\r\n  template: `\r\n    <ModalAnyContent :stateWatcher=\"modalStateWatcher\" v-if=\"modal\">\r\n      <Form />\r\n    </ModalAnyContent>\r\n\r\n    <Form v-else />\r\n\t`,\r\n  computed: {\r\n    ...mapState(dataStore, ['lang', 'modalStateWatcher', 'modal']),\r\n  },\r\n  methods: {},\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { dataStore } from './stores/data';\r\nimport { formStore } from './stores/form';\r\n\r\nexport class DisciplinaryCaseForm {\r\n  #store;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options): void {\r\n    this.#store = createPinia();\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run(args): void {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'DisciplinaryCaseForm',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application/>',\r\n      beforeMount() {\r\n        dataStore().sessid = self.options.sessid || '';\r\n        dataStore().signedParameters = self.options.signedParameters || '';\r\n        dataStore().lang = self.options.lang || {};\r\n        dataStore().actions = self.options.actions || [];\r\n        dataStore().modal = self.options.modal || false;\r\n        dataStore().cancelUrl = self.options.cancelUrl || '';\r\n        dataStore().constructor = self.options.constructor || {};\r\n      },\r\n      mounted() {\r\n        if (args) {\r\n          dataStore().args = args;\r\n        }\r\n\r\n        if (dataStore().modal) {\r\n          dataStore().changeModalStateWatcher();\r\n        }\r\n\r\n        formStore().runGetForm();\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication(): void {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getFormStore(): Object {\r\n    return formStore;\r\n  }\r\n}\r\n"],"names":["dataStore","defineStore","state","sessid","signedParameters","lang","actions","modalStateWatcher","modal","cancelUrl","constructor","args","changeModalStateWatcher","formStore","loading","error","blocks","stateWatcher","formId","Math","floor","random","changeError","message","changeHintControlValue","control","value","autocomplete","forEach","b","e","controls","find","c","String","id","changeControlValue","changeTextControlValue","changeSelectRadioValue","changeSelectDropdownValue","changeDateValue","changeFileValue","type","uploadFile","checked","property","substring","toUpperCase","toLowerCase","changeBlocks","runHints","action","controller","AbortController","timeoutId","setTimeout","abort","url","URL","window","location","origin","searchParams","set","fetch","signal","headers","response","clearTimeout","ok","Error","status","json","result","data","setHints","errors","hints","changeStateWatcher","sendForm","runSaveForm","runGetForm","console","log","d","Object","keys","key","BX","ajax","runComponentAction","getForm","mode","then","res","length","formElem","document","querySelector","formData","FormData","append","saveForm","send","redirect","href","components","ControlChoice","ButtonComponent","LoaderCircle","MessageComponent","ModalYesNo","template","computed","mapState","cancelButtonProps","arr","push","methods","mapActions","input","clickCancelButton","clickCreateButton","clickYes","clickNo","Application","ModalAnyContent","Form","DisciplinaryCaseForm","rootNode","options","createPinia","self","BitrixVue","createApp","name","beforeMount","mounted","use","mount","setActivePinia"],"mappings":"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"}