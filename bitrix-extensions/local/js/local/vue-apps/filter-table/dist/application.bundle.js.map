{"version":3,"file":"application.bundle.js","sources":["../src/stores/data.js","../src/stores/table.js","../src/stores/filter.js","../src/components/application.js","../src/loader.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    sessionid: '',\r\n    userid: '',\r\n  }),\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const tableStore = defineStore('table', {\r\n  state: () => {\r\n    return {\r\n      loadingCols: false,\r\n      loadingItems: false,\r\n      columnsNames: [],\r\n      items: {},\r\n      sort: {},\r\n      actions: {},\r\n    };\r\n  },\r\n  getters: {\r\n    loadingTable() {\r\n      return this.loadingCols || this.loadingItems;\r\n    },\r\n  },\r\n  actions: {\r\n    runColumnsNames(data, callback) {\r\n      this.loadingCols = true;\r\n      let a = window.BX.ajax.runComponentAction(\r\n        this.actions.columnsNames,\r\n        data\r\n      );\r\n      let state = this;\r\n\r\n      a.then(\r\n        (result) => {\r\n          this.loadingCols = false;\r\n          resultFn(state, result);\r\n        },\r\n        (error) => {\r\n          this.loadingCols = false;\r\n          if (\r\n            window.twinpx &&\r\n            window.twinpx.vue.markup &&\r\n            window.twinpx.vue['filter-table']\r\n          ) {\r\n            resultFn(state, window.twinpx.vue['filter-table'].columnsNames);\r\n          } else {\r\n            //showError(error)\r\n          }\r\n        }\r\n      );\r\n\r\n      function resultFn(state, data) {\r\n        state.columnsNames = data;\r\n        if (callback) {\r\n          callback();\r\n        }\r\n      }\r\n    },\r\n    runItems(data, callback) {\r\n      this.loadingItems = true;\r\n      let a = window.BX.ajax.runComponentAction(this.actions.items, data);\r\n      let state = this;\r\n\r\n      a.then(\r\n        (result) => {\r\n          this.loadingItems = false;\r\n          resultFn(state, result);\r\n        },\r\n        (error) => {\r\n          this.loadingItems = false;\r\n          if (\r\n            window.twinpx &&\r\n            window.twinpx.vue.markup &&\r\n            window.twinpx.vue['filter-table']\r\n          ) {\r\n            resultFn(\r\n              state,\r\n              window.twinpx.vue['filter-table'].items(data.startIndex)\r\n            );\r\n          } else {\r\n            //showError(error)\r\n          }\r\n        }\r\n      );\r\n\r\n      function resultFn(state, data) {\r\n        state.items = data;\r\n\r\n        if (callback) {\r\n          callback();\r\n        }\r\n      }\r\n    },\r\n    runDefaultSort(data, callback) {\r\n      let a = window.BX.ajax.runComponentAction(this.actions.defaultSort, data);\r\n      let state = this;\r\n\r\n      a.then(\r\n        (result) => {\r\n          resultFn(state, result);\r\n        },\r\n        (error) => {\r\n          if (\r\n            window.twinpx &&\r\n            window.twinpx.vue.markup &&\r\n            window.twinpx.vue['filter-table']\r\n          ) {\r\n            resultFn(state, window.twinpx.vue['filter-table'].defaultSort);\r\n          } else {\r\n            //showError(error)\r\n          }\r\n        }\r\n      );\r\n\r\n      function resultFn(state, data) {\r\n        state.sort = data;\r\n        if (callback) {\r\n          callback();\r\n        }\r\n      }\r\n    },\r\n    runSetDefaultSort(data, callback) {\r\n      let a = window.BX.ajax.runComponentAction(\r\n        this.actions.setDefaultSort,\r\n        data\r\n      );\r\n      let state = this;\r\n\r\n      a.then(\r\n        (result) => {\r\n          resultFn(state, result);\r\n        },\r\n        (error) => {\r\n          if (\r\n            window.twinpx &&\r\n            window.twinpx.vue.markup &&\r\n            window.twinpx.vue['filter-table']\r\n          ) {\r\n            resultFn(state, window.twinpx.vue['filter-table'].setDefaultSort);\r\n          } else {\r\n            //showError(error)\r\n          }\r\n        }\r\n      );\r\n\r\n      function resultFn(state, data) {\r\n        state.sort = data;\r\n        if (callback) {\r\n          callback();\r\n        }\r\n      }\r\n    },\r\n  },\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const filterStore = defineStore('filter', {\r\n  state: () => ({\r\n    loadingFilter: false,\r\n    actions: {},\r\n    filters: [],\r\n  }),\r\n  actions: {\r\n    changeTextControlValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeSelectDropdownValue({ control, value }) {\r\n      control.value = value;\r\n    },\r\n    changeControlValue({ control, value, checked }) {\r\n      switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n          this.changeTextControlValue({ control, value });\r\n          break;\r\n        // case 'multiselect':\r\n        //   commit('changeMultiselectValue', { control, value, checked });\r\n        //   break;\r\n        // case 'checkbox':\r\n        //   commit('changeCheckboxValue', { control, checked });\r\n        //   break;\r\n        case 'select':\r\n          this[\r\n            `changeSelect${control.type\r\n              .substring(0, 1)\r\n              .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n          ]({ control, value });\r\n          break;\r\n        // case 'file':\r\n        //   commit('changeFileValue', { control, value });\r\n        //   break;\r\n        // case 'date':\r\n        //   commit('changeDateValue', { control, value });\r\n        //   break;\r\n        // case 'color':\r\n        //   commit('changeColorValue', { control, value });\r\n        //   break;\r\n      }\r\n    },\r\n    runFilters(data, callback) {\r\n      this.loadingFilter = true;\r\n      let a = window.BX.ajax.runComponentAction(this.actions.filters, data);\r\n      let state = this;\r\n\r\n      a.then(\r\n        (result) => {\r\n          this.loadingFilter = false;\r\n          resultFn(state, result);\r\n        },\r\n        (error) => {\r\n          this.loadingFilter = false;\r\n          if (\r\n            window.twinpx &&\r\n            window.twinpx.vue.markup &&\r\n            window.twinpx.vue['filter-table']\r\n          ) {\r\n            resultFn(state, window.twinpx.vue['filter-table'].filters);\r\n          } else {\r\n            //showError(error)\r\n          }\r\n        }\r\n      );\r\n\r\n      function resultFn(state, data) {\r\n        state.filters = data;\r\n        if (callback) {\r\n          callback();\r\n        }\r\n      }\r\n    },\r\n  },\r\n});\r\n","import './application.css';\n\nimport { FilterComponent } from 'local.vue-components.filter';\nimport { TableComponent } from 'local.vue-components.table';\nimport { TablePagination } from 'local.vue-components.pagination';\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\nimport { ErrorMessage } from 'local.vue-components.error-message';\n\nimport { mapState, mapActions } from 'ui.vue3.pinia';\nimport { dataStore } from '../stores/data';\nimport { tableStore } from '../stores/table';\nimport { filterStore } from '../stores/filter';\n\nexport const Application = {\n  data() {\n    return {\n      error: 'error',\n    };\n  },\n  components: {\n    FilterComponent,\n    TableComponent,\n    TablePagination,\n    LoaderCircle,\n    ErrorMessage,\n  },\n  // language=Vue\n  template: `\n    <div>\n      <ErrorMessage v-if=\"error\" :error=\"error\" @hideError=\"hideError\" />\n      <LoaderCircle v-if=\"loadingFilter\" />\n      <div v-else>\n        <FilterComponent :filters=\"filters\" @input=\"input\" />\n      </div>\n      <hr>\n      <LoaderCircle v-if=\"loadingTable\"/>\n      <div v-else>\n        <TableComponent :cols=\"cols\" :columnsNames=\"columnsNames\" :items=\"items\" :sort=\"sort\" :maxCountPerRequest=\"maxCountPerRequest\" @clickTh=\"clickTh\" @clickPage=\"clickPage\" />\n        <hr>\n        <div class=\"vue-ft-table-bottom\">\n          <div class=\"vue-ft-table-all\" v-if=\"items.resultCount\">Всего: {{ items.resultCount }}</div>\n          <TablePagination :pagesNum=\"pagesNum\" :pageActive=\"pageActive\" @clickPage=\"clickPage\" />\n        </div>\n      </div>\n    </div>\n\t`,\n  computed: {\n    ...mapState(dataStore, ['sessionid', 'userid']),\n    ...mapState(tableStore, [\n      'loadingTable',\n      'columnsNames',\n      'items',\n      'sort',\n      'cols',\n      'maxCountPerRequest',\n    ]),\n    ...mapState(filterStore, ['filters', 'loadingFilter']),\n    pagesNum() {\n      return Math.ceil(this.items.resultCount / this.maxCountPerRequest);\n    },\n    pageActive() {\n      return this.items.startIndex / this.maxCountPerRequest + 1;\n    },\n  },\n  methods: {\n    ...mapActions(tableStore, [\n      'runColumnsNames',\n      'runItems',\n      'runDefaultSort',\n      'runSetDefaultSort',\n    ]),\n    ...mapActions(filterStore, ['runFilters', 'changeControlValue']),\n    hideError() {\n      this.error = '';\n    },\n    clickTh({ column }) {\n      const sortType =\n        this.sort.columnSort === column.id && this.sort.sortType === 0 ? 1 : 0;\n\n      this.runSetDefaultSort(\n        {\n          userid: this.userid,\n          sessionid: this.sessionid,\n          columnSort: column.id,\n          sortType,\n        },\n        () => {\n          this.runItems({\n            userid: this.userid,\n            sessionid: this.sessionid,\n            startIndex: this.items.startIndex || 0,\n            maxCountPerRequest: this.maxCountPerRequest,\n            filters: [],\n            columnSort: 1,\n            sortType: 'asc',\n          });\n          this.runDefaultSort({\n            userid: this.userid,\n            sessionid: this.sessionid,\n          });\n        }\n      );\n    },\n    input({ control, value, checked }) {\n      this.changeControlValue({\n        control,\n        value,\n        checked,\n      });\n\n      this.runItems({\n        userid: this.userid,\n        sessionid: this.sessionid,\n        startIndex: this.items.startIndex || 0,\n        maxCountPerRequest: this.maxCountPerRequest,\n        filters: this.filters,\n        columnSort: this.sort.columnSort,\n        sortType: this.sort.sortType,\n      });\n    },\n    clickPage({ count }) {\n      this.runItems({\n        userid: this.userid,\n        sessionid: this.sessionid,\n        startIndex: (count - 1) * this.maxCountPerRequest,\n        maxCountPerRequest: this.maxCountPerRequest,\n        filters: this.filters,\n        columnSort: this.sort.columnSort,\n        sortType: this.sort.sortType,\n      });\n    },\n  },\n  mounted() {\n    this.runColumnsNames({\n      userid: this.userid,\n      sessionid: this.sessionid,\n    });\n\n    this.runDefaultSort(\n      {\n        userid: this.userid,\n        sessionid: this.sessionid,\n      },\n      () => {\n        this.runItems({\n          userid: this.userid,\n          sessionid: this.sessionid,\n          startIndex: this.items.startIndex || 0,\n          maxCountPerRequest: this.maxCountPerRequest,\n          filters: this.filters,\n          columnSort: this.sort.columnSort,\n          sortType: this.sort.sortType,\n        });\n      }\n    );\n\n    this.runFilters({\n      userid: this.userid,\n      sessionid: this.sessionid,\n    });\n  },\n};\n","import { BitrixVue } from 'ui.vue3';\nimport { Application } from './components/application';\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\nimport { dataStore } from './stores/data';\nimport { filterStore } from './stores/filter';\nimport { tableStore } from './stores/table';\n\nexport class FilterTable {\n  #store;\n  #rootNode;\n  #application;\n\n  constructor(rootNode, options): void {\n    this.#store = createPinia();\n    this.#rootNode = document.querySelector(rootNode);\n    this.options = options;\n  }\n\n  run(): void {\n    const self = this;\n\n    this.#application = BitrixVue.createApp({\n      name: 'Filter Table Application',\n      components: {\n        Application,\n      },\n      template: '<Application/>',\n      mounted() {\n        dataStore().sessionid = self.options.SESSION_ID;\n        dataStore().userid = self.options.USER_ID;\n\n        tableStore().cols = self.options.COLS;\n        tableStore().maxCountPerRequest = self.options.maxCountPerRequest;\n        tableStore().actions = {\n          columnsNames: self.options.columnsNames,\n          items: self.options.items,\n          defaultSort: self.options.defaultSort,\n          setDefaultSort: self.options.setDefaultSort,\n        };\n\n        filterStore().actions = {\n          filters: self.options.filters,\n        };\n      },\n    });\n\n    this.#application.use(this.#store);\n    this.#application.mount(this.#rootNode);\n  }\n\n  initStorageBeforeStartApplication(): void {\n    setActivePinia(this.#store);\n  }\n\n  getTableStore(): Object {\n    return tableStore;\n  }\n}\n"],"names":["dataStore","defineStore","state","sessionid","userid","tableStore","loadingCols","loadingItems","columnsNames","items","sort","actions","getters","loadingTable","runColumnsNames","data","callback","a","window","BX","ajax","runComponentAction","then","result","resultFn","error","twinpx","vue","markup","runItems","startIndex","runDefaultSort","defaultSort","runSetDefaultSort","setDefaultSort","filterStore","loadingFilter","filters","changeTextControlValue","control","value","changeSelectRadioValue","changeSelectDropdownValue","changeControlValue","checked","property","type","substring","toUpperCase","toLowerCase","runFilters","Application","components","FilterComponent","TableComponent","TablePagination","LoaderCircle","ErrorMessage","template","computed","mapState","pagesNum","Math","ceil","resultCount","maxCountPerRequest","pageActive","methods","mapActions","hideError","clickTh","column","sortType","columnSort","id","input","clickPage","count","mounted","FilterTable","rootNode","options","createPinia","document","querySelector","self","BitrixVue","createApp","name","SESSION_ID","USER_ID","cols","COLS","use","mount","setActivePinia"],"mappings":";;;;EAEO,IAAMA,SAAS,GAAGC,yBAAW,CAAC,MAAM,EAAE;IAC3CC,KAAK,EAAE;MAAA,OAAO;QACZC,SAAS,EAAE,EAAE;QACbC,MAAM,EAAE;OACT;;EACH,CAAC,CAAC;;ECLK,IAAMC,UAAU,GAAGJ,yBAAW,CAAC,OAAO,EAAE;IAC7CC,KAAK,EAAE,iBAAM;MACX,OAAO;QACLI,WAAW,EAAE,KAAK;QAClBC,YAAY,EAAE,KAAK;QACnBC,YAAY,EAAE,EAAE;QAChBC,KAAK,EAAE,EAAE;QACTC,IAAI,EAAE,EAAE;QACRC,OAAO,EAAE;OACV;KACF;IACDC,OAAO,EAAE;MACPC,YAAY,0BAAG;QACb,OAAO,IAAI,CAACP,WAAW,IAAI,IAAI,CAACC,YAAY;;KAE/C;IACDI,OAAO,EAAE;MACPG,eAAe,2BAACC,IAAI,EAAEC,QAAQ,EAAE;QAAA;QAC9B,IAAI,CAACV,WAAW,GAAG,IAAI;QACvB,IAAIW,CAAC,GAAGC,MAAM,CAACC,EAAE,CAACC,IAAI,CAACC,kBAAkB,CACvC,IAAI,CAACV,OAAO,CAACH,YAAY,EACzBO,IAAI,CACL;QACD,IAAIb,KAAK,GAAG,IAAI;QAEhBe,CAAC,CAACK,IAAI,CACJ,UAACC,MAAM,EAAK;UACV,KAAI,CAACjB,WAAW,GAAG,KAAK;UACxBkB,QAAQ,CAACtB,KAAK,EAAEqB,MAAM,CAAC;SACxB,EACD,UAACE,KAAK,EAAK;UACT,KAAI,CAACnB,WAAW,GAAG,KAAK;UACxB,IACEY,MAAM,CAACQ,MAAM,IACbR,MAAM,CAACQ,MAAM,CAACC,GAAG,CAACC,MAAM,IACxBV,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,EACjC;YACAH,QAAQ,CAACtB,KAAK,EAAEgB,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,CAACnB,YAAY,CAAC;WAChE;SAGF,CACF;QAED,SAASgB,QAAQ,CAACtB,KAAK,EAAEa,IAAI,EAAE;UAC7Bb,KAAK,CAACM,YAAY,GAAGO,IAAI;UACzB,IAAIC,QAAQ,EAAE;YACZA,QAAQ,EAAE;;;OAGf;MACDa,QAAQ,oBAACd,IAAI,EAAEC,QAAQ,EAAE;QAAA;QACvB,IAAI,CAACT,YAAY,GAAG,IAAI;QACxB,IAAIU,CAAC,GAAGC,MAAM,CAACC,EAAE,CAACC,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAACV,OAAO,CAACF,KAAK,EAAEM,IAAI,CAAC;QACnE,IAAIb,KAAK,GAAG,IAAI;QAEhBe,CAAC,CAACK,IAAI,CACJ,UAACC,MAAM,EAAK;UACV,MAAI,CAAChB,YAAY,GAAG,KAAK;UACzBiB,QAAQ,CAACtB,KAAK,EAAEqB,MAAM,CAAC;SACxB,EACD,UAACE,KAAK,EAAK;UACT,MAAI,CAAClB,YAAY,GAAG,KAAK;UACzB,IACEW,MAAM,CAACQ,MAAM,IACbR,MAAM,CAACQ,MAAM,CAACC,GAAG,CAACC,MAAM,IACxBV,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,EACjC;YACAH,QAAQ,CACNtB,KAAK,EACLgB,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,CAAClB,KAAK,CAACM,IAAI,CAACe,UAAU,CAAC,CACzD;WACF;SAGF,CACF;QAED,SAASN,QAAQ,CAACtB,KAAK,EAAEa,IAAI,EAAE;UAC7Bb,KAAK,CAACO,KAAK,GAAGM,IAAI;UAElB,IAAIC,QAAQ,EAAE;YACZA,QAAQ,EAAE;;;OAGf;MACDe,cAAc,0BAAChB,IAAI,EAAEC,QAAQ,EAAE;QAC7B,IAAIC,CAAC,GAAGC,MAAM,CAACC,EAAE,CAACC,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAACV,OAAO,CAACqB,WAAW,EAAEjB,IAAI,CAAC;QACzE,IAAIb,KAAK,GAAG,IAAI;QAEhBe,CAAC,CAACK,IAAI,CACJ,UAACC,MAAM,EAAK;UACVC,QAAQ,CAACtB,KAAK,EAAEqB,MAAM,CAAC;SACxB,EACD,UAACE,KAAK,EAAK;UACT,IACEP,MAAM,CAACQ,MAAM,IACbR,MAAM,CAACQ,MAAM,CAACC,GAAG,CAACC,MAAM,IACxBV,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,EACjC;YACAH,QAAQ,CAACtB,KAAK,EAAEgB,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,CAACK,WAAW,CAAC;WAC/D;SAGF,CACF;QAED,SAASR,QAAQ,CAACtB,KAAK,EAAEa,IAAI,EAAE;UAC7Bb,KAAK,CAACQ,IAAI,GAAGK,IAAI;UACjB,IAAIC,QAAQ,EAAE;YACZA,QAAQ,EAAE;;;OAGf;MACDiB,iBAAiB,6BAAClB,IAAI,EAAEC,QAAQ,EAAE;QAChC,IAAIC,CAAC,GAAGC,MAAM,CAACC,EAAE,CAACC,IAAI,CAACC,kBAAkB,CACvC,IAAI,CAACV,OAAO,CAACuB,cAAc,EAC3BnB,IAAI,CACL;QACD,IAAIb,KAAK,GAAG,IAAI;QAEhBe,CAAC,CAACK,IAAI,CACJ,UAACC,MAAM,EAAK;UACVC,QAAQ,CAACtB,KAAK,EAAEqB,MAAM,CAAC;SACxB,EACD,UAACE,KAAK,EAAK;UACT,IACEP,MAAM,CAACQ,MAAM,IACbR,MAAM,CAACQ,MAAM,CAACC,GAAG,CAACC,MAAM,IACxBV,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,EACjC;YACAH,QAAQ,CAACtB,KAAK,EAAEgB,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,CAACO,cAAc,CAAC;WAClE;SAGF,CACF;QAED,SAASV,QAAQ,CAACtB,KAAK,EAAEa,IAAI,EAAE;UAC7Bb,KAAK,CAACQ,IAAI,GAAGK,IAAI;UACjB,IAAIC,QAAQ,EAAE;YACZA,QAAQ,EAAE;;;;;EAKpB,CAAC,CAAC;;EClJK,IAAMmB,WAAW,GAAGlC,yBAAW,CAAC,QAAQ,EAAE;IAC/CC,KAAK,EAAE;MAAA,OAAO;QACZkC,aAAa,EAAE,KAAK;QACpBzB,OAAO,EAAE,EAAE;QACX0B,OAAO,EAAE;OACV;KAAC;IACF1B,OAAO,EAAE;MACP2B,sBAAsB,wCAAqB;QAAA,IAAlBC,OAAO,QAAPA,OAAO;UAAEC,KAAK,QAALA,KAAK;QACrCD,OAAO,CAACC,KAAK,GAAGA,KAAK;OACtB;MACDC,sBAAsB,yCAAqB;QAAA,IAAlBF,OAAO,SAAPA,OAAO;UAAEC,KAAK,SAALA,KAAK;QACrCD,OAAO,CAACC,KAAK,GAAGA,KAAK;OACtB;MACDE,yBAAyB,4CAAqB;QAAA,IAAlBH,OAAO,SAAPA,OAAO;UAAEC,KAAK,SAALA,KAAK;QACxCD,OAAO,CAACC,KAAK,GAAGA,KAAK;OACtB;MACDG,kBAAkB,qCAA8B;QAAA,IAA3BJ,OAAO,SAAPA,OAAO;UAAEC,KAAK,SAALA,KAAK;UAAEI,OAAO,SAAPA,OAAO;QAC1C,QAAQL,OAAO,CAACM,QAAQ;UACtB,KAAK,MAAM;UACX,KAAK,UAAU;YACb,IAAI,CAACP,sBAAsB,CAAC;cAAEC,OAAO,EAAPA,OAAO;cAAEC,KAAK,EAALA;aAAO,CAAC;YAC/C;;;;;;;UAOF,KAAK,QAAQ;YACX,IAAI,uBACaD,OAAO,CAACO,IAAI,CACxBC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CACfC,WAAW,EAAE,SAAGT,OAAO,CAACO,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC,CAACE,WAAW,EAAE,WAC3D,CAAC;cAAEV,OAAO,EAAPA,OAAO;cAAEC,KAAK,EAALA;aAAO,CAAC;YACrB;;;;;;;;;;;OAWL;MACDU,UAAU,sBAACnC,IAAI,EAAEC,QAAQ,EAAE;QAAA;QACzB,IAAI,CAACoB,aAAa,GAAG,IAAI;QACzB,IAAInB,CAAC,GAAGC,MAAM,CAACC,EAAE,CAACC,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAACV,OAAO,CAAC0B,OAAO,EAAEtB,IAAI,CAAC;QACrE,IAAIb,KAAK,GAAG,IAAI;QAEhBe,CAAC,CAACK,IAAI,CACJ,UAACC,MAAM,EAAK;UACV,KAAI,CAACa,aAAa,GAAG,KAAK;UAC1BZ,QAAQ,CAACtB,KAAK,EAAEqB,MAAM,CAAC;SACxB,EACD,UAACE,KAAK,EAAK;UACT,KAAI,CAACW,aAAa,GAAG,KAAK;UAC1B,IACElB,MAAM,CAACQ,MAAM,IACbR,MAAM,CAACQ,MAAM,CAACC,GAAG,CAACC,MAAM,IACxBV,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,EACjC;YACAH,QAAQ,CAACtB,KAAK,EAAEgB,MAAM,CAACQ,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,CAACU,OAAO,CAAC;WAC3D;SAGF,CACF;QAED,SAASb,QAAQ,CAACtB,KAAK,EAAEa,IAAI,EAAE;UAC7Bb,KAAK,CAACmC,OAAO,GAAGtB,IAAI;UACpB,IAAIC,QAAQ,EAAE;YACZA,QAAQ,EAAE;;;;;EAKpB,CAAC,CAAC;;;;AChFF,EAaO,IAAMmC,WAAW,GAAG;IACzBpC,IAAI,kBAAG;MACL,OAAO;QACLU,KAAK,EAAE;OACR;KACF;IACD2B,UAAU,EAAE;MACVC,eAAe,EAAfA,0CAAe;MACfC,cAAc,EAAdA,wCAAc;MACdC,eAAe,EAAfA,8CAAe;MACfC,YAAY,EAAZA,6CAAY;MACZC,YAAY,EAAZA;KACD;;IAEDC,QAAQ,21BAkBR;IACAC,QAAQ,8DACHC,sBAAQ,CAAC5D,SAAS,EAAE,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC,GAC5C4D,sBAAQ,CAACvD,UAAU,EAAE,CACtB,cAAc,EACd,cAAc,EACd,OAAO,EACP,MAAM,EACN,MAAM,EACN,oBAAoB,CACrB,CAAC,GACCuD,sBAAQ,CAACzB,WAAW,EAAE,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;MACtD0B,QAAQ,sBAAG;QACT,OAAOC,IAAI,CAACC,IAAI,CAAC,IAAI,CAACtD,KAAK,CAACuD,WAAW,GAAG,IAAI,CAACC,kBAAkB,CAAC;OACnE;MACDC,UAAU,wBAAG;QACX,OAAO,IAAI,CAACzD,KAAK,CAACqB,UAAU,GAAG,IAAI,CAACmC,kBAAkB,GAAG,CAAC;;MAE7D;IACDE,OAAO,gDACFC,wBAAU,CAAC/D,UAAU,EAAE,CACxB,iBAAiB,EACjB,UAAU,EACV,gBAAgB,EAChB,mBAAmB,CACpB,CAAC,GACC+D,wBAAU,CAACjC,WAAW,EAAE,CAAC,YAAY,EAAE,oBAAoB,CAAC,CAAC;MAChEkC,SAAS,uBAAG;QACV,IAAI,CAAC5C,KAAK,GAAG,EAAE;OAChB;MACD6C,OAAO,yBAAa;QAAA;QAAA,IAAVC,MAAM,QAANA,MAAM;QACd,IAAMC,QAAQ,GACZ,IAAI,CAAC9D,IAAI,CAAC+D,UAAU,KAAKF,MAAM,CAACG,EAAE,IAAI,IAAI,CAAChE,IAAI,CAAC8D,QAAQ,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC;QAExE,IAAI,CAACvC,iBAAiB,CACpB;UACE7B,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBD,SAAS,EAAE,IAAI,CAACA,SAAS;UACzBsE,UAAU,EAAEF,MAAM,CAACG,EAAE;UACrBF,QAAQ,EAARA;SACD,EACD,YAAM;UACJ,KAAI,CAAC3C,QAAQ,CAAC;YACZzB,MAAM,EAAE,KAAI,CAACA,MAAM;YACnBD,SAAS,EAAE,KAAI,CAACA,SAAS;YACzB2B,UAAU,EAAE,KAAI,CAACrB,KAAK,CAACqB,UAAU,IAAI,CAAC;YACtCmC,kBAAkB,EAAE,KAAI,CAACA,kBAAkB;YAC3C5B,OAAO,EAAE,EAAE;YACXoC,UAAU,EAAE,CAAC;YACbD,QAAQ,EAAE;WACX,CAAC;UACF,KAAI,CAACzC,cAAc,CAAC;YAClB3B,MAAM,EAAE,KAAI,CAACA,MAAM;YACnBD,SAAS,EAAE,KAAI,CAACA;WACjB,CAAC;SACH,CACF;OACF;MACDwE,KAAK,wBAA8B;QAAA,IAA3BpC,OAAO,SAAPA,OAAO;UAAEC,KAAK,SAALA,KAAK;UAAEI,OAAO,SAAPA,OAAO;QAC7B,IAAI,CAACD,kBAAkB,CAAC;UACtBJ,OAAO,EAAPA,OAAO;UACPC,KAAK,EAALA,KAAK;UACLI,OAAO,EAAPA;SACD,CAAC;QAEF,IAAI,CAACf,QAAQ,CAAC;UACZzB,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBD,SAAS,EAAE,IAAI,CAACA,SAAS;UACzB2B,UAAU,EAAE,IAAI,CAACrB,KAAK,CAACqB,UAAU,IAAI,CAAC;UACtCmC,kBAAkB,EAAE,IAAI,CAACA,kBAAkB;UAC3C5B,OAAO,EAAE,IAAI,CAACA,OAAO;UACrBoC,UAAU,EAAE,IAAI,CAAC/D,IAAI,CAAC+D,UAAU;UAChCD,QAAQ,EAAE,IAAI,CAAC9D,IAAI,CAAC8D;SACrB,CAAC;OACH;MACDI,SAAS,4BAAY;QAAA,IAATC,KAAK,SAALA,KAAK;QACf,IAAI,CAAChD,QAAQ,CAAC;UACZzB,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBD,SAAS,EAAE,IAAI,CAACA,SAAS;UACzB2B,UAAU,EAAE,CAAC+C,KAAK,GAAG,CAAC,IAAI,IAAI,CAACZ,kBAAkB;UACjDA,kBAAkB,EAAE,IAAI,CAACA,kBAAkB;UAC3C5B,OAAO,EAAE,IAAI,CAACA,OAAO;UACrBoC,UAAU,EAAE,IAAI,CAAC/D,IAAI,CAAC+D,UAAU;UAChCD,QAAQ,EAAE,IAAI,CAAC9D,IAAI,CAAC8D;SACrB,CAAC;;MAEL;IACDM,OAAO,qBAAG;MAAA;MACR,IAAI,CAAChE,eAAe,CAAC;QACnBV,MAAM,EAAE,IAAI,CAACA,MAAM;QACnBD,SAAS,EAAE,IAAI,CAACA;OACjB,CAAC;MAEF,IAAI,CAAC4B,cAAc,CACjB;QACE3B,MAAM,EAAE,IAAI,CAACA,MAAM;QACnBD,SAAS,EAAE,IAAI,CAACA;OACjB,EACD,YAAM;QACJ,MAAI,CAAC0B,QAAQ,CAAC;UACZzB,MAAM,EAAE,MAAI,CAACA,MAAM;UACnBD,SAAS,EAAE,MAAI,CAACA,SAAS;UACzB2B,UAAU,EAAE,MAAI,CAACrB,KAAK,CAACqB,UAAU,IAAI,CAAC;UACtCmC,kBAAkB,EAAE,MAAI,CAACA,kBAAkB;UAC3C5B,OAAO,EAAE,MAAI,CAACA,OAAO;UACrBoC,UAAU,EAAE,MAAI,CAAC/D,IAAI,CAAC+D,UAAU;UAChCD,QAAQ,EAAE,MAAI,CAAC9D,IAAI,CAAC8D;SACrB,CAAC;OACH,CACF;MAED,IAAI,CAACtB,UAAU,CAAC;QACd9C,MAAM,EAAE,IAAI,CAACA,MAAM;QACnBD,SAAS,EAAE,IAAI,CAACA;OACjB,CAAC;;EAEN,CAAC;;;;ACjKD,EAK4C;EAAA;EAAA;AAE5C,MAAa4E,WAAW;IAKtB,qBAAYC,QAAQ,EAAEC,OAAO,EAAQ;MAAA;MAAA;QAAA;QAAA;;MAAA;QAAA;QAAA;;MAAA;QAAA;QAAA;;MACnC,sCAAI,UAAUC,yBAAW,EAAE;MAC3B,sCAAI,aAAaC,QAAQ,CAACC,aAAa,CAACJ,QAAQ,CAAC;MACjD,IAAI,CAACC,OAAO,GAAGA,OAAO;;IACvB;MAAA;MAAA,sBAEW;QACV,IAAMI,IAAI,GAAG,IAAI;QAEjB,sCAAI,gBAAgBC,iBAAS,CAACC,SAAS,CAAC;UACtCC,IAAI,EAAE,0BAA0B;UAChCpC,UAAU,EAAE;YACVD,WAAW,EAAXA;WACD;UACDO,QAAQ,EAAE,gBAAgB;UAC1BoB,OAAO,qBAAG;YACR9E,SAAS,EAAE,CAACG,SAAS,GAAGkF,IAAI,CAACJ,OAAO,CAACQ,UAAU;YAC/CzF,SAAS,EAAE,CAACI,MAAM,GAAGiF,IAAI,CAACJ,OAAO,CAACS,OAAO;YAEzCrF,UAAU,EAAE,CAACsF,IAAI,GAAGN,IAAI,CAACJ,OAAO,CAACW,IAAI;YACrCvF,UAAU,EAAE,CAAC4D,kBAAkB,GAAGoB,IAAI,CAACJ,OAAO,CAAChB,kBAAkB;YACjE5D,UAAU,EAAE,CAACM,OAAO,GAAG;cACrBH,YAAY,EAAE6E,IAAI,CAACJ,OAAO,CAACzE,YAAY;cACvCC,KAAK,EAAE4E,IAAI,CAACJ,OAAO,CAACxE,KAAK;cACzBuB,WAAW,EAAEqD,IAAI,CAACJ,OAAO,CAACjD,WAAW;cACrCE,cAAc,EAAEmD,IAAI,CAACJ,OAAO,CAAC/C;aAC9B;YAEDC,WAAW,EAAE,CAACxB,OAAO,GAAG;cACtB0B,OAAO,EAAEgD,IAAI,CAACJ,OAAO,CAAC5C;aACvB;;SAEJ,CAAC;QAEF,sCAAI,gBAAcwD,GAAG,mCAAC,IAAI,UAAQ;QAClC,sCAAI,gBAAcC,KAAK,mCAAC,IAAI,aAAW;;;MACxC;MAAA,oDAEyC;QACxCC,4BAAc,mCAAC,IAAI,UAAQ;;;MAC5B;MAAA,gCAEuB;QACtB,OAAO1F,UAAU;;;IAClB;EAAA;;;;;;;;"}