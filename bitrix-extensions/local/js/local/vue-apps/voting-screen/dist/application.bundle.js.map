{"version":3,"file":"application.bundle.js","sources":["../src/stores/data.js","../src/components/application.js","../src/pages/v1.js","../src/components/status-timer.js","../src/pages/v2.js","../src/components/graph-component.js","../src/components/list-component.js","../src/pages/v3.js","../src/pages/v4.js","../src/components/answer-component.js","../src/components/result-component.js","../src/pages/v5.js","../src/pages/v6.js","../src/loader.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    command: '',\r\n    params: {},\r\n    extra: {}\r\n\r\n  }),\r\n  actions: {\r\n    changeProp(prop, value) {\r\n      this[prop] = value;\r\n    }\r\n  }\r\n});\r\n","import '../css/application.css';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data.js';\r\n\r\nexport const Application = {\r\n    template: `\r\n        <router-view />\r\n    `,\r\n    computed: {\r\n        ...mapState(dataStore, [\r\n          'command',\r\n          'params',\r\n          'extra',\r\n        ]),\r\n    },\r\n    methods: {\r\n        ...mapActions(dataStore, [\r\n          'changeProp',\r\n        ]),\r\n        subscribe() {\r\n            const _this = this;\r\n\r\n            if (window.BX && BX.ready) {\r\n              BX.ready(function() {\r\n                BX.PULL.subscribe({\r\n                  moduleId: 'voting',\r\n                  callback: function(data) {\r\n                    _this.changeProp('command', data.command);\r\n                    _this.changeProp('params', data.params);\r\n                    _this.changeProp('extra', data.extra);\r\n\r\n                    if (_this.command.startsWith('voting')) {\r\n                        _this.$router.push( `/${_this.command}`);\r\n                    }\r\n      \r\n                    console.log('Command:', data.command)\r\n                    console.log('Params:', data.params)\r\n                    console.log('Extra:', data.extra)\r\n                  }.bind(this)\r\n                });\r\n                BX.PULL.extendWatch('VOTING-RESULT'); /* код голосование для уникальность */\r\n              });\r\n            }\r\n          }\r\n    },\r\n    mounted() {\r\n        this.subscribe()\r\n    }\r\n};","import '../css/application.css';\r\n\r\nexport const V1 = {\r\n  // language=Vue\r\n  template: `\r\n    <div class=\"twpx-voting-screen\">\r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__header\">\r\n        <img src=\"/local/templates/aas/images/logo-aas-small.svg\" alt=\"\" />\r\n      </div>      \r\n    </div>\r\n\t`,\r\n};\r\n","import '../css/status-timer.css'\r\n\r\nexport const StatusTimer = {\r\n    props: ['command', 'params'],\r\n    data() {\r\n        return {\r\n            currentTime: 0, // оставшееся время в секундах\r\n            timerInterval: null,\r\n            isTimerRunning: false,\r\n            startTime: null, // момент начала отсчета\r\n            totalDuration: 0 // общая продолжительность в секундах\r\n        }\r\n    },\r\n    template: `\r\n        <div style=\"display: grid; gap: 16px; justify-items: flex-end;\">\r\n            <div class=\"twpx-voting-screen__state-0\" v-if=\"command==='voting_v2'\">Подготовка</div>\r\n            \r\n            <div class=\"twpx-voting-screen__state-1\" v-else-if=\"command==='voting_v3'\">\r\n                <div class=\"twpx-voting-screen__status\">Голосование идет</div>\r\n                <div class=\"twpx-voting-screen__timer\">{{ formattedTime }}</div>\r\n            </div>\r\n            \r\n            <div class=\"twpx-voting-screen__state-1\" v-else-if=\"command==='voting_v4'\">\r\n                <div class=\"twpx-voting-screen__status\">Голосование приостановлено</div>\r\n                <div class=\"twpx-voting-screen__timer\">{{ formattedTime }}</div>\r\n            </div>\r\n            \r\n            <div class=\"twpx-voting-screen__state-2\" v-else-if=\"command==='voting_v5'\">\r\n                <div class=\"twpx-voting-screen__status\">Закончено</div>\r\n                <div class=\"twpx-voting-screen__timer\">00:00</div>\r\n            </div>\r\n            \r\n            <div class=\"twpx-voting-screen__state-3\" v-else-if=\"command==='voting_v6'\">Голосование в архиве</div>\r\n        </div>\r\n    `,\r\n    computed: {\r\n        formattedTime() {\r\n            const minutes = Math.floor(this.currentTime / 60);\r\n            const seconds = this.currentTime % 60;\r\n            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n        }\r\n    },\r\n    watch: {\r\n        command: {\r\n            handler(newCommand) {\r\n                if (newCommand === 'voting_v3') {\r\n                    this.initializeTimer();\r\n                } else if (newCommand === 'voting_v4') {\r\n                    this.initializeStaticTimer();\r\n                } else {\r\n                    this.stopTimer();\r\n                }\r\n            },\r\n            immediate: true\r\n        },\r\n        params: {\r\n            handler(newParams) {\r\n                if ((this.command === 'voting_v3' || this.command === 'voting_v4') && newParams) {\r\n                    if (this.command === 'voting_v3') {\r\n                        this.initializeTimer();\r\n                    } else if (this.command === 'voting_v4') {\r\n                        this.initializeStaticTimer();\r\n                    }\r\n                }\r\n            },\r\n            deep: true\r\n        }\r\n    },\r\n    methods: {\r\n        initializeTimer() {\r\n            if (!this.params || !this.params.stateDate || !this.params.timer) {\r\n                return;\r\n            }\r\n\r\n            // Парсим дату начала\r\n            this.startTime = new Date(this.params.stateDate);\r\n            this.totalDuration = parseInt(this.params.timer, 10);\r\n            \r\n            this.calculateRemainingTime();\r\n            this.startTimer();\r\n        },\r\n\r\n        calculateRemainingTime() {\r\n            if (!this.startTime || !this.totalDuration) {\r\n                return;\r\n            }\r\n\r\n            const now = new Date();\r\n            const elapsedSeconds = Math.floor((now - this.startTime) / 1000);\r\n            this.currentTime = Math.max(0, this.totalDuration - elapsedSeconds);\r\n        },\r\n\r\n        initializeStaticTimer() {\r\n            if (!this.params || !this.params.stateDate || !this.params.timer) {\r\n                return;\r\n            }\r\n\r\n            // Парсим дату начала\r\n            this.startTime = new Date(this.params.stateDate);\r\n            this.totalDuration = parseInt(this.params.timer, 10);\r\n            \r\n            // Рассчитываем оставшееся время один раз\r\n            this.calculateRemainingTime();\r\n            \r\n            // Останавливаем любой активный таймер\r\n            this.stopTimer();\r\n        },\r\n\r\n        startTimer() {\r\n            if (this.isTimerRunning) return;\r\n            \r\n            this.isTimerRunning = true;\r\n            \r\n            this.timerInterval = setInterval(() => {\r\n                this.currentTime--;\r\n                \r\n                // Останавливаем таймер когда достигли 0\r\n                if (this.currentTime <= 0) {\r\n                    this.stopTimer();\r\n                    this.currentTime = 0; // устанавливаем точно 0\r\n                }\r\n            }, 1000);\r\n        },\r\n        \r\n        stopTimer() {\r\n            if (this.timerInterval) {\r\n                clearInterval(this.timerInterval);\r\n                this.timerInterval = null;\r\n            }\r\n            this.isTimerRunning = false;\r\n        }\r\n    },\r\n    beforeUnmount() {\r\n        this.stopTimer();\r\n    },\r\n};","import '../css/application.css';\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data.js';\r\nimport { StatusTimer } from '../components/status-timer.js';\r\n\r\nexport const V2 = {\r\n  components: {\r\n    StatusTimer,\r\n  },\r\n  template: `\r\n    <div class=\"twpx-voting-screen\">\r\n\r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__header\">\r\n        <img src=\"/local/templates/aas/images/logo-aas-small.svg\" alt=\"\" />\r\n        <StatusTimer :command=\"command\" />\r\n      </div>\r\n      \r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__description\">\r\n        <div class=\"twpx-voting-screen__voting-name\">{{ params.title }}</div>\r\n        <div class=\"twpx-voting-screen__voting-description\">{{ params.description }}</div>\r\n      </div>\r\n\r\n      <div class=\"twpx-voting-screen__body\">\r\n        <div class=\"twpx-voting-screen-block twpx-voting-screen-app\">\r\n          <div class=\"twpx-voting-screen__body-title\">Используйте приложение<br>для голосования</div>\r\n          <div class=\"twpx-voting-screen__body-content\">\r\n            <div class=\"twpx-voting-screen__phone\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"twpx-voting-screen-block twpx-voting-screen-app\">\r\n          <div class=\"twpx-voting-screen__body-title\">Или отсканируйте QR</div>\r\n          <div class=\"twpx-voting-screen__body-content\">\r\n            <img :src=\"params.qr\" alt=\"\" class=\"twpx-voting-screen__qr\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\t`,\r\n  computed: {\r\n      ...mapState(dataStore, [\r\n        'command',\r\n        'params',\r\n        'extra',\r\n      ]),\r\n  },\r\n};\r\n","import '../css/graph-component.css'\r\n\r\nexport const GraphComponent = {\r\n    props: ['votedNum', 'votedPercentage', 'notVotedNum', 'notVotedPercentage'],\r\n    template: `\r\n        <div class=\"twpx-voting-screen-block twpx-voting-screen-graph\">\r\n            <div class=\"twpx-voting-screen-graph-item twpx-voting-screen-graph-item--voted\">\r\n                <div class=\"twpx-voting-screen-graph-item__rect\" :style=\"'height: '+votedPercentage+'%;'\">\r\n                    <div class=\"twpx-voting-screen-graph-item__num\">{{ votedNum }}</div>\r\n                    <div class=\"twpx-voting-screen-graph-item__proc\">{{ votedPercentage }}%</div>\r\n                </div>\r\n                <div class=\"twpx-voting-screen-graph-item__text\">Проголосовали</div>\r\n            </div>\r\n            <div class=\"twpx-voting-screen-graph-item twpx-voting-screen-graph-item--not\"\r\n                :class=\"{'twpx-voting-screen-graph-item--zero': Number(notVotedNum)===0}\"\r\n            >\r\n                <div class=\"twpx-voting-screen-graph-item__rect\" :style=\"'height: '+notVotedPercentage+'%;'\">\r\n                    <div class=\"twpx-voting-screen-graph-item__num\">{{ notVotedNum }}</div>\r\n                    <div class=\"twpx-voting-screen-graph-item__proc\">{{ notVotedPercentage }}%</div>\r\n                </div>\r\n                <div class=\"twpx-voting-screen-graph-item__text\">Не голосовали</div>\r\n            </div>\r\n        </div>\r\n    `\r\n};","import '../css/list-component.css'\r\n\r\nexport const ListComponent = {\r\n    props: ['list'],\r\n    template: `\r\n        <div class=\"twpx-voting-screen-block twpx-voting-screen-list\"\r\n            :class=\"{\r\n                'twpx-voting-screen-list--lt10': list.length < 10,\r\n                'twpx-voting-screen-list--success': list.length === 0\r\n            }\"\r\n        >\r\n            <div class=\"twpx-voting-screen-list__items-wrapper\">\r\n                <div class=\"twpx-voting-screen-list__items\" v-if=\"list.length > 0\">\r\n                    <div class=\"twpx-voting-screen-list__item\" v-for=\"item in list\" :key=\"item\">{{ item }}</div>\r\n                </div>\r\n                <div class=\"twpx-voting-screen-list__item-success\" v-else>Все проголосовали!</div>\r\n            </div>\r\n            <div class=\"twpx-voting-screen-list__text\" v-if=\"list.length > 0\">Еще не голосовали</div>\r\n        </div>\r\n    `\r\n};","import '../css/application.css';\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data.js';\r\n\r\nimport { StatusTimer } from '../components/status-timer.js';\r\nimport { GraphComponent } from '../components/graph-component.js';\r\nimport { ListComponent } from '../components/list-component.js';\r\n\r\nexport const V3 = {\r\n  components: {\r\n    StatusTimer,\r\n    GraphComponent,\r\n    ListComponent\r\n  },\r\n  template: `\r\n    <div class=\"twpx-voting-screen\">\r\n\r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__header\">\r\n        <img src=\"/local/templates/aas/images/logo-aas-small.svg\" alt=\"\" />\r\n        <StatusTimer :command=\"command\" :params=\"params\" />\r\n      </div>\r\n      \r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__description\">\r\n        <div class=\"twpx-voting-screen__voting-name\">{{ params.title }}</div>\r\n        <div class=\"twpx-voting-screen__voting-description\">{{ params.description }}</div>\r\n      </div>\r\n\r\n      <div class=\"twpx-voting-screen__body\">\r\n        <GraphComponent\r\n          :votedNum=\"votedNum\"\r\n          :votedPercentage=\"votedPercentage\"\r\n          :notVotedNum=\"notVotedNum\"\r\n          :notVotedPercentage=\"notVotedPercentage\"\r\n        />\r\n        <ListComponent :list=\"listNoneVoters\" />\r\n      </div>\r\n\r\n    </div>\r\n\t`,\r\n  computed: {\r\n      ...mapState(dataStore, [\r\n        'command',\r\n        'params',\r\n        'extra',\r\n      ]),\r\n      votedNum() {\r\n        return this.params.numberOfVotes;\r\n      },\r\n      votedPercentage() {\r\n        return Math.round(this.params.numberOfVotes * 100 / this.params.totalVotes);\r\n      },\r\n      notVotedNum() {\r\n        return this.params.totalVotes - this.params.numberOfVotes;\r\n      },\r\n      notVotedPercentage() {\r\n        return Math.round((this.params.totalVotes - this.params.numberOfVotes) * 100 / this.params.totalVotes);\r\n      },\r\n      listNoneVoters() {\r\n        return this.params.listNoneVoters ? this.params.listNoneVoters.sort().slice(0, 10) : [];\r\n      }\r\n  },\r\n};\r\n","import '../css/application.css';\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data.js';\r\n\r\nimport { StatusTimer } from '../components/status-timer.js';\r\nimport { GraphComponent } from '../components/graph-component.js';\r\nimport { ListComponent } from '../components/list-component.js';\r\n\r\nexport const V4 = {\r\n  components: {\r\n    StatusTimer,\r\n    GraphComponent,\r\n    ListComponent\r\n  },\r\n  template: `\r\n    <div class=\"twpx-voting-screen\">\r\n\r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__header\">\r\n        <img src=\"/local/templates/aas/images/logo-aas-small.svg\" alt=\"\" />\r\n        <StatusTimer :command=\"command\" :params=\"params\" />\r\n      </div>\r\n      \r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__description\">\r\n        <div class=\"twpx-voting-screen__voting-name\">{{ params.title }}</div>\r\n        <div class=\"twpx-voting-screen__voting-description\">{{ params.description }}</div>\r\n      </div>\r\n\r\n      <div class=\"twpx-voting-screen__body\">\r\n        <GraphComponent\r\n          :votedNum=\"votedNum\"\r\n          :votedPercentage=\"votedPercentage\"\r\n          :notVotedNum=\"notVotedNum\"\r\n          :notVotedPercentage=\"notVotedPercentage\"\r\n        />\r\n        <ListComponent :list=\"listNoneVoters\" />\r\n      </div>\r\n\r\n    </div>\r\n\t`,\r\n  computed: {\r\n      ...mapState(dataStore, [\r\n        'command',\r\n        'params',\r\n        'extra',\r\n      ]),\r\n      votedNum() {\r\n        return this.params.numberOfVotes;\r\n      },\r\n      votedPercentage() {\r\n        return Math.round(this.params.numberOfVotes * 100 / this.params.totalVotes);\r\n      },\r\n      notVotedNum() {\r\n        return this.params.totalVotes - this.params.numberOfVotes;\r\n      },\r\n      notVotedPercentage() {\r\n        return Math.round((this.params.totalVotes - this.params.numberOfVotes) * 100 / this.params.totalVotes);\r\n      },\r\n      listNoneVoters() {\r\n        return this.params.listNoneVoters ? this.params.listNoneVoters.sort().slice(0, 10) : [];\r\n      }\r\n  },\r\n};\r\n","import '../css/answer-component.css'\r\n\r\nexport const AnswerComponent = {\r\n    props: ['answer'],\r\n    template: `\r\n      <div class=\"twpx-voting-answer\" @showeffect=\"showEffect()\">\r\n        <div class=\"twpx-voting-answer__title\">{{ answer.answer }}</div>\r\n        <div class=\"twpx-voting-answer__graph twpx-graph\">\r\n          <div class=\"twpx-graph__wrapper\">\r\n            <div class=\"twpx-graph__img\"></div>\r\n            <div class=\"twpx-graph__num\">{{Number(answer.votesNumber).toLocaleString()}}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `,\r\n    methods: {\r\n      showEffect() {\r\n        const wrapper = this.$el.querySelector('.twpx-graph__img');\r\n        wrapper.style.width = 0;\r\n        setTimeout(() => {\r\n          wrapper.style.width = this.answer.percentage;\r\n        }, 0);\r\n      },\r\n    },\r\n};","import '../css/result-component.css'\r\nimport { AnswerComponent } from './answer-component';\r\n\r\nexport const ResultComponent = {\r\n    props: ['result'],\r\n    components: {\r\n        AnswerComponent\r\n    },\r\n    template: `\r\n        <div class=\"twpx-voting-result\">\r\n            <div class=\"twpx-voting-result-question\" v-for=\"question in result\" :key=\"question.question\">\r\n                <h3 v-if=\"question.question\">{{ question.question }}</h3>\r\n                <div class=\"twpx-voting-result-answers\">\r\n                    <AnswerComponent v-for=\"answer in question.answers\" :answer=\"answer\" :key=\"answer.answer\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    methods: {\r\n        countPercentage() {\r\n            this.result.forEach(q => {\r\n                const biggest = q.answers.reduce((b, a) => b > Number(a.votesNumber) ? b : Number(a.votesNumber), 0);\r\n                q.answers.forEach(a => {\r\n                    a.percentage = `${Number(a.votesNumber) / biggest * 100}%`;\r\n                });\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.countPercentage();\r\n\r\n        setTimeout(() => {\r\n            this.$el.querySelectorAll('.twpx-voting-answer')\r\n                .forEach((answer) => {\r\n                    answer.dispatchEvent(new Event('showeffect'));\r\n                });\r\n        }, 0);\r\n        \r\n    }\r\n};","import '../css/application.css';\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data.js';\r\n\r\nimport { StatusTimer } from '../components/status-timer.js';\r\nimport { ResultComponent } from '../components/result-component.js';\r\n\r\nexport const V5 = {\r\n  components: {\r\n    StatusTimer,\r\n    ResultComponent\r\n  },\r\n  template: `\r\n    <div class=\"twpx-voting-screen\">\r\n\r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__header\">\r\n        <img src=\"/local/templates/aas/images/logo-aas-small.svg\" alt=\"\" />\r\n        <StatusTimer :command=\"command\" />\r\n      </div>\r\n      \r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__description\">\r\n        <div class=\"twpx-voting-screen__voting-name\">{{ params.title }}</div>\r\n        <div class=\"twpx-voting-screen__voting-description\">{{ params.description }}</div>\r\n      </div>\r\n\r\n      <div class=\"twpx-voting-screen-block\">\r\n        <ResultComponent :result=\"params.result\" />\r\n        <div class=\"twpx-voting-screen__message\">{{ params.finalMessage }}</div>\r\n      </div>\r\n\r\n    </div>\r\n\t`,\r\n  computed: {\r\n      ...mapState(dataStore, [\r\n        'command',\r\n        'params',\r\n        'extra',\r\n      ]),\r\n  },\r\n};\r\n","import '../css/application.css';\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data.js';\r\n\r\nimport { StatusTimer } from '../components/status-timer.js';\r\nimport { ResultComponent } from '../components/result-component.js';\r\n\r\nexport const V6 = {\r\n  components: {\r\n    StatusTimer,\r\n    ResultComponent\r\n  },\r\n  template: `\r\n    <div class=\"twpx-voting-screen\">\r\n\r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__header\">\r\n        <img src=\"/local/templates/aas/images/logo-aas-small.svg\" alt=\"\" />\r\n        <StatusTimer :command=\"command\" />\r\n      </div>\r\n      \r\n      <div class=\"twpx-voting-screen-block twpx-voting-screen__description\">\r\n        <div class=\"twpx-voting-screen__voting-name\">{{ params.title }}</div>\r\n        <div class=\"twpx-voting-screen__voting-description\">{{ params.description }}</div>\r\n      </div>\r\n\r\n      <div class=\"twpx-voting-screen-block\">\r\n        <ResultComponent :answers=\"params.answers\" />\r\n        <div class=\"twpx-voting-screen__message\">{{ params.finalMessage }}</div>\r\n      </div>\r\n\r\n    </div>\r\n\t`,\r\n  computed: {\r\n      ...mapState(dataStore, [\r\n        'command',\r\n        'params',\r\n        'extra',\r\n      ]),\r\n  },\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { createRouter, createMemoryHistory } from 'ui.vue3.router';\r\n\r\nimport { V1 } from './pages/v1';\r\nimport { V2 } from './pages/v2';\r\nimport { V3 } from './pages/v3';\r\nimport { V4 } from './pages/v4';\r\nimport { V5 } from './pages/v5';\r\nimport { V6 } from './pages/v6';\r\n\r\nexport class VotingScreen {\r\n  #store;\r\n  #router;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options) {\r\n    this.#store = createPinia();\r\n    this.#router = createRouter({\r\n      history: createMemoryHistory(),\r\n      routes: [\r\n        {\r\n          path: '/',\r\n          component: V1,\r\n          alias: '/voting_v1'\r\n        },\r\n        {\r\n          path: '/voting_v2',\r\n          component: V2\r\n        },\r\n        {\r\n          path: '/voting_v3',\r\n          component: V3\r\n        },\r\n        {\r\n          path: '/voting_v4',\r\n          component: V4\r\n        },\r\n        {\r\n          path: '/voting_v5',\r\n          component: V5\r\n        },\r\n        {\r\n          path: '/voting_v6',\r\n          component: V6\r\n        },\r\n      ],\r\n    });\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run() {\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'VotingScreen',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application />',\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.use(this.#router);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication() {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getFormStore() {\r\n    return formStore;\r\n  }\r\n}\r\n"],"names":["dataStore","defineStore","state","command","params","extra","actions","changeProp","prop","value","Application","template","computed","mapState","methods","mapActions","subscribe","_this","window","BX","ready","PULL","moduleId","callback","data","startsWith","$router","push","console","log","bind","extendWatch","mounted","V1","StatusTimer","props","currentTime","timerInterval","isTimerRunning","startTime","totalDuration","formattedTime","minutes","Math","floor","seconds","toString","padStart","watch","handler","newCommand","initializeTimer","initializeStaticTimer","stopTimer","immediate","newParams","deep","stateDate","timer","Date","parseInt","calculateRemainingTime","startTimer","now","elapsedSeconds","max","setInterval","clearInterval","beforeUnmount","V2","components","GraphComponent","ListComponent","V3","votedNum","numberOfVotes","votedPercentage","round","totalVotes","notVotedNum","notVotedPercentage","listNoneVoters","sort","slice","V4","AnswerComponent","showEffect","wrapper","$el","querySelector","style","width","setTimeout","answer","percentage","ResultComponent","countPercentage","result","forEach","q","biggest","answers","reduce","b","a","Number","votesNumber","querySelectorAll","dispatchEvent","Event","V5","V6","VotingScreen","rootNode","options","createPinia","createRouter","history","createMemoryHistory","routes","path","component","alias","document","BitrixVue","createApp","name","use","mount","setActivePinia","formStore"],"mappings":"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"}