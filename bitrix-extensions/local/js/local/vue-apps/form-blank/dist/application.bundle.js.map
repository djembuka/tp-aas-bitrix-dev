{"version":3,"file":"application.bundle.js","sources":["../src/components/historyItem.js","../src/stores/data.js","../src/stores/controls.js","../src/stores/form.js","../src/components/application.js","../src/loader.js"],"sourcesContent":["import './historyItem.css'\r\n\r\nexport default {\r\n    data() {\r\n        return {}\r\n    },\r\n    props: ['item'],\r\n    template: `\r\n        <div class=\"twpx-status-history-item\">\r\n            <div>\r\n                <div>{{ formatDate(item.create) }} {{ item.state }}</div>\r\n                <div v-if=\"item.comment\" v-html=\"item.comment\"></div>\r\n            </div>\r\n            <a :href=\"item.author.url\" class=\"twpx-status-history-item__author\"  v-if=\"item.author.name || item.author.img\">\r\n                <img :src=\"item.author.img\" :alt=\"item.author.name\" v-if=\"item.author.img\" />\r\n                <span v-if=\"item.author.name\">{{ item.author.name }}</span>\r\n            </a>\r\n        </div>\r\n    `,\r\n    methods: {\r\n        formatDate(dateString) {\r\n            const date = new Date(dateString);\r\n            const pad = (n) => n.toString().padStart(2, '0');\r\n            return (\r\n                pad(date.getDate()) +\r\n                '.' +\r\n                pad(date.getMonth() + 1) +\r\n                '.' +\r\n                date.getFullYear() +\r\n                ' ' +\r\n                pad(date.getHours()) +\r\n                ':' +\r\n                pad(date.getMinutes()) +\r\n                ':' +\r\n                pad(date.getSeconds())\r\n            );\r\n        }\r\n    }\r\n};","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    id: `id${Math.floor(Math.random() * 1000)}`,\r\n    data: {},\r\n    lang: {},\r\n    actions: []\r\n  }),\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const controlsStore = defineStore('controls', {\r\n  state: () => ({\r\n    controls: []\r\n  }),\r\n  actions: {\r\n    changeControls(controls) {\r\n      this.controls = controls;\r\n    },\r\n    changeTextControlValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeSelectDropdownValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeDateValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeFileValue({ control, value }) {\r\n        control.value = value;\r\n        if (control.type === 'upload') {\r\n        this.uploadFile(control, value);\r\n        }\r\n    },\r\n    changeControlValue({ control, value, checked }) {\r\n        switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n        case 'hint':\r\n        case 'tel':\r\n        case 'email':\r\n            this.changeTextControlValue({ control, value });\r\n            break;\r\n        // case 'multiselect':\r\n        //   commit('changeMultiselectValue', { control, value, checked });\r\n        //   break;\r\n        // case 'checkbox':\r\n        //   commit('changeCheckboxValue', { control, checked });\r\n        //   break;\r\n        case 'select':\r\n            this[\r\n            `changeSelect${control.type\r\n                .substring(0, 1)\r\n                .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n            ]({ control, value });\r\n            break;\r\n        case 'file':\r\n            this.changeFileValue({ control, value });\r\n            break;\r\n        case 'date':\r\n            this.changeDateValue({ control, value });\r\n            break;\r\n        // case 'color':\r\n        //   commit('changeColorValue', { control, value });\r\n        //   break;\r\n        }\r\n    },\r\n    async runHints(control, action) {\r\n        try {\r\n        // Создаем AbortController для возможности отмены запроса\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 20000); // 20 секунд таймаут\r\n\r\n        const response = await fetch(action, {\r\n            signal: controller.signal,\r\n            headers: {\r\n            'Content-Type': 'application/json',\r\n            },\r\n        });\r\n\r\n        clearTimeout(timeoutId);\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const result = await response.json();\r\n\r\n        if (result.status === 'success' && result.data) {\r\n            this.setHints(control, result.data);\r\n        } else if (result.errors) {\r\n            this.error = result.errors[0]?.message\r\n        } else {\r\n            this.error = 'Invalid response format';\r\n        }\r\n        } catch (error) {\r\n        this.error = error?.message\r\n        }\r\n    },\r\n    setHints(control, value) {\r\n        control.hints = value;\r\n    },\r\n  }\r\n});","import { defineStore } from 'ui.vue3.pinia';\r\nimport { dataStore } from './data';\r\nimport { controlsStore } from './controls';\r\n\r\nexport const formStore = defineStore('form', {\r\n  state: () => ({\r\n    loading: false,\r\n    error: '',\r\n    stateWatcher: false,\r\n    historyItems: []\r\n  }),\r\n  actions: {\r\n    changeStateWatcher() {\r\n      this.stateWatcher = !this.stateWatcher;\r\n    },\r\n    changeHistoryItems(historyItems) {\r\n      console.log(historyItems)\r\n      this.historyItems = historyItems;\r\n    },\r\n    changeError(error) {\r\n      this.error = error;\r\n    },\r\n    runGetForm() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      BX.ajax.runComponentAction(d.actions.getForm[0], d.actions.getForm[1], {\r\n        mode: 'class',\r\n        data: d.data,\r\n      })\r\n      .then((response) => {\r\n        this.loading = false;\r\n        if (response.status === 'success') {\r\n          this.changeError('');\r\n          controlsStore().changeControls(response.data[0].controls);\r\n        } else {\r\n          this.changeError(response.errors[0].message);\r\n        }\r\n      },\r\n      (response) => {\r\n        this.loading = false;\r\n        if (response && response.errors.length) {\r\n          this.changeError(response.errors[0].message);\r\n        }\r\n      });\r\n    },\r\n    runSaveForm() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      const formElem = document.querySelector(`#${dataStore().id} form`);\r\n      const formData = new FormData(formElem);\r\n\r\n      Object.keys(dataStore().data).forEach(key => {\r\n        formData.append(key, dataStore().data[key]);\r\n      })\r\n\r\n      BX.ajax.runComponentAction(d.actions.saveForm[0], d.actions.saveForm[1], {\r\n        mode: 'class',\r\n        data: formData,\r\n      })\r\n      .then(\r\n        (response) => {\r\n          this.loading = false;\r\n          if (response.status === 'success') {\r\n            this.changeError('');\r\n            this.runGetHistory();\r\n          } else {\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        }, (response) => {\r\n          this.loading = false;\r\n          if (response && response.errors.length) {\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        }\r\n      );\r\n    },\r\n    runGetHistory() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      BX.ajax.runComponentAction(d.actions.getHistory[0], d.actions.getHistory[1], {\r\n        mode: 'class',\r\n        data: d.data,\r\n      })\r\n      .then(\r\n        (response) => {\r\n          this.loading = false;\r\n          if (response.status === 'success') {\r\n            this.changeError('');\r\n            this.changeHistoryItems(response.data);\r\n          } else {\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        },\r\n        (response) => {\r\n          this.loading = false;\r\n          if (response && response.errors.length) {\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        }\r\n      );\r\n    }\r\n  },\r\n});\r\n","import './application.css';\r\n\r\nimport { ControlChoice } from 'local.vue-components.control-choice';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\r\nimport { MessageComponent } from 'local.vue-components.message-component';\r\nimport { ModalYesNo } from 'local.vue-components.modal-yes-no';\r\n\r\nimport HistoryItem from './historyItem.js';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data';\r\nimport { formStore } from '../stores/form';\r\nimport { controlsStore } from '../stores/controls';\r\n\r\nexport const Application = {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: {\r\n    ControlChoice,\r\n    ButtonComponent,\r\n    LoaderCircle,\r\n    MessageComponent,\r\n    ModalYesNo,\r\n    HistoryItem\r\n  },\r\n  // language=Vue\r\n  template: `\r\n  <div class=\"twpx-form-status-change\" :id=\"id\">\r\n\r\n    <LoaderCircle :show=\"loading\" />\r\n\r\n    <MessageComponent v-if=\"error\" type=\"error\" size=\"big\" :message=\"error\" />\r\n\r\n    <ModalYesNo\r\n      :heading=\"lang.modal.heading\"\r\n      :text=\"lang.modal.text\"\r\n      :yes=\"lang.modal.yes\"\r\n      :no=\"lang.modal.no\"\r\n      :stateWatcher=\"stateWatcher\"\r\n      @clickYes=\"clickYes\"\r\n      @clickNo=\"clickNo\"\r\n    />\r\n\r\n    <div class=\"twpx-form-status-change__grid\">\r\n      <div class=\"twpx-form-status-change__form\">\r\n        <form action=\"\">\r\n          <div class=\"twpx-form-status-change__form-wrapper\" v-if=\"!loading\">\r\n\r\n            <h3>{{ lang.form.heading }}</h3>\r\n            <ControlChoice  v-for=\"control in controls\" :key=\"control.id\" :control=\"control\" @input=\"input\"></ControlChoice>\r\n            <ButtonComponent :text=\"lang.form.button\" :props=\"buttonProps\" @clickButton=\"clickButton\" />\r\n\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div class=\"twpx-form-status-change__history\">\r\n\r\n        <h3>{{ lang.history.heading }}</h3>\r\n        <HistoryItem v-for=\"item in historyItems\" :key=\"item.id\" :item=\"item\" />\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\t`,\r\n  computed: {\r\n    ...mapState(dataStore, ['lang', 'id']),\r\n    ...mapState(formStore, ['loading', 'error', 'historyItems', 'stateWatcher']),\r\n    ...mapState(controlsStore, ['controls']),\r\n    buttonProps() {\r\n      const result = ['wide', 'secondary', 'large'];\r\n      if (typeof this.controls === 'object' && this.controls.forEach) {\r\n        this.controls.forEach(c => {\r\n          if (c.required && !c.value) {\r\n            result.push('disabled');\r\n          }\r\n        })\r\n      }\r\n      return result;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(formStore, [\r\n      'runGetForm',\r\n      'runSaveForm',\r\n      'changeStateWatcher',\r\n    ]),\r\n    ...mapActions(controlsStore, ['changeControlValue', 'runHints', 'setHints']),\r\n    input(args) {\r\n      this.changeControlValue(args);\r\n    },\r\n    hints({ control, type, action, value }) {\r\n      if (type === 'get') {\r\n        this.runHints(control, action);\r\n      } else if (type === 'set') {\r\n        this.setHints(control, value);\r\n      }\r\n    },\r\n    clickButton() {\r\n      this.changeStateWatcher();\r\n    },\r\n    clickYes() {\r\n      this.runSaveForm();\r\n      this.changeStateWatcher();\r\n\r\n      const commentControl = this.controls.find(c => c.property === 'textarea');\r\n      this.changeControlValue({control: commentControl, value: ''});\r\n    },\r\n    clickNo() {\r\n      this.changeStateWatcher();\r\n    }\r\n  },\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { dataStore } from './stores/data';\r\nimport { formStore } from './stores/form';\r\n\r\nexport class FormStatusChange {\r\n  #store;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options): void {\r\n    this.#store = createPinia();\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run(): void {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'DisciplinaryCaseForm',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application/>',\r\n      beforeMount() {\r\n        dataStore().data = self.options.data || {};\r\n        dataStore().lang = self.options.lang || {};\r\n        dataStore().actions = self.options.actions || [];\r\n      },\r\n      mounted() {\r\n        formStore().runGetForm();\r\n        formStore().runGetHistory();\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication(): void {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getFormStore(): Object {\r\n    return formStore;\r\n  }\r\n}\r\n"],"names":["data","props","template","methods","formatDate","dateString","date","Date","pad","n","toString","padStart","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","dataStore","defineStore","state","id","Math","floor","random","lang","actions","controlsStore","controls","changeControls","changeTextControlValue","control","value","changeSelectRadioValue","changeSelectDropdownValue","changeDateValue","changeFileValue","type","uploadFile","changeControlValue","checked","property","substring","toUpperCase","toLowerCase","runHints","action","controller","AbortController","timeoutId","setTimeout","abort","fetch","signal","headers","response","clearTimeout","ok","Error","status","json","result","setHints","errors","error","message","hints","formStore","loading","stateWatcher","historyItems","changeStateWatcher","changeHistoryItems","console","log","changeError","runGetForm","d","BX","ajax","runComponentAction","getForm","mode","then","length","runSaveForm","formElem","document","querySelector","formData","FormData","Object","keys","forEach","key","append","saveForm","runGetHistory","getHistory","Application","components","ControlChoice","ButtonComponent","LoaderCircle","MessageComponent","ModalYesNo","HistoryItem","computed","mapState","buttonProps","c","required","push","mapActions","input","args","clickButton","clickYes","commentControl","find","clickNo","FormStatusChange","rootNode","options","createPinia","self","BitrixVue","createApp","name","beforeMount","mounted","use","mount","setActivePinia"],"mappings":"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"}