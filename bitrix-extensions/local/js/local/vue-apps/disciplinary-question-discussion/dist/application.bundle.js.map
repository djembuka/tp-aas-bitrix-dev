{"version":3,"file":"application.bundle.js","sources":["../src/components/comment.js","../src/components/edit-form.js","../src/stores/data.js","../src/stores/form.js","../src/stores/edit-form.js","../src/stores/controls.js","../src/components/application.js","../src/loader.js"],"sourcesContent":["import './comment.css';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\n\r\nexport const CommentItem = {\r\n    components: {\r\n        ButtonComponent\r\n    },\r\n    props: ['comment'],\r\n    emits: ['clickEdit', 'clickDelete'],\r\n    template: `\r\n        <div class=\"twpx-comment\">\r\n            <div class=\"twpx-comment-wrapper\">\r\n                <div class=\"twpx-comment__text\" v-if=\"comment.text\">\r\n                    {{ comment.text }}\r\n                </div>\r\n                <div class=\"twpx-comment__data\">\r\n                    <div class=\"twpx-comment__user-img\" v-if=\"comment.user.img\">\r\n                        <a :href=\"comment.user.href\">\r\n                            <img :src=\"comment.user.img\" alt />\r\n                        </a>\r\n                    </div>\r\n                    <div class=\"twpx-comment__info\">\r\n                        <div class=\"twpx-comment__user-name\" v-if=\"comment.user.name\">\r\n                            <a :href=\"comment.user.href\">{{ comment.user.name }}</a>\r\n                        </div>\r\n                        <div class=\"twpx-comment__time\" v-if=\"comment.create\">{{ formatDate(comment.create) }}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"twpx-comment__buttons\" v-if=\"comment.editButton\">\r\n                <ButtonComponent :text=\"Edit\" :props=\"['icon', 'edit', 'medium']\" @clickButton=\"$emit('clickEdit', comment.id)\" />\r\n                <ButtonComponent :text=\"Delete\" :props=\"['icon', 'delete', 'medium']\" @clickButton=\"$emit('clickDelete', comment.id)\" />\r\n            </div>\r\n        </div>\r\n    `,\r\n    methods: {\r\n        formatDate(dateString) {\r\n            const date = new Date(dateString);\r\n            const pad = (n) => n.toString().padStart(2, '0');\r\n            return (\r\n                pad(date.getDate()) +\r\n                '.' +\r\n                pad(date.getMonth() + 1) +\r\n                '.' +\r\n                date.getFullYear() +\r\n                ' ' +\r\n                pad(date.getHours()) +\r\n                ':' +\r\n                pad(date.getMinutes()) +\r\n                ':' +\r\n                pad(date.getSeconds())\r\n            );\r\n        },\r\n    }\r\n}","import './edit-form.css';\r\n\r\nimport { ControlChoice } from 'local.vue-components.control-choice';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\r\nimport { MessageComponent } from 'local.vue-components.message-component';\r\n\r\nexport const EditForm = {\r\n    components: {\r\n        ControlChoice,\r\n        ButtonComponent,\r\n        LoaderCircle,\r\n        MessageComponent\r\n    },\r\n    props: {\r\n        id: [String, Number],\r\n        h3: String,\r\n        heading: String,\r\n        controls: Array,\r\n        buttons: {\r\n            type: Array,\r\n            default() {\r\n                return [];\r\n            }\r\n        },\r\n        loading: Boolean,\r\n        error: String\r\n    },\r\n    emits: ['input', 'clickYes', 'clickNo'],\r\n    template: `\r\n        <LoaderCircle :show=\"loading\" />\r\n\r\n        <MessageComponent v-if=\"error\" type=\"error\" size=\"big\" :message=\"error\" />\r\n\r\n        <form action=\"\" :id=\"id + 'EditForm'\" v-if=\"!loading && !error\">\r\n            <div class=\"twpx-comment-edit-form\">\r\n                <h3>{{ h3 }}</h3>\r\n                <div class=\"twpx-comment-edit-form__body\">\r\n                    <div class=\"twpx-comment-edit-form__heading\">{{ heading }}</div>\r\n                    <ControlChoice v-for=\"control in controls\" :key=\"control.id\" :control=\"control\" @input=\"input\"></ControlChoice>\r\n                </div>\r\n                <div class=\"twpx-comment-edit-form__buttons\">\r\n                    <ButtonComponent :text=\"buttons[0]\" :props=\"['gray-color', 'large']\" @clickButton=\"$emit('clickNo')\" />\r\n                    <ButtonComponent :text=\"buttons[1]\" :props=\"['secondary', 'large']\" @clickButton=\"$emit('clickYes')\" />\r\n                </div>\r\n            </div>\r\n        </form>\r\n    `,\r\n    methods: {\r\n        input(args) {\r\n            this.$emit('input', args);\r\n        }\r\n    }\r\n}","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    id: `id${Math.floor(Math.random() * 1000)}`,\r\n    data: {},\r\n    lang: {},\r\n    actions: []\r\n  }),\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\nimport { dataStore } from './data';\r\n\r\nexport const formStore = defineStore('form', {\r\n  state: () => ({\r\n    loading: false,\r\n    error: '',\r\n    deleteModalStateWatcher: false,\r\n    comments: [],\r\n    form: {},\r\n    activeCommentId: ''\r\n  }),\r\n  actions: {\r\n    changeDeleteModalStateWatcher() {\r\n      this.deleteModalStateWatcher = !this.deleteModalStateWatcher;\r\n    },\r\n    changeError(error) {\r\n      this.error = error;\r\n    },\r\n    changeLoading(value) {\r\n      this.loading = value;\r\n    },\r\n    changeComments(comments) {\r\n      this.comments = comments;\r\n    },\r\n    changeActiveCommentId(commentId) {\r\n      this.activeCommentId = commentId;\r\n    },\r\n    runGetForm() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      /*let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: {\r\n            controls: [\r\n              {\r\n                \"id\": \"id1-1\",\r\n                \"property\": \"textarea\",\r\n                \"name\": \"COMMENT\",\r\n                \"label\": \"Комментарий\",\r\n                \"value\": \"\",\r\n                \"required\": true,\r\n                \"disabled\": false\r\n              }\r\n            ],\r\n          }\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'getForm error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });*/\r\n\r\n      return BX.ajax.runComponentAction(d.actions.getForm[0], d.actions.getForm[1], {\r\n        mode: 'class',\r\n        data: d.data,\r\n      });\r\n    },\r\n    runSendForm() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      const formElem = document.querySelector(`#${dataStore().id}Form`);\r\n      const formData = new FormData(formElem);\r\n      \r\n      Object.keys(d.data).forEach(key => {\r\n        formData.append(key, d.data[key]);\r\n      });\r\n\r\n      /*let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: {\r\n            redirect: '/'\r\n          }\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'sendForm error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          console.log('io')\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });*/\r\n\r\n      return BX.ajax.runComponentAction(d.actions.sendForm[0], d.actions.sendForm[1], {\r\n        mode: 'class',\r\n        data: formData,\r\n      });\r\n    },\r\n    runGetComments() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      /*let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: {\r\n            comments: [\r\n              {\r\n                id: 'comment1',\r\n                text: 'Саморегулируемая организация аудиторов Ассоциация «Содружество» (сокращенное название - СРО ААС) создано по инициативе Международной общественной организации «Ассоциация бухгалтеров и аудиторов «Содружество» (АБиАС). АБиАС была образована в 1989 году и стала общеизвестным и признанным в России профессиональным объединением ученых и практиков бухгалтерского учета, аудита и экономического анализа.',\r\n                user: {\r\n                  img: '/local/components/twinpx/disciplinar.comments/images/nopic.svg',\r\n                  name: 'Иванов Иван Иванович',\r\n                  url: \"/person/19891/\"\r\n                },\r\n                create: \"2025-07-22T20:09:26+03:00\",\r\n              },\r\n              {\r\n                id: 'comment2',\r\n                text: 'Саморегулируемая организация аудиторов Ассоциация «Содружество» (сокращенное название - СРО ААС) создано по инициативе Международной общественной организации «Ассоциация бухгалтеров и аудиторов «Содружество» (АБиАС). АБиАС была образована в 1989 году и стала общеизвестным и признанным в России профессиональным объединением ученых и практиков бухгалтерского учета, аудита и экономического анализа.',\r\n                user: {\r\n                  img: '/local/components/twinpx/disciplinar.comments/images/nopic.svg',\r\n                  name: 'Петров Пётр Петрович',\r\n                  url: \"/person/19891/\"\r\n                },\r\n                create: \"2025-07-22T20:09:26+03:00\",\r\n              },\r\n              {\r\n                id: 'comment3',\r\n                text: 'Саморегулируемая организация аудиторов Ассоциация «Содружество» (сокращенное название - СРО ААС) создано по инициативе Международной общественной организации «Ассоциация бухгалтеров и аудиторов «Содружество» (АБиАС). АБиАС была образована в 1989 году и стала общеизвестным и признанным в России профессиональным объединением ученых и практиков бухгалтерского учета, аудита и экономического анализа.',\r\n                user: {\r\n                  img: '/local/components/twinpx/disciplinar.comments/images/nopic.svg',\r\n                  name: 'Савельев Савелий Савельевич',\r\n                  url: \"/person/19891/\"\r\n                },\r\n                create: \"2025-07-22T20:09:26+03:00\",\r\n              }\r\n            ]\r\n          }\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'getComments error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });*/\r\n\r\n      return BX.ajax.runComponentAction(d.actions.getComments[0], d.actions.getComments[1], {\r\n        mode: 'class',\r\n        data: d.data,\r\n      });\r\n    },\r\n    runDeleteComment(commentId) {\r\n      this.error = '';\r\n      this.loading = true;\r\n      this.changeDeleteModalStateWatcher();\r\n      const d = dataStore();\r\n\r\n      /*let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: true\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'deleteComment error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });*/\r\n\r\n      return BX.ajax.runComponentAction(d.actions.deleteComment[0], d.actions.deleteComment[1], {\r\n        mode: 'class',\r\n        data: {...d.data, commentId},\r\n      });\r\n    }\r\n  },\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\nimport { dataStore } from './data';\r\n\r\nexport const editFormStore = defineStore('edit-form', {\r\n  state: () => ({\r\n    editLoading: false,\r\n    editError: '',\r\n    editModalStateWatcher: false,\r\n    editForm: {}\r\n  }),\r\n  actions: {\r\n    changeEditModalStateWatcher() {\r\n      this.editModalStateWatcher = !this.editModalStateWatcher;\r\n    },\r\n    changeEditError(error) {\r\n      this.editError = error;\r\n    },\r\n    changeEditLoading(value) {\r\n      this.editLoading = value;\r\n    },\r\n    runGetEditForm(commentId) {\r\n      this.editError = '';\r\n      this.editLoading = true;\r\n      const d = dataStore();\r\n      const data = {...d.data, commentId};\r\n\r\n      /*let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: {\r\n            controls: [\r\n              {\r\n                \"id\": \"editHidden\",\r\n                \"property\": \"hidden\",\r\n                \"name\": \"ID\",\r\n                \"value\": \"789\",\r\n              },\r\n              {\r\n                \"id\": \"id1-1\",\r\n                \"property\": \"textarea\",\r\n                \"name\": \"COMMENT\",\r\n                \"label\": \"Комментарий\",\r\n                \"value\": \"Опишите, пожалуйста, ваш вопрос, проблему или пожелание максимально подробно. Укажите, где и на каком этапе возникла сложность, что вы уже пробовали сделать, и какие сообщения (если были) вы получили. Чем больше информации вы предоставите, тем быстрее и точнее мы сможем вам помочь. При необходимости можно прикрепить скриншоты или ссылки. Мы внимательно прочтём каждое сообщение и постараемся дать вам исчерпывающий ответ.\",\r\n                \"required\": true,\r\n                \"disabled\": false\r\n              }\r\n            ]\r\n          }\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'getEditForm error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });*/\r\n\r\n      return BX.ajax.runComponentAction(d.actions.getEditForm[0], d.actions.getEditForm[1], {\r\n        mode: 'class',\r\n        data,\r\n      });\r\n    },\r\n    runSendEditForm() {\r\n      this.editError = '';\r\n      this.editLoading = true;\r\n      const d = dataStore();\r\n\r\n      const formElem = document.querySelector(`#${dataStore().id}EditForm`);\r\n      const formData = new FormData(formElem);\r\n      \r\n      Object.keys(d.data).forEach(key => {\r\n        formData.append(key, d.data[key]);\r\n      });\r\n\r\n      /*let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: true\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'sendEditForm error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });*/\r\n\r\n      return BX.ajax.runComponentAction(d.actions.sendEditForm[0], d.actions.sendEditForm[1], {\r\n        mode: 'class',\r\n        data: formData,\r\n      });\r\n    }\r\n  },\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const controlsStore = defineStore('controls', {\r\n  state: () => ({\r\n    controls: [],\r\n    editControls: []\r\n  }),\r\n  actions: {\r\n    changeEditControls(controls) {\r\n        this.editControls = controls;\r\n    },\r\n    changeControls(controls) {\r\n      this.controls = controls;\r\n    },\r\n    changeTextControlValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeSelectDropdownValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeDateValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeFileValue({ control, value }) {\r\n        control.value = value;\r\n        if (control.type === 'upload') {\r\n        this.uploadFile(control, value);\r\n        }\r\n    },\r\n    changeControlValue({ control, value, checked }) {\r\n        switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n        case 'hint':\r\n        case 'tel':\r\n        case 'email':\r\n            this.changeTextControlValue({ control, value });\r\n            break;\r\n        // case 'multiselect':\r\n        //   commit('changeMultiselectValue', { control, value, checked });\r\n        //   break;\r\n        // case 'checkbox':\r\n        //   commit('changeCheckboxValue', { control, checked });\r\n        //   break;\r\n        case 'select':\r\n            this[\r\n            `changeSelect${control.type\r\n                .substring(0, 1)\r\n                .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n            ]({ control, value });\r\n            break;\r\n        case 'file':\r\n            this.changeFileValue({ control, value });\r\n            break;\r\n        case 'date':\r\n            this.changeDateValue({ control, value });\r\n            break;\r\n        // case 'color':\r\n        //   commit('changeColorValue', { control, value });\r\n        //   break;\r\n        }\r\n    },\r\n    async runHints(control, action) {\r\n        try {\r\n        // Создаем AbortController для возможности отмены запроса\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 20000); // 20 секунд таймаут\r\n\r\n        const response = await fetch(action, {\r\n            signal: controller.signal,\r\n            headers: {\r\n            'Content-Type': 'application/json',\r\n            },\r\n        });\r\n\r\n        clearTimeout(timeoutId);\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const result = await response.json();\r\n\r\n        if (result.status === 'success' && result.data) {\r\n            this.setHints(control, result.data);\r\n        } else if (result.errors) {\r\n            this.error = result.errors[0]?.message\r\n        } else {\r\n            this.error = 'Invalid response format';\r\n        }\r\n        } catch (error) {\r\n        this.error = error?.message\r\n        }\r\n    },\r\n    setHints(control, value) {\r\n        control.hints = value;\r\n    },\r\n  }\r\n});","import './application.css';\r\n\r\nimport { ControlChoice } from 'local.vue-components.control-choice';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\r\nimport { MessageComponent } from 'local.vue-components.message-component';\r\nimport { ModalYesNo } from 'local.vue-components.modal-yes-no';\r\nimport { ModalAnyContent } from 'local.vue-components.modal-any-content';\r\n\r\nimport { CommentItem } from './comment.js';\r\nimport { EditForm } from './edit-form.js';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data.js';\r\nimport { formStore } from '../stores/form.js';\r\nimport { editFormStore } from '../stores/edit-form.js';\r\nimport { controlsStore } from '../stores/controls.js';\r\n\r\nexport const Application = {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: {\r\n    ControlChoice,\r\n    ButtonComponent,\r\n    LoaderCircle,\r\n    MessageComponent,\r\n    ModalYesNo,\r\n    ModalAnyContent,\r\n    CommentItem,\r\n    EditForm\r\n  },\r\n  // language=Vue\r\n  template: `\r\n  <div class=\"twpx-dc-question-discussion\" :id=\"id\">\r\n\r\n    <LoaderCircle :show=\"loading\" />\r\n\r\n    <MessageComponent v-if=\"!loading && error\" type=\"error\" size=\"big\" :message=\"error\" />\r\n\r\n    <ModalYesNo\r\n      :heading=\"lang.deleteModal.heading\"\r\n      :text=\"lang.deleteModal.text\"\r\n      :yes=\"lang.deleteModal.yes\"\r\n      :no=\"lang.deleteModal.no\"\r\n      :buttons=\"{\r\n        yes: {\r\n          props: ['danger', 'large']\r\n        },\r\n        no: {\r\n          props: ['gray-color', 'large']\r\n        }\r\n      }\"\r\n      :stateWatcher=\"deleteModalStateWatcher\"\r\n      @clickYes=\"clickDeleteModalYes\"\r\n      @clickNo=\"clickDeleteModalNo\"\r\n    />\r\n\r\n    <ModalAnyContent :stateWatcher=\"editModalStateWatcher\">\r\n      <EditForm\r\n        :id=\"id\"\r\n        :h3=\"lang.editModal.heading\"\r\n        :heading=\"lang.editForm.heading\"\r\n        :controls=\"editControls\"\r\n        :buttons=\"lang.editForm.buttons\"\r\n        :loading=\"editLoading\"\r\n        :error=\"editError\"\r\n        @input=\"input\"\r\n        @clickNo=\"clickEditModalNo\"\r\n        @clickYes=\"clickEditModalYes\"\r\n      />\r\n    </ModalAnyContent>\r\n\r\n    <div class=\"twpx-dc-question-discussion__grid\" v-if=\"!loading\">\r\n      <div class=\"twpx-dc-question-discussion__comments\" v-if=\"comments.length\">\r\n        <h3>{{ lang.heading }}</h3>\r\n        <CommentItem v-for=\"comment in comments\" :comment=\"comment\" @clickEdit=\"clickEdit\" @clickDelete=\"clickDelete\" />\r\n      </div>\r\n      <div class=\"twpx-dc-question-discussion__form\" v-if=\"controls.length\">\r\n        <form action=\"\" :id=\"id + 'Form'\">\r\n          <div class=\"twpx-dc-question-discussion__form-wrapper\" v-if=\"!loading\">\r\n\r\n            <h3>{{ lang.form.heading }}</h3>\r\n            <ControlChoice v-for=\"control in controls\" :key=\"control.id\" :control=\"control\" @input=\"input\"></ControlChoice>\r\n            <ButtonComponent :text=\"lang.form.button\" :props=\"buttonProps\" :disabled=\"isDisabled\" @clickButton=\"clickButton\" />\r\n\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\t`,\r\n  computed: {\r\n    ...mapState(dataStore, ['lang', 'id']),\r\n    ...mapState(formStore, [\r\n      'loading',\r\n      'error',\r\n      'comments',\r\n      'form',\r\n      'deleteModalStateWatcher',\r\n      'activeCommentId'\r\n    ]),\r\n    ...mapState(editFormStore, [\r\n      'editLoading',\r\n      'editError',\r\n      'editForm',\r\n      'editModalStateWatcher'\r\n    ]),\r\n    ...mapState(controlsStore, [\r\n      'controls',\r\n      'editControls'\r\n    ]),\r\n    buttonProps() {\r\n      const result = new Set();\r\n      result.add('wide');\r\n      result.add('secondary');\r\n      result.add('large');\r\n\r\n      if (typeof this.controls === 'object' && this.controls.forEach) {\r\n        this.controls.forEach(c => {\r\n          if (c.required && !c.value) {\r\n            result.add('disabled');\r\n          }\r\n        })\r\n      }\r\n      return [...result];\r\n    },\r\n    isDisabled() {\r\n      if (this.controls && this.controls.length) {\r\n        const textarea = this.controls?.find(c => c.property === 'textarea');\r\n        return !textarea.value;\r\n      } else {\r\n        return true;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(formStore, [\r\n      'runGetComments',\r\n      'runGetForm',\r\n      'runSendForm',\r\n      'runDeleteComment',\r\n      'changeDeleteModalStateWatcher',\r\n      'changeComments',\r\n      'changeForm',\r\n      'changeLoading',\r\n      'changeError',\r\n      'changeActiveCommentId'\r\n    ]),\r\n    ...mapActions(editFormStore, [\r\n      'runGetEditForm',\r\n      'runSendEditForm',\r\n      'changeEditModalStateWatcher',\r\n      'changeEditLoading',\r\n      'changeEditError',\r\n    ]),\r\n    ...mapActions(controlsStore, [\r\n        'changeControls',\r\n        'changeEditControls',\r\n        'changeControlValue',\r\n        'runHints',\r\n        'setHints'\r\n    ]),\r\n    clickEditModalNo() {\r\n      this.changeEditModalStateWatcher();\r\n      this.changeEditLoading(false);\r\n      this.changeEditError('');\r\n    },\r\n    clickEditModalYes() {\r\n      this.runSendEditForm()\r\n        .then(\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError('');\r\n            this.changeEditModalStateWatcher();\r\n            return this.runGetComments();\r\n          },\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError(response.errors[0].message);\r\n          }\r\n        )\r\n        .then(\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError('');\r\n            this.changeComments(response.data.comments);\r\n          },\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        );\r\n    },\r\n    clickDeleteModalNo() {\r\n      this.changeDeleteModalStateWatcher();\r\n    },\r\n    clickDeleteModalYes() {\r\n      this.runDeleteComment(this.activeCommentId)\r\n        .then(\r\n          (response) => {\r\n            return this.runGetComments();\r\n          },\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        )\r\n        .then(\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError('');\r\n            this.changeComments(response.data.comments);\r\n          },\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        );\r\n    },\r\n    clickEdit(commentId) {\r\n      this.runGetEditForm(commentId)\r\n        .then(\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError('');\r\n            this.changeEditControls(response.data.controls);\r\n\r\n          },\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError(response.errors[0].message);\r\n          });\r\n      this.changeEditModalStateWatcher();\r\n    },\r\n    clickDelete(commentId) {\r\n      this.changeActiveCommentId(commentId);\r\n      this.changeDeleteModalStateWatcher();\r\n    },\r\n    input(args) {\r\n      this.changeControlValue(args);\r\n    },\r\n    hints({ control, type, action, value }) {\r\n      if (type === 'get') {\r\n        this.runHints(control, action);\r\n      } else if (type === 'set') {\r\n        this.setHints(control, value);\r\n      }\r\n    },\r\n    clickButton() {\r\n      formStore().runSendForm()\r\n        .then(\r\n          (response) => {\r\n            // this.changeLoading(false);\r\n            // this.changeError('');\r\n            window.location.href = response.data.redirect;\r\n          },\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError(response.errors[0].message);\r\n          });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.runGetComments()\r\n      .then(\r\n        (response) => {\r\n          this.changeLoading(false);\r\n          this.changeError('');\r\n          this.changeComments(response.data.comments || []);\r\n\r\n          \r\n\r\n        this.runGetEditForm(this.comments[0].id)\r\n        .then(\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError('');\r\n            this.changeEditControls(response.data.controls);\r\n\r\n          },\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError(response.errors[0].message);\r\n          });\r\n        },\r\n        (response) => {\r\n          this.changeLoading(false);\r\n          this.changeError(response.errors[0].message);\r\n        });\r\n\r\n    \r\n    this.runGetForm()\r\n      .then(\r\n        (response) => {\r\n          this.changeLoading(false);\r\n          this.changeError('');\r\n          this.changeControls(response.data.controls || []);\r\n        },\r\n        (response) => {\r\n          this.changeLoading(false);\r\n          this.changeError(response.errors[0].message);\r\n        });\r\n  },\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { dataStore } from './stores/data';\r\nimport { formStore } from './stores/form';\r\n\r\nexport class DisciplinaryQuestionDiscussion {\r\n  #store;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options): void {\r\n    this.#store = createPinia();\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run(): void {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'DisciplinaryQuestionDiscussion',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application/>',\r\n      beforeMount() {\r\n        dataStore().data = self.options.data || {};\r\n        dataStore().lang = self.options.lang || {};\r\n        dataStore().actions = self.options.actions || [];\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication(): void {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getFormStore(): Object {\r\n    return formStore;\r\n  }\r\n}\r\n"],"names":["CommentItem","components","ButtonComponent","props","emits","template","methods","formatDate","dateString","date","Date","pad","n","toString","padStart","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","EditForm","ControlChoice","LoaderCircle","MessageComponent","id","String","Number","h3","heading","controls","Array","buttons","type","loading","Boolean","error","input","args","$emit","dataStore","defineStore","state","Math","floor","random","data","lang","actions","formStore","deleteModalStateWatcher","comments","form","activeCommentId","changeDeleteModalStateWatcher","changeError","changeLoading","value","changeComments","changeActiveCommentId","commentId","runGetForm","d","BX","ajax","runComponentAction","getForm","mode","runSendForm","formElem","document","querySelector","formData","FormData","Object","keys","forEach","key","append","sendForm","runGetComments","getComments","runDeleteComment","deleteComment","editFormStore","editLoading","editError","editModalStateWatcher","editForm","changeEditModalStateWatcher","changeEditError","changeEditLoading","runGetEditForm","getEditForm","runSendEditForm","sendEditForm","controlsStore","editControls","changeEditControls","changeControls","changeTextControlValue","control","changeSelectRadioValue","changeSelectDropdownValue","changeDateValue","changeFileValue","uploadFile","changeControlValue","checked","property","substring","toUpperCase","toLowerCase","runHints","action","controller","AbortController","timeoutId","setTimeout","abort","fetch","signal","headers","response","clearTimeout","ok","Error","status","json","result","setHints","errors","message","hints","Application","ModalYesNo","ModalAnyContent","computed","mapState","buttonProps","Set","add","c","required","isDisabled","length","textarea","find","mapActions","clickEditModalNo","clickEditModalYes","then","clickDeleteModalNo","clickDeleteModalYes","clickEdit","clickDelete","clickButton","window","location","href","redirect","mounted","DisciplinaryQuestionDiscussion","rootNode","options","createPinia","self","BitrixVue","createApp","name","beforeMount","use","mount","setActivePinia"],"mappings":"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"}