{"version":3,"file":"application.bundle.js","sources":["../src/components/comment.js","../src/components/edit-form.js","../src/stores/data.js","../src/stores/form.js","../src/stores/edit-form.js","../src/stores/controls.js","../src/components/application.js","../src/loader.js"],"sourcesContent":["import './comment.css';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\n\r\nexport const CommentItem = {\r\n    components: {\r\n        ButtonComponent\r\n    },\r\n    props: ['comment'],\r\n    emits: ['clickEdit', 'clickDelete'],\r\n    template: `\r\n        <div class=\"twpx-comment\">\r\n            <div class=\"twpx-comment-wrapper\">\r\n                <div class=\"twpx-comment__text\" v-if=\"comment.text\">\r\n                    {{ comment.text }}\r\n                </div>\r\n                <div class=\"twpx-comment__buttons\">\r\n                    <ButtonComponent :text=\"Edit\" :props=\"['icon', 'edit', 'medium']\" @clickButton=\"$emit('clickEdit', comment.id)\" />\r\n                    <ButtonComponent :text=\"Delete\" :props=\"['icon', 'delete', 'medium']\" @clickButton=\"$emit('clickDelete', comment.id)\" />\r\n                </div>\r\n            </div>\r\n            <div class=\"twpx-comment__data\">\r\n                <div class=\"twpx-comment__user-img\" v-if=\"comment.user.img\">\r\n                    <a :href=\"comment.user.href\">\r\n                        <img :src=\"comment.user.img\" alt />\r\n                    </a>\r\n                </div>\r\n                <div class=\"twpx-comment__info\">\r\n                    <div class=\"twpx-comment__user-name\" v-if=\"comment.user.name\">\r\n                        <a :href=\"comment.user.href\">{{ comment.user.name }}</a>\r\n                    </div>\r\n                    <div class=\"twpx-comment__time\" v-if=\"comment.user.create\">{{ formatDate(comment.user.create) }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    methods: {\r\n        formatDate(dateString) {\r\n            const date = new Date(dateString);\r\n            const pad = (n) => n.toString().padStart(2, '0');\r\n            return (\r\n                pad(date.getDate()) +\r\n                '.' +\r\n                pad(date.getMonth() + 1) +\r\n                '.' +\r\n                date.getFullYear() +\r\n                ' ' +\r\n                pad(date.getHours()) +\r\n                ':' +\r\n                pad(date.getMinutes()) +\r\n                ':' +\r\n                pad(date.getSeconds())\r\n            );\r\n        }\r\n    }\r\n}","import './edit-form.css';\r\n\r\nimport { ControlChoice } from 'local.vue-components.control-choice';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\r\nimport { MessageComponent } from 'local.vue-components.message-component';\r\n\r\nexport const EditForm = {\r\n    components: {\r\n        ControlChoice,\r\n        ButtonComponent,\r\n        LoaderCircle,\r\n        MessageComponent\r\n    },\r\n    props: {\r\n        id: [String, Number],\r\n        h3: String,\r\n        heading: String,\r\n        controls: Array,\r\n        buttons: {\r\n            type: Array,\r\n            default() {\r\n                return [];\r\n            }\r\n        },\r\n        loading: Boolean,\r\n        error: String\r\n    },\r\n    emits: ['input', 'clickYes', 'clickNo'],\r\n    template: `\r\n        <LoaderCircle :show=\"loading\" />\r\n\r\n        <MessageComponent v-if=\"error\" type=\"error\" size=\"big\" :message=\"error\" />\r\n\r\n        <form action=\"\" :id=\"id + 'EditForm'\" v-if=\"!loading && !error\">\r\n            <div class=\"twpx-comment-edit-form\">\r\n                <h3>{{ h3 }}</h3>\r\n                <div class=\"twpx-comment-edit-form__body\">\r\n                    <div class=\"twpx-comment-edit-form__heading\">{{ heading }}</div>\r\n                    <ControlChoice v-for=\"control in controls\" :key=\"control.id\" :control=\"control\" @input=\"input\"></ControlChoice>\r\n                </div>\r\n                <div class=\"twpx-comment-edit-form__buttons\">\r\n                    <ButtonComponent :text=\"buttons[0]\" :props=\"['gray-color', 'large']\" @clickButton=\"$emit('clickNo')\" />\r\n                    <ButtonComponent :text=\"buttons[1]\" :props=\"['secondary', 'large']\" @clickButton=\"$emit('clickYes')\" />\r\n                </div>\r\n            </div>\r\n        </form>\r\n    `,\r\n    methods: {\r\n        formatDate(dateString) {\r\n            const date = new Date(dateString);\r\n            const pad = (n) => n.toString().padStart(2, '0');\r\n            return (\r\n                pad(date.getDate()) +\r\n                '.' +\r\n                pad(date.getMonth() + 1) +\r\n                '.' +\r\n                date.getFullYear() +\r\n                ' ' +\r\n                pad(date.getHours()) +\r\n                ':' +\r\n                pad(date.getMinutes()) +\r\n                ':' +\r\n                pad(date.getSeconds())\r\n            );\r\n        }\r\n    }\r\n}","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const dataStore = defineStore('data', {\r\n  state: () => ({\r\n    id: `id${Math.floor(Math.random() * 1000)}`,\r\n    data: {},\r\n    lang: {},\r\n    actions: []\r\n  }),\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\nimport { dataStore } from './data';\r\n\r\nexport const formStore = defineStore('form', {\r\n  state: () => ({\r\n    loading: false,\r\n    error: '',\r\n    deleteModalStateWatcher: false,\r\n    comments: [],\r\n    form: {},\r\n    activeCommentId: ''\r\n  }),\r\n  actions: {\r\n    changeDeleteModalStateWatcher() {\r\n      this.deleteModalStateWatcher = !this.deleteModalStateWatcher;\r\n    },\r\n    changeError(error) {\r\n      this.error = error;\r\n    },\r\n    changeLoading(value) {\r\n      this.loading = value;\r\n    },\r\n    changeComments(comments) {\r\n      this.comments = comments;\r\n    },\r\n    changeForm(obj) {\r\n      this.form.heading = obj.heading;\r\n      this.form.button = obj.button;\r\n    },\r\n    changeActiveCommentId(commentId) {\r\n      this.activeCommentId = commentId;\r\n    },\r\n    runGetForm() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: {\r\n            heading: 'Написать комментарий',\r\n            controls: [\r\n              {\r\n                \"id\": \"id1-1\",\r\n                \"property\": \"textarea\",\r\n                \"name\": \"COMMENT\",\r\n                \"label\": \"Комментарий\",\r\n                \"value\": \"\",\r\n                \"required\": true,\r\n                \"disabled\": false\r\n              }\r\n            ],\r\n            button: 'Отправить'\r\n          }\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'getForm error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });\r\n\r\n      return BX.ajax.runComponentAction(d.actions.getForm[0], d.actions.getForm[1], {\r\n        mode: 'class',\r\n        data: d.data,\r\n      });\r\n    },\r\n    runSendForm() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      const formElem = document.querySelector(`#${dataStore().id} form`);\r\n      const formData = new FormData(formElem);\r\n      \r\n      Object.keys(d.data).forEach(key => {\r\n        formData.append(key, d.data[key]);\r\n      });\r\n\r\n      let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: {\r\n            redirect: '/'\r\n          }\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'sendForm error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          console.log('io')\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });\r\n\r\n      return BX.ajax.runComponentAction(d.actions.sendForm[0], d.actions.sendForm[1], {\r\n        mode: 'class',\r\n        data: formData,\r\n      });\r\n    },\r\n    runGetComments() {\r\n      this.error = '';\r\n      this.loading = true;\r\n      const d = dataStore();\r\n\r\n      let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: {\r\n            comments: [\r\n              {\r\n                id: 'comment1',\r\n                text: 'Саморегулируемая организация аудиторов Ассоциация «Содружество» (сокращенное название - СРО ААС) создано по инициативе Международной общественной организации «Ассоциация бухгалтеров и аудиторов «Содружество» (АБиАС). АБиАС была образована в 1989 году и стала общеизвестным и признанным в России профессиональным объединением ученых и практиков бухгалтерского учета, аудита и экономического анализа.',\r\n                user: {\r\n                  img: '/local/components/twinpx/disciplinar.comments/images/nopic.svg',\r\n                  name: 'Иванов Иван Иванович',\r\n                  url: \"/person/19891/\"\r\n                },\r\n                create: \"2025-07-22T20:09:26+03:00\",\r\n              },\r\n              {\r\n                id: 'comment2',\r\n                text: 'Саморегулируемая организация аудиторов Ассоциация «Содружество» (сокращенное название - СРО ААС) создано по инициативе Международной общественной организации «Ассоциация бухгалтеров и аудиторов «Содружество» (АБиАС). АБиАС была образована в 1989 году и стала общеизвестным и признанным в России профессиональным объединением ученых и практиков бухгалтерского учета, аудита и экономического анализа.',\r\n                user: {\r\n                  img: '/local/components/twinpx/disciplinar.comments/images/nopic.svg',\r\n                  name: 'Петров Пётр Петрович',\r\n                  url: \"/person/19891/\"\r\n                },\r\n                create: \"2025-07-22T20:09:26+03:00\",\r\n              },\r\n              {\r\n                id: 'comment3',\r\n                text: 'Саморегулируемая организация аудиторов Ассоциация «Содружество» (сокращенное название - СРО ААС) создано по инициативе Международной общественной организации «Ассоциация бухгалтеров и аудиторов «Содружество» (АБиАС). АБиАС была образована в 1989 году и стала общеизвестным и признанным в России профессиональным объединением ученых и практиков бухгалтерского учета, аудита и экономического анализа.',\r\n                user: {\r\n                  img: '/local/components/twinpx/disciplinar.comments/images/nopic.svg',\r\n                  name: 'Савельев Савелий Савельевич',\r\n                  url: \"/person/19891/\"\r\n                },\r\n                create: \"2025-07-22T20:09:26+03:00\",\r\n              }\r\n            ]\r\n          }\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'getComments error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });\r\n\r\n      return BX.ajax.runComponentAction(d.actions.getComments[0], d.actions.getComments[1], {\r\n        mode: 'class',\r\n        data: d.data,\r\n      });\r\n    },\r\n    runDeleteComment(commentId) {\r\n      this.error = '';\r\n      this.loading = true;\r\n      this.changeDeleteModalStateWatcher();\r\n      const d = dataStore();\r\n\r\n      let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: true\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'deleteComment error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });\r\n\r\n      return BX.ajax.runComponentAction(d.actions.sendEditForm[0], d.actions.sendEditForm[1], {\r\n        mode: 'class',\r\n        data: {...d.data, commentId},\r\n      });\r\n    }\r\n  },\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\nimport { dataStore } from './data';\r\n\r\nexport const editFormStore = defineStore('edit-form', {\r\n  state: () => ({\r\n    editLoading: false,\r\n    editError: '',\r\n    editModalStateWatcher: false,\r\n    editForm: {}\r\n  }),\r\n  actions: {\r\n    changeEditModalStateWatcher() {\r\n      this.editModalStateWatcher = !this.editModalStateWatcher;\r\n    },\r\n    changeEditError(error) {\r\n      this.editError = error;\r\n    },\r\n    changeEditLoading(value) {\r\n      this.editLoading = value;\r\n    },\r\n    changeEditForm(obj) {\r\n      this.editForm.heading = obj.heading;\r\n      this.editForm.buttons = obj.buttons;\r\n    },\r\n    runGetEditForm(commentId) {\r\n      this.editError = '';\r\n      this.editLoading = true;\r\n      const d = dataStore();\r\n      const data = {...d.data, commentId};\r\n\r\n\r\n      let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: {\r\n            heading: 'Комментарий',\r\n            controls: [\r\n              {\r\n                \"id\": \"editHidden\",\r\n                \"property\": \"hidden\",\r\n                \"name\": \"ID\",\r\n                \"value\": \"789\",\r\n              },\r\n              {\r\n                \"id\": \"id1-1\",\r\n                \"property\": \"textarea\",\r\n                \"name\": \"COMMENT\",\r\n                \"label\": \"Комментарий\",\r\n                \"value\": \"Опишите, пожалуйста, ваш вопрос, проблему или пожелание максимально подробно. Укажите, где и на каком этапе возникла сложность, что вы уже пробовали сделать, и какие сообщения (если были) вы получили. Чем больше информации вы предоставите, тем быстрее и точнее мы сможем вам помочь. При необходимости можно прикрепить скриншоты или ссылки. Мы внимательно прочтём каждое сообщение и постараемся дать вам исчерпывающий ответ.\",\r\n                \"required\": true,\r\n                \"disabled\": false\r\n              }\r\n            ],\r\n            buttons: [\r\n              'Отменить',\r\n              'Сохранить'\r\n            ]\r\n          }\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'getEditForm error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });\r\n\r\n      return BX.ajax.runComponentAction(d.actions.getEditForm[0], d.actions.getEditForm[1], {\r\n        mode: 'class',\r\n        data,\r\n      });\r\n    },\r\n    runSendEditForm() {\r\n      this.editError = '';\r\n      this.editLoading = true;\r\n      const d = dataStore();\r\n\r\n      const formElem = document.querySelector(`#${dataStore().id}EditForm`);\r\n      const formData = new FormData(formElem);\r\n      \r\n      Object.keys(d.data).forEach(key => {\r\n        formData.append(key, d.data[key]);\r\n      });\r\n\r\n      let response;\r\n\r\n      return new Promise((resolve, reject) => {\r\n        response = {\r\n          status: 'success',\r\n          data: true\r\n        }\r\n\r\n        // response = {\r\n        //   status: 'error',\r\n        //   data: {},\r\n        //   errors: [\r\n        //     {\r\n        //       message: 'sendEditForm error'\r\n        //     }\r\n        //   ]\r\n        // };\r\n\r\n        setTimeout(() => {\r\n          resolve(response);\r\n          // reject(response);\r\n        }, 1000);\r\n      });\r\n\r\n      return BX.ajax.runComponentAction(d.actions.sendEditForm[0], d.actions.sendEditForm[1], {\r\n        mode: 'class',\r\n        data: formData,\r\n      });\r\n    }\r\n  },\r\n});\r\n","import { defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const controlsStore = defineStore('controls', {\r\n  state: () => ({\r\n    controls: [],\r\n    editControls: []\r\n  }),\r\n  actions: {\r\n    changeEditControls(controls) {\r\n        this.editControls = controls;\r\n    },\r\n    changeControls(controls) {\r\n      this.controls = controls;\r\n    },\r\n    changeTextControlValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeSelectRadioValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeSelectDropdownValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeDateValue({ control, value }) {\r\n        control.value = value;\r\n    },\r\n    changeFileValue({ control, value }) {\r\n        control.value = value;\r\n        if (control.type === 'upload') {\r\n        this.uploadFile(control, value);\r\n        }\r\n    },\r\n    changeControlValue({ control, value, checked }) {\r\n        switch (control.property) {\r\n        case 'text':\r\n        case 'textarea':\r\n        case 'hint':\r\n        case 'tel':\r\n        case 'email':\r\n            this.changeTextControlValue({ control, value });\r\n            break;\r\n        // case 'multiselect':\r\n        //   commit('changeMultiselectValue', { control, value, checked });\r\n        //   break;\r\n        // case 'checkbox':\r\n        //   commit('changeCheckboxValue', { control, checked });\r\n        //   break;\r\n        case 'select':\r\n            this[\r\n            `changeSelect${control.type\r\n                .substring(0, 1)\r\n                .toUpperCase()}${control.type.substring(1).toLowerCase()}Value`\r\n            ]({ control, value });\r\n            break;\r\n        case 'file':\r\n            this.changeFileValue({ control, value });\r\n            break;\r\n        case 'date':\r\n            this.changeDateValue({ control, value });\r\n            break;\r\n        // case 'color':\r\n        //   commit('changeColorValue', { control, value });\r\n        //   break;\r\n        }\r\n    },\r\n    async runHints(control, action) {\r\n        try {\r\n        // Создаем AbortController для возможности отмены запроса\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 20000); // 20 секунд таймаут\r\n\r\n        const response = await fetch(action, {\r\n            signal: controller.signal,\r\n            headers: {\r\n            'Content-Type': 'application/json',\r\n            },\r\n        });\r\n\r\n        clearTimeout(timeoutId);\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const result = await response.json();\r\n\r\n        if (result.status === 'success' && result.data) {\r\n            this.setHints(control, result.data);\r\n        } else if (result.errors) {\r\n            this.error = result.errors[0]?.message\r\n        } else {\r\n            this.error = 'Invalid response format';\r\n        }\r\n        } catch (error) {\r\n        this.error = error?.message\r\n        }\r\n    },\r\n    setHints(control, value) {\r\n        control.hints = value;\r\n    },\r\n  }\r\n});","import './application.css';\r\n\r\nimport { ControlChoice } from 'local.vue-components.control-choice';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\nimport { LoaderCircle } from 'local.vue-components.loader-circle';\r\nimport { MessageComponent } from 'local.vue-components.message-component';\r\nimport { ModalYesNo } from 'local.vue-components.modal-yes-no';\r\nimport { ModalAnyContent } from 'local.vue-components.modal-any-content';\r\n\r\nimport { CommentItem } from './comment.js';\r\nimport { EditForm } from './edit-form.js';\r\n\r\nimport { mapState, mapActions } from 'ui.vue3.pinia';\r\nimport { dataStore } from '../stores/data.js';\r\nimport { formStore } from '../stores/form.js';\r\nimport { editFormStore } from '../stores/edit-form.js';\r\nimport { controlsStore } from '../stores/controls.js';\r\n\r\nexport const Application = {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: {\r\n    ControlChoice,\r\n    ButtonComponent,\r\n    LoaderCircle,\r\n    MessageComponent,\r\n    ModalYesNo,\r\n    ModalAnyContent,\r\n    CommentItem,\r\n    EditForm\r\n  },\r\n  // language=Vue\r\n  template: `\r\n  <div class=\"twpx-dc-question-discussion\" :id=\"id\">\r\n\r\n    <LoaderCircle :show=\"loading\" />\r\n\r\n    <MessageComponent v-if=\"error\" type=\"error\" size=\"big\" :message=\"error\" />\r\n\r\n    <ModalYesNo\r\n      :heading=\"lang.deleteModal.heading\"\r\n      :text=\"lang.deleteModal.text\"\r\n      :yes=\"lang.deleteModal.yes\"\r\n      :no=\"lang.deleteModal.no\"\r\n      :buttons=\"{\r\n        yes: {\r\n          props: ['danger', 'large']\r\n        },\r\n        no: {\r\n          props: ['gray-color', 'large']\r\n        }\r\n      }\"\r\n      :stateWatcher=\"deleteModalStateWatcher\"\r\n      @clickYes=\"clickDeleteModalYes\"\r\n      @clickNo=\"clickDeleteModalNo\"\r\n    />\r\n\r\n    <ModalAnyContent :stateWatcher=\"editModalStateWatcher\">\r\n      <EditForm\r\n        :id=\"id\"\r\n        :h3=\"lang.editModal.heading\"\r\n        :heading=\"editForm.heading\"\r\n        :controls=\"editControls\"\r\n        :buttons=\"editForm.buttons\"\r\n        :loading=\"editLoading\"\r\n        :error=\"editError\"\r\n        @input=\"input\"\r\n        @clickNo=\"clickEditModalNo\"\r\n        @clickYes=\"clickEditModalYes\"\r\n      />\r\n    </ModalAnyContent>\r\n\r\n    <div class=\"twpx-dc-question-discussion__grid\">\r\n      <div class=\"twpx-dc-question-discussion__comments\" v-if=\"comments.length\">\r\n        <h3>{{ lang.heading }}</h3>\r\n        <CommentItem v-for=\"comment in comments\" :comment=\"comment\" @clickEdit=\"clickEdit\" @clickDelete=\"clickDelete\" />\r\n      </div>\r\n      <div class=\"twpx-dc-question-discussion__form\" v-if=\"form.heading && controls.length && form.button\">\r\n        <form action=\"\">\r\n          <div class=\"twpx-dc-question-discussion__form-wrapper\" v-if=\"!loading\">\r\n\r\n            <h3>{{ form.heading }}</h3>\r\n            <ControlChoice v-for=\"control in controls\" :key=\"control.id\" :control=\"control\" @input=\"input\"></ControlChoice>\r\n            <ButtonComponent :text=\"form.button\" :props=\"buttonProps\" @clickButton=\"clickButton\" />\r\n\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\t`,\r\n  computed: {\r\n    ...mapState(dataStore, ['lang', 'id']),\r\n    ...mapState(formStore, [\r\n      'loading',\r\n      'error',\r\n      'comments',\r\n      'form',\r\n      'deleteModalStateWatcher',\r\n      'activeCommentId'\r\n    ]),\r\n    ...mapState(editFormStore, [\r\n      'editLoading',\r\n      'editError',\r\n      'editForm',\r\n      'editModalStateWatcher'\r\n    ]),\r\n    ...mapState(controlsStore, [\r\n      'controls',\r\n      'editControls'\r\n    ]),\r\n    buttonProps() {\r\n      const result = new Set();\r\n      result.add('wide');\r\n      result.add('secondary');\r\n      result.add('large');\r\n\r\n      if (typeof this.controls === 'object' && this.controls.forEach) {\r\n        this.controls.forEach(c => {\r\n          if (c.required && !c.value) {\r\n            result.add('disabled');\r\n          }\r\n        })\r\n      }\r\n      return [...result];\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(formStore, [\r\n      'runGetComments',\r\n      'runGetForm',\r\n      'runSendForm',\r\n      'runGetEditForm',\r\n      'runSendEditForm',\r\n      'runDeleteComment',\r\n      'changeDeleteModalStateWatcher',\r\n      'changeComments',\r\n      'changeForm',\r\n      'changeEditForm',\r\n      'changeLoading',\r\n      'changeError',\r\n      'changeActiveCommentId'\r\n    ]),\r\n    ...mapActions(editFormStore, [\r\n      'runGetEditForm',\r\n      'runSendEditForm',\r\n      'changeEditModalStateWatcher',\r\n      'changeEditForm',\r\n      'changeEditLoading',\r\n      'changeEditError',\r\n    ]),\r\n    ...mapActions(controlsStore, [\r\n        'changeControls',\r\n        'changeEditControls',\r\n        'changeControlValue',\r\n        'runHints',\r\n        'setHints'\r\n    ]),\r\n    clickEditModalNo() {\r\n      this.changeEditModalStateWatcher();\r\n      this.changeEditLoading(false);\r\n      this.changeEditError('');\r\n    },\r\n    clickEditModalYes() {\r\n      this.runSendEditForm()\r\n        .then(\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError('');\r\n            this.changeEditModalStateWatcher();\r\n            return this.runGetComments();\r\n          },\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError(response.errors[0].message);\r\n          }\r\n        )\r\n        .then(\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError('');\r\n            this.changeComments(response.data.comments);\r\n          },\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        );\r\n    },\r\n    clickDeleteModalNo() {\r\n      this.changeDeleteModalStateWatcher();\r\n    },\r\n    clickDeleteModalYes() {\r\n      this.runDeleteComment(this.activeCommentId)\r\n        .then(\r\n          (response) => {\r\n            return this.runGetComments();\r\n          },\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        )\r\n        .then(\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError('');\r\n            this.changeComments(response.data.comments);\r\n          },\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError(response.errors[0].message);\r\n          }\r\n        );\r\n    },\r\n    clickEdit(commentId) {\r\n      this.runGetEditForm(commentId)\r\n        .then(\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError('');\r\n            this.changeEditForm(response.data);\r\n            this.changeEditControls(response.data.controls);\r\n\r\n          },\r\n          (response) => {\r\n            this.changeEditLoading(false);\r\n            this.changeEditError(response.errors[0].message);\r\n          });\r\n      this.changeEditModalStateWatcher();\r\n    },\r\n    clickDelete(commentId) {\r\n      this.changeActiveCommentId(commentId);\r\n      this.changeDeleteModalStateWatcher();\r\n    },\r\n    input(args) {\r\n      this.changeControlValue(args);\r\n    },\r\n    hints({ control, type, action, value }) {\r\n      if (type === 'get') {\r\n        this.runHints(control, action);\r\n      } else if (type === 'set') {\r\n        this.setHints(control, value);\r\n      }\r\n    },\r\n    clickButton() {\r\n      formStore().runSendForm()\r\n        .then(\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError('');\r\n            window.location.href = response.data.redirect;\r\n          },\r\n          (response) => {\r\n            this.changeLoading(false);\r\n            this.changeError(response.errors[0].message);\r\n          });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.runGetComments()\r\n      .then(\r\n        (response) => {\r\n          this.changeLoading(false);\r\n          this.changeError('');\r\n          this.changeComments(response.data.comments);\r\n        },\r\n        (response) => {\r\n          this.changeLoading(false);\r\n          this.changeError(response.errors[0].message);\r\n        });\r\n\r\n    \r\n    this.runGetForm()\r\n      .then(\r\n        (response) => {\r\n          this.changeLoading(false);\r\n          this.changeError('');\r\n          this.changeForm(response.data);\r\n          this.changeControls(response.data.controls);\r\n        },\r\n        (response) => {\r\n          this.changeLoading(false);\r\n          this.changeError(response.errors[0].message);\r\n        });\r\n  },\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { Application } from './components/application';\r\nimport { createPinia, setActivePinia } from 'ui.vue3.pinia';\r\nimport { dataStore } from './stores/data';\r\nimport { formStore } from './stores/form';\r\n\r\nexport class DisciplinaryQuestionDiscussion {\r\n  #store;\r\n  #rootNode;\r\n  #application;\r\n\r\n  constructor(rootNode, options): void {\r\n    this.#store = createPinia();\r\n    this.#rootNode = document.querySelector(rootNode);\r\n    this.options = options;\r\n  }\r\n\r\n  run(): void {\r\n    const self = this;\r\n\r\n    this.#application = BitrixVue.createApp({\r\n      name: 'DisciplinaryQuestionDiscussion',\r\n      components: {\r\n        Application,\r\n      },\r\n      template: '<Application/>',\r\n      beforeMount() {\r\n        dataStore().data = self.options.data || {};\r\n        dataStore().lang = self.options.lang || {};\r\n        dataStore().actions = self.options.actions || [];\r\n      },\r\n    });\r\n\r\n    this.#application.use(this.#store);\r\n    this.#application.mount(this.#rootNode);\r\n  }\r\n\r\n  initStorageBeforeStartApplication(): void {\r\n    setActivePinia(this.#store);\r\n  }\r\n\r\n  getFormStore(): Object {\r\n    return formStore;\r\n  }\r\n}\r\n"],"names":["CommentItem","components","ButtonComponent","props","emits","template","methods","formatDate","dateString","date","Date","pad","n","toString","padStart","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","EditForm","ControlChoice","LoaderCircle","MessageComponent","id","String","Number","h3","heading","controls","Array","buttons","type","loading","Boolean","error","dataStore","defineStore","state","Math","floor","random","data","lang","actions","formStore","deleteModalStateWatcher","comments","form","activeCommentId","changeDeleteModalStateWatcher","changeError","changeLoading","value","changeComments","changeForm","obj","button","changeActiveCommentId","commentId","runGetForm","d","response","Promise","resolve","reject","status","setTimeout","BX","ajax","runComponentAction","getForm","mode","runSendForm","formElem","document","querySelector","formData","FormData","Object","keys","forEach","key","append","redirect","console","log","sendForm","runGetComments","text","user","img","name","url","create","getComments","runDeleteComment","sendEditForm","editFormStore","editLoading","editError","editModalStateWatcher","editForm","changeEditModalStateWatcher","changeEditError","changeEditLoading","changeEditForm","runGetEditForm","getEditForm","runSendEditForm","controlsStore","editControls","changeEditControls","changeControls","changeTextControlValue","control","changeSelectRadioValue","changeSelectDropdownValue","changeDateValue","changeFileValue","uploadFile","changeControlValue","checked","property","substring","toUpperCase","toLowerCase","runHints","action","controller","AbortController","timeoutId","abort","fetch","signal","headers","clearTimeout","ok","Error","json","result","setHints","errors","message","hints","Application","ModalYesNo","ModalAnyContent","computed","mapState","buttonProps","Set","add","c","required","mapActions","clickEditModalNo","clickEditModalYes","then","clickDeleteModalNo","clickDeleteModalYes","clickEdit","clickDelete","input","args","clickButton","window","location","href","mounted","DisciplinaryQuestionDiscussion","rootNode","options","createPinia","self","BitrixVue","createApp","beforeMount","use","mount","setActivePinia"],"mappings":"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"}