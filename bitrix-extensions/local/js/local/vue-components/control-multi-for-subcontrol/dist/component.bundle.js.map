{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import './component.css';\r\n\r\nimport { ControlComponent } from 'local.vue-components.control-component';\r\n\r\nexport const ControlMultiForSubcontrol = {\r\n  data() {\r\n    return {\r\n      multi: 1,\r\n      copy: {},\r\n    };\r\n  },\r\n  props: ['parent'],\r\n  components: {\r\n    ControlComponent,\r\n  },\r\n  // language=Vue\r\n  template: `\r\n\t\t<div>\r\n      <div v-for=\"(addedControl, index) in parent.multi\" :key=\"addedControl.id\">\r\n        <div class=\"twpx-form-control-multi\">\r\n\r\n          <div class=\"btn-delete\" @click.prevent=\"remove(index)\" v-if=\"controlsLength > 1\"></div>\r\n\r\n          <div class=\"twpx-form-control-sub\">\r\n\r\n            <div class=\"twpx-form-control-sub-item\">\r\n\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n                <g id=\"copy-success\" transform=\"translate(-746 -382)\">\r\n                  <path id=\"Vector\" d=\"M14,9.1V4.9C14,1.4,12.6,0,9.1,0H4.9C1.4,0,0,1.4,0,4.9V6H3.1C6.6,6,8,7.4,8,10.9V14H9.1C12.6,14,14,12.6,14,9.1Z\" transform=\"translate(754 384)\" fill=\"none\" stroke=\"#154d8a\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\r\n                  <path id=\"Vector-2\" data-name=\"Vector\" d=\"M14,9.1V4.9C14,1.4,12.6,0,9.1,0H4.9C1.4,0,0,1.4,0,4.9V9.1C0,12.6,1.4,14,4.9,14H9.1C12.6,14,14,12.6,14,9.1Z\" transform=\"translate(748 390)\" fill=\"none\" stroke=\"#154d8a\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\r\n                  <path id=\"Vector-3\" data-name=\"Vector\" d=\"M0,1.95,1.95,3.9,5.84,0\" transform=\"translate(752.08 395.05)\" fill=\"none\" stroke=\"#154d8a\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\r\n                  <path id=\"Vector-4\" data-name=\"Vector\" d=\"M0,0H24V24H0Z\" transform=\"translate(746 382)\" fill=\"none\" opacity=\"0\"/>\r\n                </g>\r\n              </svg>\r\n\r\n              <ControlComponent\r\n                :control=\"addedControl\"\r\n                @input=\"$emit('input', $event)\"\r\n                @focus=\"$emit('focus', $event)\"\r\n                @blur=\"$emit('blur', $event)\"\r\n                @enter=\"$emit('enter', $event)\"\r\n                @hints=\"$emit('hints', $event)\"\r\n              />\r\n\r\n            </div>\r\n            \r\n          </div>          \r\n\r\n        </div>\r\n\r\n        <hr>\r\n\r\n      </div>\r\n      <div class=\"twpx-form-control-sub-btn btn btn-success btn-md\" :class=\"{'btn-disabled': isDisabled}\" @click.prevent=\"clickAddButton\">Добавить</div>\r\n    </div>\r\n\t`,\r\n  emits: [\r\n    'create',\r\n    'add',\r\n    'remove',\r\n    'input',\r\n    'focus',\r\n    'blur',\r\n    'enter',\r\n    'hints',\r\n  ],\r\n  computed: {\r\n    controlsLength() {\r\n      if (\r\n        this.parent.multi &&\r\n        typeof this.parent.multi === 'object' &&\r\n        this.parent.multi.length !== undefined\r\n      ) {\r\n        return this.parent.multi.length;\r\n      }\r\n      return 0;\r\n    },\r\n    isDisabled() {\r\n      return this.controlsLength >= this.multi;\r\n    },\r\n  },\r\n  methods: {\r\n    clickAddButton() {\r\n      this.add();\r\n    },\r\n    add(value) {\r\n      if (this.isDisabled) return;\r\n\r\n      let copy = JSON.parse(JSON.stringify(this.copy));\r\n      \r\n      if (value) {\r\n        copy.value = value;\r\n      }\r\n\r\n      this.$emit('add', {\r\n        parent: this.parent,\r\n        add: copy,\r\n      });\r\n    },\r\n    remove(index) {\r\n      this.$emit('remove', { parent: this.parent, index });\r\n    },\r\n  },\r\n  beforeMount() {\r\n    if (this.parent.property === 'multi') return;\r\n    \r\n    this.multi = this.parent.multi;\r\n\r\n    this.copy = JSON.parse(JSON.stringify(this.parent));\r\n    delete this.copy.multi;\r\n    this.copy.value = '';\r\n\r\n    this.$emit('create', { parent: this.parent });\r\n\r\n    if (Array.isArray(this.parent.value) && this.parent.value.length > 0) {\r\n      this.parent.value.forEach(v => {\r\n        this.add(v);\r\n      })\r\n      this.parent.value = [];\r\n    } else {\r\n      this.add();\r\n    }\r\n  },\r\n};\r\n"],"names":["ControlMultiForSubcontrol","data","multi","copy","props","components","ControlComponent","template","emits","computed","controlsLength","parent","length","undefined","isDisabled","methods","clickAddButton","add","value","JSON","parse","stringify","$emit","remove","index","beforeMount","property","Array","isArray","forEach","v"],"mappings":";;;;;MAIaA,yBAAyB,GAAG;IACvCC,IAAI,kBAAG;MACL,OAAO;QACLC,KAAK,EAAE,CAAC;QACRC,IAAI,EAAE;OACP;KACF;IACDC,KAAK,EAAE,CAAC,QAAQ,CAAC;IACjBC,UAAU,EAAE;MACVC,gBAAgB,EAAhBA;KACD;;IAEDC,QAAQ,2tEAwCR;IACAC,KAAK,EAAE,CACL,QAAQ,EACR,KAAK,EACL,QAAQ,EACR,OAAO,EACP,OAAO,EACP,MAAM,EACN,OAAO,EACP,OAAO,CACR;IACDC,QAAQ,EAAE;MACRC,cAAc,4BAAG;QACf,IACE,IAAI,CAACC,MAAM,CAACT,KAAK,IACjB,uBAAO,IAAI,CAACS,MAAM,CAACT,KAAK,MAAK,QAAQ,IACrC,IAAI,CAACS,MAAM,CAACT,KAAK,CAACU,MAAM,KAAKC,SAAS,EACtC;UACA,OAAO,IAAI,CAACF,MAAM,CAACT,KAAK,CAACU,MAAM;;QAEjC,OAAO,CAAC;OACT;MACDE,UAAU,wBAAG;QACX,OAAO,IAAI,CAACJ,cAAc,IAAI,IAAI,CAACR,KAAK;;KAE3C;IACDa,OAAO,EAAE;MACPC,cAAc,4BAAG;QACf,IAAI,CAACC,GAAG,EAAE;OACX;MACDA,GAAG,eAACC,KAAK,EAAE;QACT,IAAI,IAAI,CAACJ,UAAU,EAAE;QAErB,IAAIX,IAAI,GAAGgB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAAC,IAAI,CAAClB,IAAI,CAAC,CAAC;QAEhD,IAAIe,KAAK,EAAE;UACTf,IAAI,CAACe,KAAK,GAAGA,KAAK;;QAGpB,IAAI,CAACI,KAAK,CAAC,KAAK,EAAE;UAChBX,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBM,GAAG,EAAEd;SACN,CAAC;OACH;MACDoB,MAAM,kBAACC,KAAK,EAAE;QACZ,IAAI,CAACF,KAAK,CAAC,QAAQ,EAAE;UAAEX,MAAM,EAAE,IAAI,CAACA,MAAM;UAAEa,KAAK,EAALA;SAAO,CAAC;;KAEvD;IACDC,WAAW,yBAAG;MAAA;MACZ,IAAI,IAAI,CAACd,MAAM,CAACe,QAAQ,KAAK,OAAO,EAAE;MAEtC,IAAI,CAACxB,KAAK,GAAG,IAAI,CAACS,MAAM,CAACT,KAAK;MAE9B,IAAI,CAACC,IAAI,GAAGgB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAAC,IAAI,CAACV,MAAM,CAAC,CAAC;MACnD,OAAO,IAAI,CAACR,IAAI,CAACD,KAAK;MACtB,IAAI,CAACC,IAAI,CAACe,KAAK,GAAG,EAAE;MAEpB,IAAI,CAACI,KAAK,CAAC,QAAQ,EAAE;QAAEX,MAAM,EAAE,IAAI,CAACA;OAAQ,CAAC;MAE7C,IAAIgB,KAAK,CAACC,OAAO,CAAC,IAAI,CAACjB,MAAM,CAACO,KAAK,CAAC,IAAI,IAAI,CAACP,MAAM,CAACO,KAAK,CAACN,MAAM,GAAG,CAAC,EAAE;QACpE,IAAI,CAACD,MAAM,CAACO,KAAK,CAACW,OAAO,CAAC,UAAAC,CAAC,EAAI;UAC7B,KAAI,CAACb,GAAG,CAACa,CAAC,CAAC;SACZ,CAAC;QACF,IAAI,CAACnB,MAAM,CAACO,KAAK,GAAG,EAAE;OACvB,MAAM;QACL,IAAI,CAACD,GAAG,EAAE;;;EAGhB,CAAC;;;;;;;;"}