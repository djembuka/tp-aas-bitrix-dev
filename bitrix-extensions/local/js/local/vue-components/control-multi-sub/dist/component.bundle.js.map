{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import './component.css';\r\n\r\nimport { ControlComponent } from 'local.vue-components.control-component';\r\nimport { ControlMultiForSubcontrol } from 'local.vue-components.control-multi-for-subcontrol';\r\n\r\nexport const ControlMultiSub = {\r\n  data() {\r\n    return {\r\n      multi: 1,\r\n      copy: {},\r\n    };\r\n  },\r\n  props: ['parent'],\r\n  components: {\r\n    ControlComponent,\r\n    ControlMultiForSubcontrol,\r\n  },\r\n  // language=Vue\r\n  template: `\r\n\t\t<div>\r\n      <div v-for=\"(addedControl, index) in parent.multi\" :key=\"addedControl.id\">\r\n        <div class=\"twpx-form-control-multi\">\r\n\r\n          <div class=\"btn-delete\" @click.prevent=\"remove(index)\" v-if=\"controlsLength > 1\"></div>\r\n\r\n          <ControlComponent :control=\"addedControl\" @input=\"input\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" @hints=\"hints\" @upload=\"upload\" />\r\n\r\n          <div v-for=\"subControl in addedControl.sub\" :key=\"subControl.id\">\r\n\r\n            <hr>\r\n\r\n            <ControlMultiForSubcontrol v-if=\"subControl.multi\" :parent=\"subControl\" @create=\"createSub\" @add=\"addSub\" @remove=\"removeSub\" @input=\"input\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" @hints=\"hints\" />\r\n\r\n            <div v-else class=\"twpx-form-control-sub\">\r\n\r\n              <div class=\"twpx-form-control-sub-item\">\r\n\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n                  <g id=\"copy-success\" transform=\"translate(-746 -382)\">\r\n                    <path id=\"Vector\" d=\"M14,9.1V4.9C14,1.4,12.6,0,9.1,0H4.9C1.4,0,0,1.4,0,4.9V6H3.1C6.6,6,8,7.4,8,10.9V14H9.1C12.6,14,14,12.6,14,9.1Z\" transform=\"translate(754 384)\" fill=\"none\" stroke=\"#154d8a\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\r\n                    <path id=\"Vector-2\" data-name=\"Vector\" d=\"M14,9.1V4.9C14,1.4,12.6,0,9.1,0H4.9C1.4,0,0,1.4,0,4.9V9.1C0,12.6,1.4,14,4.9,14H9.1C12.6,14,14,12.6,14,9.1Z\" transform=\"translate(748 390)\" fill=\"none\" stroke=\"#154d8a\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\r\n                    <path id=\"Vector-3\" data-name=\"Vector\" d=\"M0,1.95,1.95,3.9,5.84,0\" transform=\"translate(752.08 395.05)\" fill=\"none\" stroke=\"#154d8a\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\r\n                    <path id=\"Vector-4\" data-name=\"Vector\" d=\"M0,0H24V24H0Z\" transform=\"translate(746 382)\" fill=\"none\" opacity=\"0\"/>\r\n                  </g>\r\n                </svg>\r\n\r\n                <ControlComponent :control=\"subControl\" @input=\"input\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" @hints=\"hints\" @upload=\"upload\" />\r\n\r\n              </div>\r\n              \r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <hr>\r\n\r\n      </div>\r\n      <div class=\"btn btn-success btn-md\" :class=\"{'btn-disabled': isDisabled}\" @click.prevent=\"add\">Добавить</div>\r\n    </div>\r\n\t`,\r\n  emits: [\r\n    'create',\r\n    'add',\r\n    'remove',\r\n    'input',\r\n    'focus',\r\n    'blur',\r\n    'enter',\r\n    'hints',\r\n    'upload',\r\n  ],\r\n  computed: {\r\n    controlsLength() {\r\n      if (\r\n        this.parent.multi &&\r\n        typeof this.parent.multi === 'object' &&\r\n        this.parent.multi.length !== undefined\r\n      ) {\r\n        return this.parent.multi.length;\r\n      }\r\n      return 0;\r\n    },\r\n    isDisabled() {\r\n      return this.controlsLength >= this.multi;\r\n    },\r\n  },\r\n  methods: {\r\n    createSub(args) {\r\n      this.$emit('create', args);\r\n    },\r\n    addSub(args) {\r\n      this.$emit('add', args);\r\n    },\r\n    removeSub(args) {\r\n      this.$emit('remove', args);\r\n    },\r\n    add() {\r\n      if (!this.isDisabled) {\r\n        this.$emit('add', {\r\n          parent: this.parent,\r\n          add: Object.assign({}, this.copy),\r\n        });\r\n      }\r\n    },\r\n    remove(index) {\r\n      this.$emit('remove', { parent: this.parent, index });\r\n    },\r\n    input(args) {\r\n      this.$emit('input', args);\r\n    },\r\n    focus(args) {\r\n      this.$emit('focus', args);\r\n    },\r\n    blur(args) {\r\n      this.$emit('blur', args);\r\n    },\r\n    enter(args) {\r\n      this.$emit('enter', args);\r\n    },\r\n    hints(args) {\r\n      this.$emit('hints', args);\r\n    },\r\n    upload(args) {\r\n      this.$emit('upload', args);\r\n    },\r\n  },\r\n  beforeMount() {\r\n    this.multi = this.parent.multi;\r\n\r\n    const sub = [];\r\n\r\n    if (this.parent.sub && this.parent.sub.forEach) {\r\n      this.parent.sub.forEach((s) => {\r\n        sub.push({ ...s });\r\n      });\r\n    }\r\n\r\n    this.copy = Object.assign({}, this.parent);\r\n    delete this.copy.multi;\r\n    this.copy.sub = sub;\r\n\r\n    this.$emit('create', { parent: this.parent });\r\n    this.add();\r\n  },\r\n};\r\n"],"names":["ControlMultiSub","data","multi","copy","props","components","ControlComponent","ControlMultiForSubcontrol","template","emits","computed","controlsLength","parent","length","undefined","isDisabled","methods","createSub","args","$emit","addSub","removeSub","add","Object","assign","remove","index","input","focus","blur","enter","hints","upload","beforeMount","sub","forEach","s","push"],"mappings":"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"}