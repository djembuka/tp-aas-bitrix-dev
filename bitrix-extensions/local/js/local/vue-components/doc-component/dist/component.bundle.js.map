{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import './component.css';\r\nimport { ButtonComponent } from 'local.vue-components.button-component';\r\n\r\nexport const DocComponent = {\r\n  data() {\r\n    return {};\r\n  },\r\n  components: {\r\n    ButtonComponent,\r\n  },\r\n  props: {\r\n    doc: {\r\n      type: Object,\r\n      default: () => ({\r\n        id: 123,\r\n        href: '/pages/Протокол заседания дисицплинарной комиссии 234.pdf',\r\n        size: 654000,\r\n        date: '15 января 2020',\r\n        author: 'Азарянц Ашот Александрович',\r\n        icon: '/template/images/pdf.svg',\r\n        remove: false\r\n      }),\r\n    },\r\n    type: {\r\n      type: String,\r\n      default: 'info',\r\n      validator(value) {\r\n        return ['info', 'error', 'table-result'].includes(value);\r\n      },\r\n    },\r\n  },\r\n  emits: ['clickDelete'],\r\n  // language=Vue\r\n  template: `\r\n\t\t<div class=\"twpx-doc twpx-doc--button twpx-doc--32x44 p-16 bg-fa\">\r\n      <div class=\"twpx-doc__body\">\r\n        <a class=\"twpx-doc__icon\" :href=\"doc.href\" :style=\"getStyle()\"></a>\r\n        <span class=\"twpx-doc__text\">\r\n          <a :href=\"doc.href\"><b>{{ getFileNameAndExt(doc.href).name }}</b></a>\r\n          <span class=\"twpx-doc__data\">\r\n            <span>{{ formatFileSize(doc.size) }} {{ getFileNameAndExt(doc.href).ext }}</span>\r\n            <span>Дата публикации: {{ formatDateToRussian(doc.date) }}</span>\r\n            <span>Автор: {{ doc.author }}</span>\r\n          </span>\r\n        </span>\r\n        <ButtonComponent v-if=\"doc.remove\" :text=\"Delete\" :props=\"['icon', 'delete', 'small']\" @clickButton=\"$emit('clickDelete')\" />\r\n      </div>\r\n    </div>\r\n\t`,\r\n  computed: {},\r\n  methods: {\r\n    formatDateToRussian(dateString) {\r\n      const months = [\r\n        'января', 'февраля', 'марта', 'апреля', 'мая', 'июня',\r\n        'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'\r\n      ];\r\n      const date = new Date(dateString);\r\n      if (isNaN(date)) return dateString; // если невалидная дата, возвращаем как есть\r\n      const day = date.getDate();\r\n      const month = months[date.getMonth()];\r\n      const year = date.getFullYear();\r\n      return `${day} ${month} ${year}`;\r\n    },\r\n    getStyle() {\r\n      return `background-image: url(${this.doc.icon})`;\r\n    },\r\n    getFileNameAndExt(path) {\r\n      // Получаем только имя файла с расширением\r\n      const fileNameWithExt = path.split('/').pop();\r\n      // Находим позицию последней точки\r\n      const lastDotIndex = fileNameWithExt.lastIndexOf('.');\r\n      if (lastDotIndex === -1) {\r\n        // Если точки нет, возвращаем всё как имя, расширение — пустая строка\r\n        return { name: fileNameWithExt, ext: '' };\r\n      }\r\n      // Имя файла без расширения\r\n      const name = fileNameWithExt.substring(0, lastDotIndex);\r\n      // Расширение с точкой\r\n      const ext = fileNameWithExt.substring(lastDotIndex);\r\n      return { name, ext };\r\n    },\r\n    formatFileSize(bytes) {\r\n      if (bytes === 0) return '0 б';\r\n      const units = ['Б', 'Кб', 'Мб', 'Гб', 'Тб'];\r\n      const k = 1024;\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n      const size = bytes / Math.pow(k, i);\r\n      // Для Мб и выше округляем до одного знака после запятой, для Кб и ниже — до целых\r\n      if (i >= 2) {\r\n        return `${size.toFixed(1)} ${units[i]}`;\r\n      } else {\r\n        return `${Math.round(size)} ${units[i]}`;\r\n      }\r\n    }\r\n  },\r\n};\r\n"],"names":["DocComponent","data","components","ButtonComponent","props","doc","type","Object","id","href","size","date","author","icon","remove","String","validator","value","includes","emits","template","computed","methods","formatDateToRussian","dateString","months","Date","isNaN","day","getDate","month","getMonth","year","getFullYear","getStyle","getFileNameAndExt","path","fileNameWithExt","split","pop","lastDotIndex","lastIndexOf","name","ext","substring","formatFileSize","bytes","units","k","i","Math","floor","log","pow","toFixed","round"],"mappings":"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"}