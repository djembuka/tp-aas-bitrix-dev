{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import './component.css';\n\nexport const ControlText = {\n  data() {\n    return {\n      controlId: this.id || this.control.id || null,\n      controlName: this.name || this.control.name || null,\n      focused: false,\n      blured: false,\n      warning: '',\n      hint: this.control.hint_external,\n    };\n  },\n  props: ['control', 'id', 'name'],\n  // language=Vue\n  template: `\n\t\t<div\n      :class=\"{\n        'twpx-form-control': true,\n        'twpx-form-control--text': true,\n        'twpx-form-control--active': active,\n        'twpx-form-control--invalid': invalid,\n        'twpx-form-control--disabled': disabled,\n      }\"\n    >\n      <img\n        :src=\"disabled\"\n        class=\"twpx-form-control__disabled-icon\"\n        v-if=\"false\"\n      />\n      <div class=\"twpx-form-control__label\">{{ control.label }}</div>\n      <input\n        type=\"text\"\n        :id=\"controlId\"\n        :name=\"controlName\"\n        v-model=\"value\"\n        @focus=\"focus\"\n        @blur=\"blur\"\n        :disabled=\"disabled\"\n        ref=\"input\"\n        autocomplete=\"off\"\n        :placeholder=\"placeholder\"\n        class=\"twpx-form-control__input\"\n      />\n      <div\n        class=\"twpx-form-control__warning\"\n        v-html=\"warning\"\n        v-if=\"warning\"\n      ></div>\n      <div class=\"twpx-form-control__hint\" v-html=\"hint\" v-if=\"hint\"></div>\n    </div>\n\t`,\n  emits: ['input'],\n  computed: {\n    value: {\n      get() {\n        return this.control.value;\n      },\n      set(value) {\n        this.$emit('input', { value });\n      },\n    },\n    placeholder() {\n      if (this.focused && !this.value.trim()) {\n        return this.control.hint_internal;\n      } else {\n        return '';\n      }\n    },\n    active() {\n      return this.focused || !!this.control.value.trim();\n    },\n    invalid() {\n      return this.blured && !this.validate();\n    },\n    disabled() {\n      return this.control.disabled;\n    },\n    validateWatcher() {\n      return this.control.validateWatcher;\n    },\n    focusWatcher() {\n      return this.control.focusWatcher;\n    },\n  },\n  watch: {\n    validateWatcher() {\n      this.blured = true;\n    },\n    focusWatcher() {\n      this.$refs.input.focus();\n    },\n  },\n  methods: {\n    focus() {\n      this.focused = true;\n      this.blured = false;\n    },\n    blur() {\n      this.focused = false;\n      this.blured = true;\n    },\n    validate() {\n      if (\n        (this.control.required && this.value.trim()) ||\n        !this.control.required\n      ) {\n        if (this.control.regexp) {\n          const match = String(this.value.trim()).match(\n            RegExp(this.control.regexp)\n          );\n          if (!match) {\n            this.warning = this.control.regexp_description;\n          } else {\n            this.warning = '';\n          }\n          return match;\n        } else {\n          return true;\n        }\n      } else if (this.control.required && !this.value) {\n        return false;\n      }\n      return true;\n    },\n  },\n};\n"],"names":["ControlText","data","controlId","id","control","controlName","name","focused","blured","warning","hint","hint_external","props","template","emits","computed","value","get","set","$emit","placeholder","trim","hint_internal","active","invalid","validate","disabled","validateWatcher","focusWatcher","watch","$refs","input","focus","methods","blur","required","regexp","match","String","RegExp","regexp_description"],"mappings":"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"}