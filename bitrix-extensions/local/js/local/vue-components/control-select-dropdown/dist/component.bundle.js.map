{"version":3,"file":"component.bundle.js","sources":["../src/IconDropdown.js","../src/component.js"],"sourcesContent":["export const IconDropdown = {\r\n  template: `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n      <path d=\"M8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16Z\" fill=\"white\"/>\r\n      <path d=\"M8.02698 10.77C8.09292 10.7702 8.15824 10.7572 8.21916 10.732C8.28009 10.7068 8.33542 10.6697 8.38198 10.623L11.392 7.61304C11.486 7.51902 11.5388 7.3915 11.5388 7.25854C11.5388 7.12558 11.486 6.99806 11.392 6.90404C11.298 6.81002 11.1704 6.7572 11.0375 6.7572C10.9045 6.7572 10.777 6.81002 10.683 6.90404L8.02798 9.55904L5.37298 6.90404C5.27896 6.81002 5.15144 6.7572 5.01848 6.7572C4.88552 6.7572 4.758 6.81002 4.66398 6.90404C4.56996 6.99806 4.51714 7.12558 4.51714 7.25854C4.51714 7.3915 4.56996 7.51902 4.66398 7.61304L7.67398 10.623C7.76752 10.7169 7.89448 10.7697 8.02698 10.77Z\" fill=\"#003B78\"/>\r\n    </svg>\r\n  `,\r\n};\r\n","import { IconDropdown } from './IconDropdown.js';\nimport './component.css';\n\nexport const ControlSelectDropdown = {\n  data() {\n    return {\n      id: Math.floor(Math.random() * 100000),\n      optionsArray: [],\n      opened: false,\n      animation: false,\n    };\n  },\n  components: {\n    IconDropdown,\n  },\n  // language=Vue\n  template: `\n\t\t<div\n      :class=\"{\n        'twpx-form-control': true,\n        'twpx-form-control--select': true,\n        'twpx-form-control--active': active,\n        'twpx-form-control--invalid': invalid,\n        'twpx-form-control--disabled': disabled,\n        'twpx-form-control--opened': opened,\n        'twpx-form-control--animation': animation,\n      }\"\n      @close=\"console.log('close')\"\n    >\n      <img\n        :src=\"disabled\"\n        class=\"twpx-form-control__disabled-icon\"\n        v-if=\"false\"\n      />\n      <div class=\"twpx-form-control__label\">{{ control.label }}</div>\n      <div\n        class=\"twpx-form-control-select\"\n        :data-id=\"id\"\n        id=\"id\"\n      >\n        <input type=\"hidden\" :name=\"name\" :value=\"value\" />\n        <IconDropdown class=\"twpx-form-control-select__arrow\" />\n        <div\n          class=\"twpx-form-control-select__content\"\n          @click.prevent=\"openHideDropdown\"\n        >\n          {{ text }}\n        </div>\n        <div class=\"twpx-form-control-select__dropdown\">\n          <div\n            class=\"twpx-form-control-select__dropdown-item\"\n            :class=\"{'twpx-form-control-select__dropdown-item': true, 'twpx-form-control-select__dropdown-item--current': option.code === control.value}\"\n            v-for=\"(option, i) in control.options\"\n            :key=\"option.code\"\n            @click.prevent=\"clickItem(i)\"\n          >\n            {{ option.label }}\n          </div>\n        </div>\n      </div>\n    </div>\n\t`,\n  props: ['control', 'name', 'customOnChange'],\n  emits: ['input', 'focus', 'blur'],\n  computed: {\n    value: {\n      get() {\n        return this.control.value;\n      },\n      set(value) {\n        this.$emit('input', { value });\n      },\n    },\n    text() {\n      let option = this.control.options.find((c) => c.code === this.value);\n      if (option) {\n        return option.label;\n      }\n      return '';\n    },\n    active() {\n      return !!this.text.trim();\n    },\n    invalid() {\n      return false; //!this.validate();\n    },\n    disabled() {\n      return this.control.disabled;\n    },\n  },\n  methods: {\n    createOptionsArray() {\n      this.optionsArray = this.control.options;\n    },\n    clickItem(index) {\n      let option = this.control.options[index];\n      this.value = option.code;\n      this.hideDropdown();\n      //onchange\n      if (typeof this.customOnChange === 'function') {\n        this.customOnChange();\n      }\n    },\n    openHideDropdown() {\n      this.opened ? this.hideDropdown() : this.openDropdown();\n    },\n    openDropdown() {\n      // if (window.twpxSelectManager) {\n      //   Object.values(window.twpxSelectManager.selectObject).forEach(\n      //     (select) => {\n      //       select.hideDropdown();\n      //     }\n      //   );\n      // }\n\n      document\n        .querySelectorAll(\n          '.twpx-form-control--select.twpx-form-control--opened'\n        )\n        .forEach((select) => {\n          const close = new Event('close');\n          select.dispatchEvent(close);\n        });\n\n      this.opened = true;\n      this.$emit('focus');\n    },\n    hideDropdown() {\n      if (this.opened) {\n        this.animation = true;\n        setTimeout(() => {\n          this.animation = false;\n        }, 300);\n      }\n      this.opened = false;\n      this.$emit('blur');\n    },\n    divElements() {\n      this.content = this.selectDiv.querySelector(\n        '.twpx-form-control-select__content'\n      );\n      this.dropdown = this.selectDiv.querySelector(\n        '.twpx-form-control-select__dropdown'\n      );\n      this.hidden = this.selectDiv.querySelector('input[type=\"hidden\"]');\n    },\n    divEvents() {\n      this.content.addEventListener('click', () => {\n        if (\n          this.selectDiv.classList.contains(\n            'twpx-form-control-select--dropdown'\n          )\n        ) {\n          this.hideDropdown();\n        } else {\n          this.openDropdown();\n        }\n      });\n\n      this.dropdown.addEventListener('click', (e) => {\n        if (\n          e.target.classList.contains('twpx-form-control-select__dropdown-item')\n        ) {\n          this.clickItem(e.target);\n        }\n      });\n    },\n  },\n  beforeMount() {\n    document.addEventListener('click', (e) => {\n      if (\n        e.target.className !== 'twpx-form-control-select__dropdown-item' &&\n        e.target.className !== 'twpx-form-control-select__content'\n      ) {\n        this.hideDropdown();\n      }\n    });\n  },\n};\n"],"names":["IconDropdown","template","ControlSelectDropdown","data","id","Math","floor","random","optionsArray","opened","animation","components","props","emits","computed","value","get","control","set","$emit","text","option","options","find","c","code","label","active","trim","invalid","disabled","methods","createOptionsArray","clickItem","index","hideDropdown","customOnChange","openHideDropdown","openDropdown","document","querySelectorAll","forEach","select","close","Event","dispatchEvent","setTimeout","divElements","content","selectDiv","querySelector","dropdown","hidden","divEvents","addEventListener","classList","contains","e","target","beforeMount","className"],"mappings":";;;;;EAAO,IAAMA,YAAY,GAAG;IAC1BC,QAAQ;EAMV,CAAC;;MCJYC,qBAAqB,GAAG;IACnCC,IAAI,kBAAG;MACL,OAAO;QACLC,EAAE,EAAEC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,MAAM,CAAC;QACtCC,YAAY,EAAE,EAAE;QAChBC,MAAM,EAAE,KAAK;QACbC,SAAS,EAAE;OACZ;KACF;IACDC,UAAU,EAAE;MACVX,YAAY,EAAZA;KACD;;IAEDC,QAAQ,ohDA6CR;IACAW,KAAK,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,gBAAgB,CAAC;IAC5CC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC;IACjCC,QAAQ,EAAE;MACRC,KAAK,EAAE;QACLC,GAAG,iBAAG;UACJ,OAAO,IAAI,CAACC,OAAO,CAACF,KAAK;SAC1B;QACDG,GAAG,eAACH,KAAK,EAAE;UACT,IAAI,CAACI,KAAK,CAAC,OAAO,EAAE;YAAEJ,KAAK,EAALA;WAAO,CAAC;;OAEjC;MACDK,IAAI,kBAAG;QAAA;QACL,IAAIC,MAAM,GAAG,IAAI,CAACJ,OAAO,CAACK,OAAO,CAACC,IAAI,CAAC,UAACC,CAAC;UAAA,OAAKA,CAAC,CAACC,IAAI,KAAK,KAAI,CAACV,KAAK;UAAC;QACpE,IAAIM,MAAM,EAAE;UACV,OAAOA,MAAM,CAACK,KAAK;;QAErB,OAAO,EAAE;OACV;MACDC,MAAM,oBAAG;QACP,OAAO,CAAC,CAAC,IAAI,CAACP,IAAI,CAACQ,IAAI,EAAE;OAC1B;MACDC,OAAO,qBAAG;QACR,OAAO,KAAK,CAAC;OACd;MACDC,QAAQ,sBAAG;QACT,OAAO,IAAI,CAACb,OAAO,CAACa,QAAQ;;KAE/B;IACDC,OAAO,EAAE;MACPC,kBAAkB,gCAAG;QACnB,IAAI,CAACxB,YAAY,GAAG,IAAI,CAACS,OAAO,CAACK,OAAO;OACzC;MACDW,SAAS,qBAACC,KAAK,EAAE;QACf,IAAIb,MAAM,GAAG,IAAI,CAACJ,OAAO,CAACK,OAAO,CAACY,KAAK,CAAC;QACxC,IAAI,CAACnB,KAAK,GAAGM,MAAM,CAACI,IAAI;QACxB,IAAI,CAACU,YAAY,EAAE;;QAEnB,IAAI,OAAO,IAAI,CAACC,cAAc,KAAK,UAAU,EAAE;UAC7C,IAAI,CAACA,cAAc,EAAE;;OAExB;MACDC,gBAAgB,8BAAG;QACjB,IAAI,CAAC5B,MAAM,GAAG,IAAI,CAAC0B,YAAY,EAAE,GAAG,IAAI,CAACG,YAAY,EAAE;OACxD;MACDA,YAAY,0BAAG;;;;;;;;;QASbC,QAAQ,CACLC,gBAAgB,CACf,sDAAsD,CACvD,CACAC,OAAO,CAAC,UAACC,MAAM,EAAK;UACnB,IAAMC,KAAK,GAAG,IAAIC,KAAK,CAAC,OAAO,CAAC;UAChCF,MAAM,CAACG,aAAa,CAACF,KAAK,CAAC;SAC5B,CAAC;QAEJ,IAAI,CAAClC,MAAM,GAAG,IAAI;QAClB,IAAI,CAACU,KAAK,CAAC,OAAO,CAAC;OACpB;MACDgB,YAAY,0BAAG;QAAA;QACb,IAAI,IAAI,CAAC1B,MAAM,EAAE;UACf,IAAI,CAACC,SAAS,GAAG,IAAI;UACrBoC,UAAU,CAAC,YAAM;YACf,MAAI,CAACpC,SAAS,GAAG,KAAK;WACvB,EAAE,GAAG,CAAC;;QAET,IAAI,CAACD,MAAM,GAAG,KAAK;QACnB,IAAI,CAACU,KAAK,CAAC,MAAM,CAAC;OACnB;MACD4B,WAAW,yBAAG;QACZ,IAAI,CAACC,OAAO,GAAG,IAAI,CAACC,SAAS,CAACC,aAAa,CACzC,oCAAoC,CACrC;QACD,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACF,SAAS,CAACC,aAAa,CAC1C,qCAAqC,CACtC;QACD,IAAI,CAACE,MAAM,GAAG,IAAI,CAACH,SAAS,CAACC,aAAa,CAAC,sBAAsB,CAAC;OACnE;MACDG,SAAS,uBAAG;QAAA;QACV,IAAI,CAACL,OAAO,CAACM,gBAAgB,CAAC,OAAO,EAAE,YAAM;UAC3C,IACE,MAAI,CAACL,SAAS,CAACM,SAAS,CAACC,QAAQ,CAC/B,oCAAoC,CACrC,EACD;YACA,MAAI,CAACrB,YAAY,EAAE;WACpB,MAAM;YACL,MAAI,CAACG,YAAY,EAAE;;SAEtB,CAAC;QAEF,IAAI,CAACa,QAAQ,CAACG,gBAAgB,CAAC,OAAO,EAAE,UAACG,CAAC,EAAK;UAC7C,IACEA,CAAC,CAACC,MAAM,CAACH,SAAS,CAACC,QAAQ,CAAC,yCAAyC,CAAC,EACtE;YACA,MAAI,CAACvB,SAAS,CAACwB,CAAC,CAACC,MAAM,CAAC;;SAE3B,CAAC;;KAEL;IACDC,WAAW,yBAAG;MAAA;MACZpB,QAAQ,CAACe,gBAAgB,CAAC,OAAO,EAAE,UAACG,CAAC,EAAK;QACxC,IACEA,CAAC,CAACC,MAAM,CAACE,SAAS,KAAK,yCAAyC,IAChEH,CAAC,CAACC,MAAM,CAACE,SAAS,KAAK,mCAAmC,EAC1D;UACA,MAAI,CAACzB,YAAY,EAAE;;OAEtB,CAAC;;EAEN,CAAC;;;;;;;;"}