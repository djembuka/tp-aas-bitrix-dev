{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import './component.css';\r\n\r\nexport const ControlSelectDropdown = {\r\n  data() {\r\n    return {\r\n      id: Math.floor(Math.random() * 100000),\r\n      optionsArray: [],\r\n      opened: false,\r\n      arrowIcon: `\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"18\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 18 16\"\r\n        >\r\n          <g transform=\"translate(17.589 16) rotate(180)\">\r\n            <ellipse\r\n              cx=\"9\"\r\n              cy=\"8\"\r\n              rx=\"9\"\r\n              ry=\"8\"\r\n              transform=\"translate(-0.411)\"\r\n              fill=\"#fff\"\r\n            />\r\n            <path\r\n              d=\"M3.822,0a.57.57,0,0,0-.386.147L.16,3.157a.473.473,0,0,0,0,.709.581.581,0,0,0,.772,0l2.89-2.655,2.89,2.655a.581.581,0,0,0,.772,0,.473.473,0,0,0,0-.709L4.208.147A.57.57,0,0,0,3.822,0Z\"\r\n              transform=\"translate(4.855 5.23)\"\r\n            />\r\n          </g>\r\n        </svg>`,\r\n    };\r\n  },\r\n  // language=Vue\r\n  template: `\r\n\t\t<div\r\n      :class=\"{\r\n        'twpx-form-control': true,\r\n        'twpx-form-control--select': true,\r\n        'twpx-form-control--active': active,\r\n        'twpx-form-control--invalid': invalid,\r\n        'twpx-form-control--disabled': disabled,\r\n      }\"\r\n    >\r\n      <img\r\n        :src=\"disabled\"\r\n        class=\"twpx-form-control__disabled-icon\"\r\n        v-if=\"false\"\r\n      />\r\n      <div class=\"twpx-form-control__label\">{{ control.label }}</div>\r\n      <div\r\n        class=\"twpx-form-control-select\"\r\n        :class=\"{ 'twpx-form-control-select--dropdown': opened }\"\r\n        :data-id=\"id\"\r\n        id=\"id\"\r\n      >\r\n        <input type=\"hidden\" :name=\"name\" :value=\"value\" />\r\n        <div class=\"twpx-form-control-select__arrow\" v-html=\"arrowIcon\"></div>\r\n        <div\r\n          class=\"twpx-form-control-select__content\"\r\n          @click.prevent=\"openDropdown\"\r\n        >\r\n          {{ text }}\r\n        </div>\r\n        <div class=\"twpx-form-control-select__dropdown\">\r\n          <div\r\n            class=\"twpx-form-control-select__dropdown-item\"\r\n            v-for=\"(option, i) in control.options\"\r\n            :key=\"option.code\"\r\n            @click.prevent=\"clickItem(i)\"\r\n          >\r\n            {{ option.label }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\t`,\r\n  props: ['control', 'name', 'customOnChange'],\r\n  emits: ['input', 'focus', 'blur'],\r\n  computed: {\r\n    value: {\r\n      get() {\r\n        return this.control.value;\r\n      },\r\n      set(value) {\r\n        this.$emit('input', { value });\r\n      },\r\n    },\r\n    text() {\r\n      let option = this.control.options.find((c) => c.code === this.value);\r\n      if (option) {\r\n        return option.label;\r\n      }\r\n      return '';\r\n    },\r\n    active() {\r\n      return !!this.text.trim();\r\n    },\r\n    invalid() {\r\n      return false; //!this.validate();\r\n    },\r\n    disabled() {\r\n      return this.control.disabled;\r\n    },\r\n  },\r\n  methods: {\r\n    createOptionsArray() {\r\n      this.optionsArray = this.control.options;\r\n    },\r\n    clickItem(index) {\r\n      let option = this.control.options[index];\r\n      this.value = option.code;\r\n      this.hideDropdown();\r\n      //onchange\r\n      if (typeof this.customOnChange === 'function') {\r\n        this.customOnChange();\r\n      }\r\n    },\r\n    openDropdown() {\r\n      // if (window.twpxSelectManager) {\r\n      //   Object.values(window.twpxSelectManager.selectObject).forEach(\r\n      //     (select) => {\r\n      //       select.hideDropdown();\r\n      //     }\r\n      //   );\r\n      // }\r\n      this.opened = true;\r\n      this.$emit('focus');\r\n    },\r\n    hideDropdown() {\r\n      // if (this.selectDiv.classList.contains('twpx-select--dropdown')) {\r\n      //   this.selectDiv.classList.remove('twpx-select--dropdown');\r\n      //   this.selectDiv.classList.add('twpx-select--animate');\r\n      //   setTimeout(() => {\r\n      //     this.selectDiv.classList.remove('twpx-select--animate');\r\n      //   }, 200);\r\n      // }\r\n      this.opened = false;\r\n      this.$emit('blur');\r\n    },\r\n    divElements() {\r\n      this.content = this.selectDiv.querySelector(\r\n        '.twpx-form-control-select__content'\r\n      );\r\n      this.dropdown = this.selectDiv.querySelector(\r\n        '.twpx-form-control-select__dropdown'\r\n      );\r\n      this.hidden = this.selectDiv.querySelector('input[type=\"hidden\"]');\r\n    },\r\n    divEvents() {\r\n      this.content.addEventListener('click', () => {\r\n        if (\r\n          this.selectDiv.classList.contains(\r\n            'twpx-form-control-select--dropdown'\r\n          )\r\n        ) {\r\n          this.hideDropdown();\r\n        } else {\r\n          this.openDropdown();\r\n        }\r\n      });\r\n\r\n      this.dropdown.addEventListener('click', (e) => {\r\n        if (\r\n          e.target.classList.contains('twpx-form-control-select__dropdown-item')\r\n        ) {\r\n          this.clickItem(e.target);\r\n        }\r\n      });\r\n    },\r\n  },\r\n  beforeMount() {\r\n    document.addEventListener('click', (e) => {\r\n      if (\r\n        e.target.className !== 'twpx-form-control-select__dropdown-item' &&\r\n        e.target.className !== 'twpx-form-control-select__content'\r\n      ) {\r\n        this.hideDropdown();\r\n      }\r\n    });\r\n  },\r\n};\r\n"],"names":["ControlSelectDropdown","data","id","Math","floor","random","optionsArray","opened","arrowIcon","template","props","emits","computed","value","get","control","set","$emit","text","option","options","find","c","code","label","active","trim","invalid","disabled","methods","createOptionsArray","clickItem","index","hideDropdown","customOnChange","openDropdown","divElements","content","selectDiv","querySelector","dropdown","hidden","divEvents","addEventListener","classList","contains","e","target","beforeMount","document","className"],"mappings":"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"}