{"version":3,"file":"component.bundle.js","sources":["../src/IconFile.js","../src/component.js"],"sourcesContent":["export const IconFile = {\r\n  template: `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"17.383\" height=\"24\" viewBox=\"0 0 17.383 24\" >\r\n      <g transform=\"translate(-4.461)\">\r\n        <g transform=\"translate(4.461)\">\r\n          <g>\r\n            <path d=\"M21.844,6.573v15.88A1.547,1.547,0,0,1,20.3,24H6.008a1.546,1.546,0,0,1-1.547-1.547V1.547A1.546,1.546,0,0,1,6.008,0H15.27Z\" transform=\"translate(-4.461)\" class=\"a\"/>\r\n          </g>\r\n          <path d=\"M20.036,8.289l5.677,2.339v-2.2l-3.218-.951Z\" transform=\"translate(-8.33 -1.858)\" class=\"b\"/>\r\n          <path d=\"M25.416,6.573H20.389a1.546,1.546,0,0,1-1.547-1.547V0Z\" transform=\"translate(-8.033)\" class=\"c\"/>\r\n        </g>\r\n        <path d=\"M18.117,19.012l-2.85-2.85a.555.555,0,0,0-.785,0l-2.85,2.85a.555.555,0,0,0,.785.784l1.9-1.9v5.024a.555.555,0,1,0,1.109,0V17.894l1.9,1.9a.555.555,0,0,0,.785-.784Z\" transform=\"translate(-1.741 -3.974)\" class=\"d\"/>\r\n      </g>\r\n    </svg>\r\n  `,\r\n};\r\n","import './component.css';\r\nimport { IconFile } from './IconFile';\r\n\r\nexport const ControlFileUpload = {\r\n  data() {\r\n    return {\r\n      controlId: this.id || this.control.id || null,\r\n      controlName: this.name || this.control.name || null,\r\n      focused: false,\r\n      blured: false,\r\n      hint: this.control.hint_external,\r\n      minimalLoading: false,\r\n      loading: false,\r\n      loadCircle: false,\r\n      percentage: 0, //%\r\n      isFileLoaded: false,\r\n      files: [],\r\n      default: '<a href=\"\">Выберите файл</a>&nbsp;или перетащите в поле',\r\n      required: this.control.required,\r\n      warning: '',\r\n    };\r\n  },\r\n  components: {\r\n    IconFile,\r\n  },\r\n  props: ['control', 'id', 'name'],\r\n  // language=Vue\r\n  template: `\r\n\t\t<div\r\n      :class=\"{\r\n        'twpx-form-control': true,\r\n        'twpx-form-control--file': true,\r\n        'twpx-form-control--invalid': isInvalid,\r\n        'twpx-form-control--disabled': disabled,\r\n      }\"\r\n    >\r\n      <img\r\n        :src=\"disabled\"\r\n        class=\"twpx-form-control__file__disabled-icon\"\r\n        v-if=\"false\"\r\n      />\r\n      <span\r\n        class=\"twpx-form-control__file__clear\" :class=\"{'btn--load-circle': loadCircle}\"\r\n        @click.prevent=\"clearInputFile\"\r\n        v-if=\"isClearable\"\r\n      ></span>\r\n      <div\r\n        class=\"twpx-form-control__file\"\r\n        :class=\"{\r\n          filled: isFilled,\r\n          clearable: isClearable,\r\n          progressing: isProgressing,\r\n        }\"\r\n        ref=\"controlFile\"\r\n      >\r\n        <span class=\"twpx-form-control__file__label\">{{ control.label }}</span>\r\n\r\n        <IconFile />\r\n\r\n        <input\r\n          type=\"file\"\r\n          :name=\"controlName\"\r\n          :id=\"controlId\"\r\n          @change=\"uploadFile($refs.inputFile.files)\"\r\n          ref=\"inputFile\"\r\n        />\r\n\r\n        <div class=\"twpx-form-control__file__progressbar\" v-show=\"(isProgressing || loadCircle) && !isInvalid\" ref=\"progressbar\" :class=\"{'minimal': minimalLoading}\">\r\n          <span v-html=\"label\" v-show=\"isFileLoaded\"></span>\r\n          <span v-show=\"!isFileLoaded\">{{percentage}}%</span>\r\n        </div>\r\n\r\n        <label\r\n          :for=\"controlId\"\r\n          v-html=\"label\"\r\n          ref=\"dropzone\"\r\n        ></label>\r\n      </div>\r\n      <div\r\n        class=\"twpx-form-control__warning\"\r\n        v-html=\"warning\"\r\n        v-if=\"warning\"\r\n      ></div>\r\n      <div class=\"twpx-form-control__hint\" v-html=\"hint\" v-if=\"hint\"></div>\r\n    </div>\r\n\t`,\r\n  emits: ['input', 'focus', 'blur', 'enter'],\r\n  computed: {\r\n    progress() {\r\n      return this.control.upload.progress || {};\r\n    },\r\n    response() {\r\n      return this.control.upload.response || {};\r\n    },\r\n    readyState() {\r\n      return this.control.upload.readyState;\r\n    },\r\n    placeholder() {\r\n      if (this.focused && !this.value.trim()) {\r\n        return this.control.hint_internal;\r\n      } else {\r\n        return '';\r\n      }\r\n    },\r\n    disabled() {\r\n      return this.control.disabled;\r\n    },\r\n    validateWatcher() {\r\n      return this.control.validateWatcher;\r\n    },\r\n    focusWatcher() {\r\n      return this.control.focusWatcher;\r\n    },\r\n    isInvalid() {\r\n      return !!this.invalidString;\r\n    },\r\n    isProgressing() {\r\n      return this.loading;\r\n    },\r\n    isClearable() {\r\n      return this.loadCircle || (!!this.filename && !this.isProgressing);\r\n    },\r\n    isFilled() {\r\n      return (\r\n        !!this.filename &&\r\n        this.control.upload.readyState === 4 &&\r\n        !this.isProgressing\r\n      );\r\n    },\r\n    fileid() {\r\n      return this.control.value;\r\n    },\r\n    invalidString() {\r\n      if (this.control.upload && this.control.upload.xhrStatus === 'E') {\r\n        return 'Ошибка загрузки';\r\n      } else if (this.files[0] && this.files[0].size && this.files[0].name) {\r\n        if (this.files[0].size >= this.control.maxSize) {\r\n          return `Размер файла превышает ${this.formatSize(\r\n            this.control.maxSize\r\n          )}`;\r\n        }\r\n\r\n        const filename = this.files[0].name;\r\n        const lastIndex = filename.lastIndexOf('.');\r\n        const regExp = new RegExp(this.control.accept.join('|'));\r\n\r\n        if (!regExp.test(filename.substring(lastIndex + 1).toLowerCase())) {\r\n          return `Прикладывайте файлы ${this.control.accept\r\n            .map((w) => w.toUpperCase())\r\n            .join(', ')}.`;\r\n        }\r\n      }\r\n      return '';\r\n    },\r\n    label() {\r\n      if (this.isProgressing) {\r\n        return '';\r\n      }\r\n      if (this.isInvalid) {\r\n        return this.invalidString;\r\n      }\r\n      if (this.filename) {\r\n        return this.filename;\r\n      }\r\n      if (this.files[0] && this.files[0].name) {\r\n        return this.files[0].name;\r\n      }\r\n      return this.default;\r\n    },\r\n    filename() {\r\n      return this.control.value ? this.control.value.name : '';\r\n    },\r\n  },\r\n  watch: {\r\n    progress() {\r\n      this.progressAnimation();\r\n    },\r\n    response() {\r\n      this.onResponse();\r\n    },\r\n    percentage(val) {\r\n      setTimeout(() => {\r\n        if (val === 100) {\r\n          this.isFileLoaded = true;\r\n        } else if (val === 0) {\r\n          this.isFileLoaded = false;\r\n        }\r\n      }, 600);\r\n    },\r\n    validateWatcher() {\r\n      this.blured = true;\r\n    },\r\n    focusWatcher() {\r\n      this.$refs.input.focus();\r\n    },\r\n  },\r\n  methods: {\r\n    uploadFile(files) {\r\n      this.files = files;\r\n      this.percentage = 0;\r\n\r\n      // Проверка файла перед загрузкой\r\n      setTimeout(() => {\r\n        if (this.isInvalid) {\r\n          this.$refs.inputFile.value = '';\r\n          // this.files = [];\r\n          return;\r\n        }\r\n\r\n        // Если проверки пройдены, начинаем загрузку\r\n        this.loading = true;\r\n        this.$emit('input', { value: files[0] });\r\n      }, 0);\r\n    },\r\n    onResponse() {\r\n      if (this.response.STATUS === 'success') {\r\n        setTimeout(() => {\r\n          this.$refs.inputFile.value = '';\r\n          this.isFileLoaded = true;\r\n        }, 100);\r\n      } else if (this.response.STATUS === 'error') {\r\n        this.showError(this.response.errors[0].message);\r\n      }\r\n\r\n      if (this.percentage === 100) {\r\n        this.$refs.progressbar.style = '';\r\n        this.percentage = 0;\r\n        this.loading = false;\r\n        this.loadCircle = false;\r\n      }\r\n    },\r\n    showError(message) {\r\n      this.warning = message;\r\n      this.$refs.inputFile.value = '';\r\n      this.files = [];\r\n    },\r\n    clearInputFile() {\r\n      this.loadCircle = true;\r\n      this.percentage = 0;\r\n      this.loading = false;\r\n      this.files = [];\r\n      this.$refs.inputFile.value = '';\r\n\r\n      this.$emit('input', {\r\n        value: null,\r\n      });\r\n    },\r\n    cancelEvent(e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      return false;\r\n    },\r\n    getCoords(elem) {\r\n      let box = elem.getBoundingClientRect();\r\n\r\n      return {\r\n        top: box.top + scrollY,\r\n        left: box.left + scrollX,\r\n      };\r\n    },\r\n    formatSize(length) {\r\n      var i = 0,\r\n        type = ['б', 'Кб', 'Мб', 'Гб', 'Тб', 'Пб'];\r\n      while ((length / 1000) | 0 && i < type.length - 1) {\r\n        length /= 1000;\r\n        i++;\r\n      }\r\n      return parseInt(length) + ' ' + type[i];\r\n    },\r\n    progressAnimation() {\r\n      const { first, total, loaded } = this.progress;\r\n\r\n      if (first && loaded === total) {\r\n        //loaded too fast, show minimal animation 1s\r\n        let counter = 0,\r\n          minimalTime = 500,\r\n          intervalId;\r\n\r\n        this.minimalLoading = true;\r\n        this.$refs.progressbar.style.width = `100%`;\r\n\r\n        intervalId = setInterval(() => {\r\n          if (++counter === 11) {\r\n            clearInterval(intervalId);\r\n            this.loadCircle = false;\r\n            this.minimalLoading = false;\r\n\r\n            this.$refs.progressbar.style = '';\r\n            this.percentage = 0;\r\n            this.loading = false;\r\n            return;\r\n          }\r\n          this.percentage = Math.floor((counter * 100) / 10);\r\n        }, minimalTime / 10);\r\n      } else {\r\n        this.percentage = Math.floor((loaded / total) * 100) || 0;\r\n        this.$refs.progressbar.style.width = `calc(46px + (100% - 46px ) * ${this.percentage} / 100)`;\r\n        this.loadCircle = false;\r\n      }\r\n    },\r\n\r\n    focus() {\r\n      this.focused = true;\r\n      this.blured = false;\r\n      this.$emit('focus');\r\n    },\r\n    blur() {\r\n      this.focused = false;\r\n      this.blured = true;\r\n      this.$emit('blur');\r\n    },\r\n    enter() {\r\n      this.$emit('enter');\r\n    },\r\n    validate() {\r\n      if (\r\n        (this.control.required && this.value.trim()) ||\r\n        !this.control.required\r\n      ) {\r\n        if (this.control.regexp) {\r\n          const match = String(this.value.trim()).match(\r\n            RegExp(this.control.regexp)\r\n          );\r\n          return match;\r\n        } else {\r\n          return true;\r\n        }\r\n      } else if (this.control.required && !this.value) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n  },\r\n  mounted() {\r\n    //drag&drop file\r\n    const dropZone = this.$refs.dropzone;\r\n    const controlFile = this.$refs.controlFile;\r\n    if (!dropZone) {\r\n      return;\r\n    }\r\n    dropZone.addEventListener('drag', this.cancelEvent);\r\n    dropZone.addEventListener('dragstart', this.cancelEvent);\r\n    dropZone.addEventListener('dragend', this.cancelEvent);\r\n    dropZone.addEventListener('dragover', this.cancelEvent);\r\n    dropZone.addEventListener('dragenter', this.cancelEvent);\r\n    dropZone.addEventListener('dragleave', this.cancelEvent);\r\n    dropZone.addEventListener('drop', this.cancelEvent);\r\n\r\n    dropZone.addEventListener('dragover', () => {\r\n      controlFile.classList.add('dragover');\r\n    });\r\n    dropZone.addEventListener('dragenter', () => {\r\n      controlFile.classList.add('dragover');\r\n    });\r\n    dropZone.addEventListener('dragleave', (e) => {\r\n      let dx = e.pageX - this.getCoords(dropZone).left;\r\n      let dy = e.pageY - this.getCoords(dropZone).top;\r\n      if (\r\n        dx < 0 ||\r\n        dx > dropZone.clientWidth ||\r\n        dy < 0 ||\r\n        dy > dropZone.clientHeight\r\n      ) {\r\n        controlFile.classList.remove('dragover');\r\n      }\r\n    });\r\n\r\n    dropZone.addEventListener('drop', (e) => {\r\n      controlFile.classList.remove('dragover');\r\n      controlFile.classList.add('filled');\r\n      this.uploadFile(e.dataTransfer.files);\r\n    });\r\n  },\r\n};\r\n"],"names":["IconFile","template","ControlFileUpload","data","controlId","id","control","controlName","name","focused","blured","hint","hint_external","minimalLoading","loading","loadCircle","percentage","isFileLoaded","files","required","warning","components","props","emits","computed","progress","upload","response","readyState","placeholder","value","trim","hint_internal","disabled","validateWatcher","focusWatcher","isInvalid","invalidString","isProgressing","isClearable","filename","isFilled","fileid","xhrStatus","size","maxSize","formatSize","lastIndex","lastIndexOf","regExp","RegExp","accept","join","test","substring","toLowerCase","map","w","toUpperCase","label","watch","progressAnimation","onResponse","val","setTimeout","$refs","input","focus","methods","uploadFile","inputFile","$emit","STATUS","showError","errors","message","progressbar","style","clearInputFile","cancelEvent","e","preventDefault","stopPropagation","getCoords","elem","box","getBoundingClientRect","top","scrollY","left","scrollX","length","i","type","parseInt","first","total","loaded","counter","minimalTime","intervalId","width","setInterval","clearInterval","Math","floor","blur","enter","validate","regexp","match","String","mounted","dropZone","dropzone","controlFile","addEventListener","classList","add","dx","pageX","dy","pageY","clientWidth","clientHeight","remove","dataTransfer"],"mappings":"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"}