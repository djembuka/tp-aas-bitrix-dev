{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import './component.css';\n\nexport const ControlFileUpload = {\n  data() {\n    return {\n      controlId: this.id || this.control.id || null,\n      controlName: this.name || this.control.name || null,\n      focused: false,\n      blured: false,\n      warning: '',\n      hint: this.control.hint_external,\n\n      minimalLoading: false,\n      loading: false,\n      loadCircle: false,\n      percentage: 0, //%\n      isFileLoaded: false,\n      xhrStatus: '', //'Y', 'E'\n      active: true,\n      files: [],\n      default: '<a href=\"\">Выберите файл</a>&nbsp;или перетащите в поле',\n      required: this.control.required,\n      icon: `<g transform=\"translate(-4.461)\">\n          <g transform=\"translate(4.461)\">\n            <g>\n              <path d=\"M21.844,6.573v15.88A1.547,1.547,0,0,1,20.3,24H6.008a1.546,1.546,0,0,1-1.547-1.547V1.547A1.546,1.546,0,0,1,6.008,0H15.27Z\" transform=\"translate(-4.461)\" class=\"a\"/>\n            </g>\n            <path d=\"M20.036,8.289l5.677,2.339v-2.2l-3.218-.951Z\" transform=\"translate(-8.33 -1.858)\" class=\"b\"/>\n            <path d=\"M25.416,6.573H20.389a1.546,1.546,0,0,1-1.547-1.547V0Z\" transform=\"translate(-8.033)\" class=\"c\"/>\n          </g>\n          <path d=\"M18.117,19.012l-2.85-2.85a.555.555,0,0,0-.785,0l-2.85,2.85a.555.555,0,0,0,.785.784l1.9-1.9v5.024a.555.555,0,1,0,1.109,0V17.894l1.9,1.9a.555.555,0,0,0,.785-.784Z\" transform=\"translate(-1.741 -3.974)\" class=\"d\"/>\n        </g>`,\n    };\n  },\n  props: ['control', 'id', 'name'],\n  // language=Vue\n  template: `\n\t\t<div\n      :class=\"{\n        'twpx-form-control': true,\n        'twpx-form-control--file': true,\n        'twpx-form-control--active': active,\n        'twpx-form-control--invalid': invalid,\n        'twpx-form-control--disabled': disabled,\n      }\"\n    >\n      <img\n        :src=\"disabled\"\n        class=\"twpx-form-control__file__disabled-icon\"\n        v-if=\"false\"\n      />\n      <span\n        class=\"twpx-form-control__file__clear\"\n        @click.prevent=\"clearInputFile\"\n        v-if=\"isClearable\"\n      ></span>\n      <div\n        class=\"twpx-form-control__file\"\n        :class=\"{\n          filled: isFilled,\n          clearable: isClearable,\n        }\"\n        ref=\"controlFile\"\n      >\n        <span class=\"twpx-form-control__file__label\">{{ control.label }}</span>\n\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"17.383\"\n          height=\"24\"\n          viewBox=\"0 0 17.383 24\"\n          v-html=\"icon\"\n        ></svg>\n\n        <input\n          type=\"file\"\n          :name=\"control.name\"\n          :id=\"control.id\"\n          @change=\"uploadFile($refs.inputFile.files)\"\n          ref=\"inputFile\"\n        />\n\n        <div class=\"twpx-form-control__file__progressbar\" v-show=\"(isProgressing || loadCircle) && !isInvalid\" ref=\"progressbar\" :class=\"{'minimal': minimalLoading}\">\n          <span v-html=\"label\" v-show=\"isFileLoaded\"></span>\n          <span v-show=\"!isFileLoaded\">{{percentage}}%</span>\n        </div>\n\n        <label\n          :for=\"control.id\"\n          class=\"active\"\n          v-html=\"label\"\n          ref=\"dropzone\"\n        ></label>\n      </div>\n      <div class=\"twpx-form-control__hint\" v-html=\"hint\" v-if=\"hint\"></div>\n    </div>\n\t`,\n  emits: ['input', 'focus', 'blur', 'enter'],\n  computed: {\n    progress() {\n      return this.control.upload.progress;\n    },\n    response() {\n      return this.control.upload.response;\n    },\n    readyState() {\n      return this.control.upload.readyState;\n    },\n    placeholder() {\n      if (this.focused && !this.value.trim()) {\n        return this.control.hint_internal;\n      } else {\n        return '';\n      }\n    },\n    active() {\n      return this.focused || !!this.control.value.trim();\n    },\n    invalid() {\n      return this.blured && !this.validate();\n    },\n    disabled() {\n      return this.control.disabled;\n    },\n    validateWatcher() {\n      return this.control.validateWatcher;\n    },\n    focusWatcher() {\n      return this.control.focusWatcher;\n    },\n    isInvalid() {\n      return !!this.invalidString;\n    },\n    isProgressing() {\n      return this.loading;\n    },\n    isClearable() {\n      return this.loadCircle || (!!this.filename && !this.isProgressing);\n    },\n    isFilled() {\n      return !!this.filename && this.control.upload.readyState === 4;\n    },\n    fileid() {\n      return this.control.value;\n    },\n    invalidString() {\n      if (this.control.upload && this.control.upload.xhrStatus === 'E') {\n        return 'Ошибка загрузки';\n      } else if (this.files[0] && this.files[0].size && this.files[0].name) {\n        if (this.files[0].size >= this.control.maxSize) {\n          this.files = [];\n          return `Размер файла превышает ${this.formatSize(\n            this.control.maxSize\n          )}`;\n        }\n\n        const filename = this.files[0].name;\n        const lastIndex = filename.lastIndexOf('.');\n        const regExp = new RegExp(this.control.accept.join('|'));\n\n        if (!regExp.test(filename.substring(lastIndex + 1).toLowerCase())) {\n          this.files = [];\n          return `Прикладывайте файлы ${this.control.accept\n            .map((w) => w.toUpperCase())\n            .join(', ')}.`;\n        }\n      }\n      return '';\n    },\n    label() {\n      if (this.isProgressing) {\n        return '';\n      }\n      if (this.isInvalid) {\n        return this.invalidString;\n      }\n      if (this.files[0] && this.files[0].name) {\n        return this.files[0].name;\n      }\n      return this.default;\n    },\n    filename() {\n      return this.control.value ? this.control.value.name : '';\n    },\n  },\n  watch: {\n    progress() {\n      this.progressAnimation();\n    },\n    response() {\n      this.onResponse();\n    },\n    percentage(val) {\n      setTimeout(() => {\n        if (val === 100) {\n          this.isFileLoaded = true;\n        } else if (val === 0) {\n          this.isFileLoaded = false;\n        }\n      }, 600);\n    },\n    validateWatcher() {\n      this.blured = true;\n    },\n    focusWatcher() {\n      this.$refs.input.focus();\n    },\n  },\n  methods: {\n    uploadFile(files) {\n      this.files = files;\n      // this.xhrStatus = '';\n      this.percentage = 0;\n      //invalid and label change\n      setTimeout(() => {\n        if (this.isInvalid) {\n          this.$refs.inputFile.value = '';\n        } else {\n          this.loading = true;\n          this.$emit('input', { value: files[0] });\n        }\n      }, 0);\n    },\n    onResponse() {\n      if (this.response.STATUS === 'success') {\n        setTimeout(() => {\n          this.$refs.inputFile.value = '';\n        }, 100);\n      }\n\n      this.$refs.progressbar.style = '';\n      this.percentage = 0;\n      this.loading = false;\n      this.loadCircle = false;\n    },\n    clearInputFile() {\n      console.log('clear');\n      this.loadCircle = true;\n      this.percentage = 0;\n      this.loading = false;\n      this.files = [];\n      this.$refs.inputFile.value = '';\n\n      this.$emit('input', {\n        value: null,\n      });\n    },\n    cancelEvent(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    },\n    getCoords(elem) {\n      let box = elem.getBoundingClientRect();\n\n      return {\n        top: box.top + scrollY,\n        left: box.left + scrollX,\n      };\n    },\n    formatSize(length) {\n      var i = 0,\n        type = ['б', 'Кб', 'Мб', 'Гб', 'Тб', 'Пб'];\n      while ((length / 1000) | 0 && i < type.length - 1) {\n        length /= 1000;\n        i++;\n      }\n      return parseInt(length) + ' ' + type[i];\n    },\n    progressAnimation() {\n      const { first, total, loaded } = this.progress;\n\n      if (first && loaded === total) {\n        //loaded too fast, show minimal animation 1s\n        let counter = 0,\n          minimalTime = 1000,\n          intervalId;\n\n        this.minimalLoading = true;\n        this.$refs.progressbar.style.width = `100%`;\n\n        intervalId = setInterval(() => {\n          if (++counter === 11) {\n            clearInterval(intervalId);\n            // this.dataLoaded(xhr);\n            this.loadCircle = true;\n            this.minimalLoading = false;\n            return;\n          }\n          this.percentage = Math.floor((counter * 100) / 10);\n        }, minimalTime / 10);\n      } else {\n        this.percentage = Math.floor((loaded / total) * 100);\n        this.$refs.progressbar.style.width = `calc(46px + (100% - 46px ) * ${this.percentage} / 100)`;\n        // if (this.percentage === 100) {\n        //   this.dataLoaded();\n        // }\n        this.loadCircle = true;\n      }\n    },\n\n    focus() {\n      this.focused = true;\n      this.blured = false;\n      this.$emit('focus');\n    },\n    blur() {\n      this.focused = false;\n      this.blured = true;\n      this.$emit('blur');\n    },\n    enter() {\n      this.$emit('enter');\n    },\n    validate() {\n      if (\n        (this.control.required && this.value.trim()) ||\n        !this.control.required\n      ) {\n        if (this.control.regexp) {\n          const match = String(this.value.trim()).match(\n            RegExp(this.control.regexp)\n          );\n          if (!match) {\n            this.warning = this.control.regexp_description;\n          } else {\n            this.warning = '';\n          }\n          return match;\n        } else {\n          return true;\n        }\n      } else if (this.control.required && !this.value) {\n        return false;\n      }\n      return true;\n    },\n  },\n  mounted() {\n    //drag&drop file\n    const dropZone = this.$refs.dropzone;\n    const controlFile = this.$refs.controlFile;\n    if (!dropZone) {\n      return;\n    }\n    dropZone.addEventListener('drag', this.cancelEvent);\n    dropZone.addEventListener('dragstart', this.cancelEvent);\n    dropZone.addEventListener('dragend', this.cancelEvent);\n    dropZone.addEventListener('dragover', this.cancelEvent);\n    dropZone.addEventListener('dragenter', this.cancelEvent);\n    dropZone.addEventListener('dragleave', this.cancelEvent);\n    dropZone.addEventListener('drop', this.cancelEvent);\n\n    dropZone.addEventListener('dragover', () => {\n      controlFile.classList.add('dragover');\n    });\n    dropZone.addEventListener('dragenter', () => {\n      controlFile.classList.add('dragover');\n    });\n    dropZone.addEventListener('dragleave', (e) => {\n      let dx = e.pageX - this.getCoords(dropZone).left;\n      let dy = e.pageY - this.getCoords(dropZone).top;\n      if (\n        dx < 0 ||\n        dx > dropZone.clientWidth ||\n        dy < 0 ||\n        dy > dropZone.clientHeight\n      ) {\n        controlFile.classList.remove('dragover');\n      }\n    });\n\n    dropZone.addEventListener('drop', (e) => {\n      controlFile.classList.remove('dragover');\n      controlFile.classList.add('filled');\n      this.uploadFile(e.dataTransfer.files);\n    });\n  },\n};\n"],"names":["ControlFileUpload","data","controlId","id","control","controlName","name","focused","blured","warning","hint","hint_external","minimalLoading","loading","loadCircle","percentage","isFileLoaded","xhrStatus","active","files","required","icon","props","template","emits","computed","progress","upload","response","readyState","placeholder","value","trim","hint_internal","invalid","validate","disabled","validateWatcher","focusWatcher","isInvalid","invalidString","isProgressing","isClearable","filename","isFilled","fileid","size","maxSize","formatSize","lastIndex","lastIndexOf","regExp","RegExp","accept","join","test","substring","toLowerCase","map","w","toUpperCase","label","watch","progressAnimation","onResponse","val","setTimeout","$refs","input","focus","methods","uploadFile","inputFile","$emit","STATUS","progressbar","style","clearInputFile","console","log","cancelEvent","e","preventDefault","stopPropagation","getCoords","elem","box","getBoundingClientRect","top","scrollY","left","scrollX","length","i","type","parseInt","first","total","loaded","counter","minimalTime","intervalId","width","setInterval","clearInterval","Math","floor","blur","enter","regexp","match","String","regexp_description","mounted","dropZone","dropzone","controlFile","addEventListener","classList","add","dx","pageX","dy","pageY","clientWidth","clientHeight","remove","dataTransfer"],"mappings":"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"}