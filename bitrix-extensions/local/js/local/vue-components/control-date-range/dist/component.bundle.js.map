{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import { ControlDatepicker } from 'local.vue-components.control-datepicker';\nimport './component.css';\n\nexport const ControlDateRange = {\n  data() {\n    return {\n      start: '',\n      hint: this.control.hint_external,\n      calendarIcon: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15.9\" height=\"17.499\" viewBox=\"0 0 15.9 17.499\">\n        <g transform=\"translate(0.75 0.75)\">\n            <path d=\"M0,0V2.4\" transform=\"translate(4)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\n            <path d=\"M0,0V2.4\" transform=\"translate(10.4)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\n            <path d=\"M0,0H13.6\" transform=\"translate(0.4 5.672)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\n            <path d=\"M14.4,4v6.8c0,2.4-1.2,4-4,4H4c-2.8,0-4-1.6-4-4V4C0,1.6,1.2,0,4,0h6.4C13.2,0,14.4,1.6,14.4,4Z\" transform=\"translate(0 1.199)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\n            <path d=\"M.495.5H.5\" transform=\"translate(9.662 8.859)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"/>\n            <path d=\"M.495.5H.5\" transform=\"translate(9.662 11.26)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"/>\n            <path d=\"M.495.5H.5\" transform=\"translate(6.701 8.859)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"/>\n            <path d=\"M.495.5H.5\" transform=\"translate(6.701 11.26)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"/>\n            <path d=\"M.495.5H.5\" transform=\"translate(3.74 8.859)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"/>\n            <path d=\"M.495.5H.5\" transform=\"translate(3.74 11.26)\" fill=\"none\" stroke=\"#2d3142\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"/>\n        </g>\n      </svg>`,\n    };\n  },\n  template: `\n    <div\n      :class=\"{\n        'twpx-form-control': true,\n        'twpx-form-control--date': true,\n        'twpx-form-control--active': active,\n        'twpx-form-control--invalid': invalid,\n        'twpx-form-control--disabled': disabled,\n      }\"\n    >\n      <img\n        :src=\"disabled\"\n        class=\"twpx-form-control__disabled-icon\"\n        v-if=\"false\"\n      />\n      <div class=\"twpx-form-control__calendar-icon\" v-html=\"calendarIcon\"></div>\n      <div class=\"twpx-form-control__label\">{{ control.label }}</div>\n      <ControlDatepicker\n        v-model=\"date\"\n        @range-start=\"onRangeStart\"\n        @range-end=\"onRangeEnd\"\n        locale=\"ru\"\n        range\n        multi-calendars\n        ref=\"controlDateRange\"\n        :format=\"'dd.MM.yyyy'\"\n      >\n        <template #action-buttons></template>\n        <template #action-preview></template>\n        <template #time-picker></template\n      ></ControlDatepicker>\n      <div class=\"twpx-form-control__hint\" v-html=\"hint\" v-if=\"hint\"></div>\n    </div>\n  `,\n  props: ['control'],\n  emits: ['input'],\n  computed: {\n    date: {\n      get() {\n        let date = [];\n        if (\n          this.control.value &&\n          typeof this.control.value === 'object' &&\n          this.control.value.length\n        ) {\n          this.control.value.forEach((d) => {\n            if (typeof d === 'string') {\n              const valueArray = d.split('.');\n              if (valueArray.length && valueArray.length === 3) {\n                date.push(`${valueArray[1]}/${valueArray[0]}/${valueArray[2]}`);\n              }\n            }\n          });\n        }\n\n        return date;\n      },\n      set(value) {\n        this.$emit('input', { value });\n      },\n    },\n    active() {\n      let result = false;\n      if (this.control.value && typeof this.control.value === 'object') {\n        result = !!this.control.value.length;\n      }\n      return result;\n    },\n    invalid() {\n      return false;\n    },\n    disabled() {\n      return this.control.disabled;\n    },\n  },\n  methods: {\n    onRangeStart(start) {\n      this.start = start;\n    },\n    onRangeEnd(end) {\n      this.date = [this.formatDate(this.start), this.formatDate(end)];\n      this.$refs.controlDateRange.closeMenu();\n    },\n    formatDate(date) {\n      const d = new Date(date);\n      let day = String(d.getDate());\n      let month = String(d.getMonth() + 1);\n\n      day = day.length === 1 ? `0${day}` : day;\n      month = month.length === 1 ? `0${month}` : month;\n\n      return `${day}.${month}.${d.getFullYear()}`;\n    },\n  },\n  components: {\n    ControlDatepicker,\n  },\n};\n"],"names":["ControlDateRange","data","start","hint","control","hint_external","calendarIcon","template","props","emits","computed","date","get","value","length","forEach","d","valueArray","split","push","set","$emit","active","result","invalid","disabled","methods","onRangeStart","onRangeEnd","end","formatDate","$refs","controlDateRange","closeMenu","Date","day","String","getDate","month","getMonth","getFullYear","components","ControlDatepicker"],"mappings":";;;;;MAGaA,gBAAgB,GAAG;IAC9BC,IAAI,kBAAG;MACL,OAAO;QACLC,KAAK,EAAE,EAAE;QACTC,IAAI,EAAE,IAAI,CAACC,OAAO,CAACC,aAAa;QAChCC,YAAY;OAcb;KACF;IACDC,QAAQ,+jCAiCP;IACDC,KAAK,EAAE,CAAC,SAAS,CAAC;IAClBC,KAAK,EAAE,CAAC,OAAO,CAAC;IAChBC,QAAQ,EAAE;MACRC,IAAI,EAAE;QACJC,GAAG,iBAAG;UACJ,IAAID,IAAI,GAAG,EAAE;UACb,IACE,IAAI,CAACP,OAAO,CAACS,KAAK,IAClB,uBAAO,IAAI,CAACT,OAAO,CAACS,KAAK,MAAK,QAAQ,IACtC,IAAI,CAACT,OAAO,CAACS,KAAK,CAACC,MAAM,EACzB;YACA,IAAI,CAACV,OAAO,CAACS,KAAK,CAACE,OAAO,CAAC,UAACC,CAAC,EAAK;cAChC,IAAI,OAAOA,CAAC,KAAK,QAAQ,EAAE;gBACzB,IAAMC,UAAU,GAAGD,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC;gBAC/B,IAAID,UAAU,CAACH,MAAM,IAAIG,UAAU,CAACH,MAAM,KAAK,CAAC,EAAE;kBAChDH,IAAI,CAACQ,IAAI,WAAIF,UAAU,CAAC,CAAC,CAAC,cAAIA,UAAU,CAAC,CAAC,CAAC,cAAIA,UAAU,CAAC,CAAC,CAAC,EAAG;;;aAGpE,CAAC;;UAGJ,OAAON,IAAI;SACZ;QACDS,GAAG,eAACP,KAAK,EAAE;UACT,IAAI,CAACQ,KAAK,CAAC,OAAO,EAAE;YAAER,KAAK,EAALA;WAAO,CAAC;;OAEjC;MACDS,MAAM,oBAAG;QACP,IAAIC,MAAM,GAAG,KAAK;QAClB,IAAI,IAAI,CAACnB,OAAO,CAACS,KAAK,IAAI,uBAAO,IAAI,CAACT,OAAO,CAACS,KAAK,MAAK,QAAQ,EAAE;UAChEU,MAAM,GAAG,CAAC,CAAC,IAAI,CAACnB,OAAO,CAACS,KAAK,CAACC,MAAM;;QAEtC,OAAOS,MAAM;OACd;MACDC,OAAO,qBAAG;QACR,OAAO,KAAK;OACb;MACDC,QAAQ,sBAAG;QACT,OAAO,IAAI,CAACrB,OAAO,CAACqB,QAAQ;;KAE/B;IACDC,OAAO,EAAE;MACPC,YAAY,wBAACzB,KAAK,EAAE;QAClB,IAAI,CAACA,KAAK,GAAGA,KAAK;OACnB;MACD0B,UAAU,sBAACC,GAAG,EAAE;QACd,IAAI,CAAClB,IAAI,GAAG,CAAC,IAAI,CAACmB,UAAU,CAAC,IAAI,CAAC5B,KAAK,CAAC,EAAE,IAAI,CAAC4B,UAAU,CAACD,GAAG,CAAC,CAAC;QAC/D,IAAI,CAACE,KAAK,CAACC,gBAAgB,CAACC,SAAS,EAAE;OACxC;MACDH,UAAU,sBAACnB,IAAI,EAAE;QACf,IAAMK,CAAC,GAAG,IAAIkB,IAAI,CAACvB,IAAI,CAAC;QACxB,IAAIwB,GAAG,GAAGC,MAAM,CAACpB,CAAC,CAACqB,OAAO,EAAE,CAAC;QAC7B,IAAIC,KAAK,GAAGF,MAAM,CAACpB,CAAC,CAACuB,QAAQ,EAAE,GAAG,CAAC,CAAC;QAEpCJ,GAAG,GAAGA,GAAG,CAACrB,MAAM,KAAK,CAAC,cAAOqB,GAAG,IAAKA,GAAG;QACxCG,KAAK,GAAGA,KAAK,CAACxB,MAAM,KAAK,CAAC,cAAOwB,KAAK,IAAKA,KAAK;QAEhD,iBAAUH,GAAG,cAAIG,KAAK,cAAItB,CAAC,CAACwB,WAAW,EAAE;;KAE5C;IACDC,UAAU,EAAE;MACVC,iBAAiB,EAAjBA;;EAEJ,CAAC;;;;;;;;"}