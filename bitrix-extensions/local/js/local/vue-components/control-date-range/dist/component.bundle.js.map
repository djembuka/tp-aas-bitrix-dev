{"version":3,"file":"component.bundle.js","sources":["../src/Icon.js","../src/IconClear.js","../src/IconLock.js","../src/component.js"],"sourcesContent":["export const Icon = {\r\n  template: `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n      <path d=\"M2.125 5.59998H14.375M3.70833 1V2.20014M12.625 1V2.19999M12.625 2.19999H3.875C2.42525 2.19999 1.25 3.2745 1.25 4.59998V12.6C1.25 13.9255 2.42525 15 3.875 15H12.625C14.0747 15 15.25 13.9255 15.25 12.6L15.25 4.59998C15.25 3.2745 14.0747 2.19999 12.625 2.19999ZM4.3125 8.4H12.1875M4.3125 11.6H12.1875\" stroke=\"#5F7696\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n    </svg>`,\r\n};\r\n","export const IconClear = `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\">\r\n      <path d=\"M8.04995 6.98787L13.7795 1.25837C13.855 1.19193 13.9161 1.11073 13.959 1.01978C14.0019 0.928829 14.0258 0.830049 14.0291 0.729527C14.0324 0.629004 14.0151 0.528868 13.9783 0.435286C13.9414 0.341705 13.8858 0.25666 13.8148 0.185392C13.7438 0.114124 13.659 0.0581411 13.5656 0.0208929C13.4722 -0.0163553 13.3721 -0.0340802 13.2716 -0.0311898C13.1711 -0.0282994 13.0722 -0.00485496 12.981 0.0376992C12.8899 0.0802535 12.8085 0.141016 12.7417 0.216244L7.01132 5.95012L1.28183 0.216244C1.14363 0.0780497 0.956199 0.000412874 0.760763 0.000412874C0.565326 0.000412874 0.377895 0.0780497 0.2397 0.216244C0.101506 0.354438 0.0238691 0.54187 0.0238691 0.737307C0.0238691 0.932743 0.101506 1.12017 0.2397 1.25837L5.9692 6.98787L0.216075 12.7419C0.0778809 12.8801 0.000244141 13.0675 0.000244141 13.2629C0.000244141 13.4584 0.0778809 13.6458 0.216075 13.784C0.35427 13.9222 0.541701 13.9998 0.737138 13.9998C0.932574 13.9998 1.12001 13.9222 1.2582 13.784L7.01132 8.03087L12.7408 13.7612C12.879 13.8994 13.0665 13.9771 13.2619 13.9771C13.4573 13.9771 13.6448 13.8994 13.783 13.7612C13.9211 13.623 13.9988 13.4356 13.9988 13.2402C13.9988 13.0447 13.9211 12.8573 13.783 12.7191L8.04995 6.98787Z\" fill=\"#5F7696\"/>\r\n    </svg>\r\n  `;\r\n","export const IconLock = {\r\n  template: `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"16\" viewBox=\"0 0 12 16\" fill=\"none\">\r\n      <path d=\"M2.25 5.66667V5C2.25 2.78413 3.92262 1 6 1C8.07738 1 9.75 2.78413 9.75 5V5.66667M2.25 5.66667C1.5625 5.66667 1 6.26667 1 7V13.6667C1 14.4 1.5625 15 2.25 15H9.75C10.4375 15 11 14.4 11 13.6667V7C11 6.26667 10.4375 5.66667 9.75 5.66667M2.25 5.66667H9.75\" stroke=\"#9B9B9B\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\r\n    </svg>\r\n  `,\r\n};\r\n","import { ControlDatepicker } from 'local.vue-components.control-datepicker';\r\nimport { Icon } from './Icon.js';\r\nimport { IconClear } from './IconClear.js';\r\nimport { IconLock } from './IconLock.js';\r\nimport './component.css';\r\n\r\nexport const ControlDateRange = {\r\n  data() {\r\n    return {\r\n      open: false,\r\n      start: '',\r\n      hint: this.control.hint_external,\r\n      controlId: this.id || this.control.id || null,\r\n      controlName: this.name || this.control.name || null,\r\n    };\r\n  },\r\n  components: {\r\n    ControlDatepicker,\r\n    Icon,\r\n    IconLock,\r\n  },\r\n  template: `\r\n    <div\r\n      :class=\"{\r\n        'twpx-form-control': true,\r\n        'twpx-form-control--date': true,\r\n        'twpx-form-control--active': active,\r\n        'twpx-form-control--invalid': invalid,\r\n        'twpx-form-control--disabled': disabled,\r\n        'twpx-form-control--open': open,\r\n      }\"\r\n      ref=\"control\"\r\n    >\r\n      <IconLock\r\n        class=\"twpx-form-control__disabled-icon\"\r\n        v-if=\"disabled\"\r\n      />\r\n      <Icon class=\"twpx-form-control__calendar-icon\" />\r\n      <div class=\"twpx-form-control__label\">{{ control.label }}</div>\r\n      <ControlDatepicker\r\n        v-model=\"date\"\r\n        @open=\"onOpen\"\r\n        @closed=\"onClosed\"\r\n        @range-start=\"onRangeStart\"\r\n        @range-end=\"onRangeEnd\"\r\n        locale=\"ru\"\r\n        range\r\n        multi-calendars\r\n        ref=\"controlDateRange\"\r\n        :format=\"'dd.MM.yyyy'\"\r\n      >\r\n        <template #action-buttons></template>\r\n        <template #action-preview></template>\r\n        <template #time-picker></template\r\n      ></ControlDatepicker>\r\n      <input type=\"hidden\" :name=\"controlName\" :value=\"dateFormatted\" />\r\n      <div class=\"twpx-form-control__hint\" v-html=\"hint\" v-if=\"hint\"></div>\r\n    </div>\r\n  `,\r\n  props: ['control'],\r\n  emits: ['input'],\r\n  computed: {\r\n    dateFormatted() {\r\n      if (this.date && this.date.length) {\r\n        const arr = this.date.map(d => d.split('/').reverse().join('.').replace(/^(\\d{4})\\.(\\d{2})\\.(\\d{2})$/, '$2.$3.$1'));\r\n        return `${arr[0]}-${arr[1]}`;\r\n      }\r\n      return ''\r\n    },\r\n    date: {\r\n      get() {\r\n        let date = [];\r\n        if (\r\n          this.control.value &&\r\n          typeof this.control.value === 'object' &&\r\n          this.control.value.length\r\n        ) {\r\n          this.control.value.forEach((d) => {\r\n            if (typeof d === 'string') {\r\n              const valueArray = d.split('.');\r\n              if (valueArray.length && valueArray.length === 3) {\r\n                date.push(`${valueArray[1]}/${valueArray[0]}/${valueArray[2]}`);\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n        return date;\r\n      },\r\n      set(value) {\r\n        this.$emit('input', { value });\r\n      },\r\n    },\r\n    active() {\r\n      let result = false;\r\n      if (this.control.value && typeof this.control.value === 'object') {\r\n        result = !!this.control.value.length;\r\n      }\r\n      return result;\r\n    },\r\n    invalid() {\r\n      return false;\r\n    },\r\n    disabled() {\r\n      return this.control.disabled;\r\n    },\r\n  },\r\n  methods: {\r\n    onOpen() {\r\n      this.open = true;\r\n    },\r\n    onClosed() {\r\n      this.open = false;\r\n    },\r\n    onRangeStart(start) {\r\n      this.start = start;\r\n    },\r\n    onRangeEnd(end) {\r\n      this.date = [this.formatDate(this.start), this.formatDate(end)];\r\n      this.$refs.controlDateRange.closeMenu();\r\n      this.replaceClear();\r\n    },\r\n    formatDate(date) {\r\n      const d = new Date(date);\r\n      let day = String(d.getDate());\r\n      let month = String(d.getMonth() + 1);\r\n\r\n      day = day.length === 1 ? `0${day}` : day;\r\n      month = month.length === 1 ? `0${month}` : month;\r\n\r\n      return `${day}.${month}.${d.getFullYear()}`;\r\n    },\r\n    replaceClear() {\r\n      setTimeout(() => {\r\n        const clear = this.$refs.control.querySelector('.dp--clear-btn');\r\n        if (clear) {\r\n          clear.innerHTML = IconClear;\r\n        }\r\n      }, 100);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.replaceClear();\r\n  },\r\n};\r\n"],"names":["Icon","template","IconClear","IconLock","ControlDateRange","data","open","start","hint","control","hint_external","controlId","id","controlName","name","components","ControlDatepicker","props","emits","computed","dateFormatted","date","length","arr","map","d","split","reverse","join","replace","get","value","forEach","valueArray","push","set","$emit","active","result","invalid","disabled","methods","onOpen","onClosed","onRangeStart","onRangeEnd","end","formatDate","$refs","controlDateRange","closeMenu","replaceClear","Date","day","String","getDate","month","getMonth","getFullYear","setTimeout","clear","querySelector","innerHTML","mounted"],"mappings":"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"}