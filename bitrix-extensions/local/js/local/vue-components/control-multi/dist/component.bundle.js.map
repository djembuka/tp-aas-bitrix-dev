{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import { ControlComponent } from 'local.vue-components.control-component';\r\nimport { ControlSubcontrol } from 'local.vue-components.control-subcontrol';\r\n\r\nexport const ControlMulti = {\r\n  data() {\r\n    return {\r\n      multi: 1,\r\n      copy: {},\r\n    };\r\n  },\r\n  props: ['parent'],\r\n  components: {\r\n    ControlComponent,\r\n    ControlSubcontrol,\r\n  },\r\n  // language=Vue\r\n  template: `\r\n\t\t<div>\r\n      <div v-for=\"(addedControl, index) in parent.multi\" :key=\"addedControl.id\">\r\n\r\n        <div class=\"btn-delete\" @click.prevent=\"remove(index)\" v-if=\"controlsLength > 1\"></div>\r\n\r\n        <ControlSubcontrol v-if=\"addedControl.sub\" :control=\"addedControl\" @input=\"input\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" @hints=\"hints\"/>\r\n\r\n        <ControlComponent v-else :control=\"addedControl\" @input=\"input\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" @hints=\"hints\" />\r\n\r\n      </div>\r\n      <div class=\"btn btn-success btn-md\" :class=\"{'btn-disabled': isDisabled}\" @click.prevent=\"add\">Добавить</div>\r\n    </div>\r\n\t`,\r\n  emits: [\r\n    'create',\r\n    'add',\r\n    'remove',\r\n    'input',\r\n    'focus',\r\n    'blur',\r\n    'enter',\r\n    'hints',\r\n  ],\r\n  computed: {\r\n    controlsLength() {\r\n      if (\r\n        this.parent.multi &&\r\n        typeof this.parent.multi === 'object' &&\r\n        this.parent.multi.length !== undefined\r\n      ) {\r\n        return this.parent.multi.length;\r\n      }\r\n      return 0;\r\n    },\r\n    isDisabled() {\r\n      return this.controlsLength >= this.multi;\r\n    },\r\n  },\r\n  methods: {\r\n    add() {\r\n      if (!this.isDisabled) {\r\n        this.$emit('add', {\r\n          parent: this.parent,\r\n          add: Object.assign({}, this.copy),\r\n        });\r\n      }\r\n    },\r\n    remove(index) {\r\n      this.$emit('remove', { parent: this.parent, index });\r\n    },\r\n    input(attrs) {\r\n      this.$emit('input', attrs);\r\n    },\r\n    focus(attrs) {\r\n      this.$emit('focus', attrs);\r\n    },\r\n    blur(attrs) {\r\n      this.$emit('blur', attrs);\r\n    },\r\n    enter(attrs) {\r\n      this.$emit('enter', attrs);\r\n    },\r\n    hints() {},\r\n  },\r\n  beforeMount() {\r\n    this.multi = this.parent.multi;\r\n\r\n    this.copy = Object.assign({}, this.parent);\r\n    delete this.copy.multi;\r\n\r\n    this.$emit('create', { parent: this.parent });\r\n    this.add();\r\n  },\r\n};\r\n"],"names":["ControlMulti","data","multi","copy","props","components","ControlComponent","ControlSubcontrol","template","emits","computed","controlsLength","parent","length","undefined","isDisabled","methods","add","$emit","Object","assign","remove","index","input","attrs","focus","blur","enter","hints","beforeMount"],"mappings":";;;;;MAGaA,YAAY,GAAG;IAC1BC,IAAI,kBAAG;MACL,OAAO;QACLC,KAAK,EAAE,CAAC;QACRC,IAAI,EAAE;OACP;KACF;IACDC,KAAK,EAAE,CAAC,QAAQ,CAAC;IACjBC,UAAU,EAAE;MACVC,gBAAgB,EAAhBA,qDAAgB;MAChBC,iBAAiB,EAAjBA;KACD;;IAEDC,QAAQ,4sBAaR;IACAC,KAAK,EAAE,CACL,QAAQ,EACR,KAAK,EACL,QAAQ,EACR,OAAO,EACP,OAAO,EACP,MAAM,EACN,OAAO,EACP,OAAO,CACR;IACDC,QAAQ,EAAE;MACRC,cAAc,4BAAG;QACf,IACE,IAAI,CAACC,MAAM,CAACV,KAAK,IACjB,uBAAO,IAAI,CAACU,MAAM,CAACV,KAAK,MAAK,QAAQ,IACrC,IAAI,CAACU,MAAM,CAACV,KAAK,CAACW,MAAM,KAAKC,SAAS,EACtC;UACA,OAAO,IAAI,CAACF,MAAM,CAACV,KAAK,CAACW,MAAM;;QAEjC,OAAO,CAAC;OACT;MACDE,UAAU,wBAAG;QACX,OAAO,IAAI,CAACJ,cAAc,IAAI,IAAI,CAACT,KAAK;;KAE3C;IACDc,OAAO,EAAE;MACPC,GAAG,iBAAG;QACJ,IAAI,CAAC,IAAI,CAACF,UAAU,EAAE;UACpB,IAAI,CAACG,KAAK,CAAC,KAAK,EAAE;YAChBN,MAAM,EAAE,IAAI,CAACA,MAAM;YACnBK,GAAG,EAAEE,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE,IAAI,CAACjB,IAAI;WACjC,CAAC;;OAEL;MACDkB,MAAM,kBAACC,KAAK,EAAE;QACZ,IAAI,CAACJ,KAAK,CAAC,QAAQ,EAAE;UAAEN,MAAM,EAAE,IAAI,CAACA,MAAM;UAAEU,KAAK,EAALA;SAAO,CAAC;OACrD;MACDC,KAAK,iBAACC,KAAK,EAAE;QACX,IAAI,CAACN,KAAK,CAAC,OAAO,EAAEM,KAAK,CAAC;OAC3B;MACDC,KAAK,iBAACD,KAAK,EAAE;QACX,IAAI,CAACN,KAAK,CAAC,OAAO,EAAEM,KAAK,CAAC;OAC3B;MACDE,IAAI,gBAACF,KAAK,EAAE;QACV,IAAI,CAACN,KAAK,CAAC,MAAM,EAAEM,KAAK,CAAC;OAC1B;MACDG,KAAK,iBAACH,KAAK,EAAE;QACX,IAAI,CAACN,KAAK,CAAC,OAAO,EAAEM,KAAK,CAAC;OAC3B;MACDI,KAAK,mBAAG;KACT;IACDC,WAAW,yBAAG;MACZ,IAAI,CAAC3B,KAAK,GAAG,IAAI,CAACU,MAAM,CAACV,KAAK;MAE9B,IAAI,CAACC,IAAI,GAAGgB,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE,IAAI,CAACR,MAAM,CAAC;MAC1C,OAAO,IAAI,CAACT,IAAI,CAACD,KAAK;MAEtB,IAAI,CAACgB,KAAK,CAAC,QAAQ,EAAE;QAAEN,MAAM,EAAE,IAAI,CAACA;OAAQ,CAAC;MAC7C,IAAI,CAACK,GAAG,EAAE;;EAEd,CAAC;;;;;;;;"}