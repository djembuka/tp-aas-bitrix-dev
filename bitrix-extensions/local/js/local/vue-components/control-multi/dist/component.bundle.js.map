{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import './component.css';\r\n\r\nimport { ControlComponent } from 'local.vue-components.control-component';\r\n\r\nexport const ControlMulti = {\r\n  data() {\r\n    return {\r\n      multi: 1,\r\n      copy: {},\r\n    };\r\n  },\r\n  props: ['parent'],\r\n  components: {\r\n    ControlComponent,\r\n  },\r\n  // language=Vue\r\n  template: `\r\n\t\t<div>\r\n      <div v-for=\"(addedControl, index) in parent.multi\" :key=\"addedControl.id\">\r\n        <div class=\"twpx-form-control-multi\">\r\n\r\n          <div class=\"btn-delete\" @click.prevent=\"remove(index)\" v-if=\"controlsLength > 1\"></div>\r\n\r\n          <ControlComponent :control=\"addedControl\" @input=\"input\" @focus=\"focus\" @blur=\"blur\" @enter=\"enter\" @hints=\"hints\" />\r\n\r\n        </div>\r\n\r\n        <hr>\r\n\r\n      </div>\r\n      <div class=\"btn btn-success btn-md\" :class=\"{'btn-disabled': isDisabled}\" @click.prevent=\"add()\">Добавить</div>\r\n    </div>\r\n\t`,\r\n  emits: [\r\n    'create',\r\n    'add',\r\n    'remove',\r\n    'input',\r\n    'focus',\r\n    'blur',\r\n    'enter',\r\n    'hints',\r\n  ],\r\n  computed: {\r\n    controlsLength() {\r\n      if (\r\n        this.parent.multi &&\r\n        typeof this.parent.multi === 'object' &&\r\n        this.parent.multi.length !== undefined\r\n      ) {\r\n        return this.parent.multi.length;\r\n      }\r\n      return 0;\r\n    },\r\n    isDisabled() {\r\n      return this.controlsLength >= this.multi;\r\n    },\r\n  },\r\n  methods: {\r\n    add(value) {\r\n      if (!this.isDisabled) {\r\n\r\n        let copy = Object.assign({}, this.copy);\r\n        if(value) {\r\n          copy.value = value;\r\n        }\r\n\r\n\r\n        this.$emit('add', {\r\n          parent: this.parent,\r\n          add: copy,\r\n        });\r\n      }\r\n    },\r\n    remove(index) {\r\n      this.$emit('remove', { parent: this.parent, index });\r\n    },\r\n    input(args) {\r\n      this.$emit('input', args);\r\n    },\r\n    focus(args) {\r\n      this.$emit('focus', args);\r\n    },\r\n    blur(args) {\r\n      this.$emit('blur', args);\r\n    },\r\n    enter(args) {\r\n      this.$emit('enter', args);\r\n    },\r\n    hints(args) {\r\n      this.$emit('hints', args);\r\n    },\r\n  },\r\n  beforeMount() {\r\n    this.multi = this.parent.multi;\r\n\r\n    this.copy = Object.assign({}, this.parent);\r\n    delete this.copy.multi;\r\n    this.copy.value = '';\r\n\r\n    this.$emit('create', { parent: this.parent });\r\n\r\n    if (this.parent.value !== null && typeof this.parent.value === 'object' && this.parent.value.forEach && this.parent.value.length) {\r\n      this.parent.value.forEach(v => {\r\n        this.add(v);\r\n      })\r\n      this.parent.value = [];\r\n    } else {\r\n      this.add();\r\n    }\r\n  },\r\n};\r\n"],"names":["ControlMulti","data","multi","copy","props","components","ControlComponent","template","emits","computed","controlsLength","parent","length","undefined","isDisabled","methods","add","value","Object","assign","$emit","remove","index","input","args","focus","blur","enter","hints","beforeMount","forEach","v"],"mappings":"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"}