{"version":3,"file":"component.bundle.js","sources":["../src/component.js"],"sourcesContent":["import './component.css';\r\n\r\nexport const ControlTel = {\r\n  data() {\r\n    return {\r\n      controlId: this.id || this.control.id || null,\r\n      controlName: this.name || this.control.name || null,\r\n      focused: false,\r\n      blured: false,\r\n      warning: '',\r\n      hint: this.control.hint_external,\r\n    };\r\n  },\r\n  props: ['control', 'id', 'name'],\r\n  // language=Vue\r\n  template: `\r\n\t\t<div\r\n      :class=\"{\r\n        'twpx-form-control': true,\r\n        'twpx-form-control--tel': true,\r\n        'twpx-form-control--active': active,\r\n        'twpx-form-control--invalid': invalid,\r\n        'twpx-form-control--disabled': disabled,\r\n      }\"\r\n    >\r\n      <img\r\n        :src=\"disabled\"\r\n        class=\"twpx-form-control__disabled-icon\"\r\n        v-if=\"false\"\r\n      />\r\n      <div class=\"twpx-form-control__label\">{{ control.label }}</div>\r\n      <input\r\n        type=\"text\"\r\n        :id=\"controlId\"\r\n        :name=\"controlName\"\r\n        v-model=\"value\"\r\n        @focus=\"focus\"\r\n        @blur=\"blur\"\r\n        @keydown=\"keydown\"\r\n        @keyup.enter=\"enter\"\r\n        :disabled=\"disabled\"\r\n        ref=\"input\"\r\n        autocomplete=\"off\"\r\n        :placeholder=\"placeholder\"\r\n        class=\"twpx-form-control__input\"\r\n      />\r\n      <div\r\n        class=\"twpx-form-control__warning\"\r\n        v-html=\"warning\"\r\n        v-if=\"warning\"\r\n      ></div>\r\n      <div class=\"twpx-form-control__hint\" v-html=\"hint\" v-if=\"hint\"></div>\r\n    </div>\r\n\t`,\r\n  emits: ['input', 'focus', 'blur', 'enter'],\r\n  computed: {\r\n    value: {\r\n      get() {\r\n        return this.control.value;\r\n      },\r\n      set(value) {\r\n        this.$emit('input', { value });\r\n      },\r\n    },\r\n    placeholder() {\r\n      if (this.focused && !this.value.trim()) {\r\n        return this.control.hint_internal;\r\n      } else {\r\n        return '';\r\n      }\r\n    },\r\n    active() {\r\n      return this.focused || !!this.control.value.trim();\r\n    },\r\n    invalid() {\r\n      return (this.blured && !this.validate()) || this.setInvalidWatcher;\r\n    },\r\n    disabled() {\r\n      return this.control.disabled;\r\n    },\r\n    validateWatcher() {\r\n      return this.control.validateWatcher;\r\n    },\r\n    focusWatcher() {\r\n      return this.control.focusWatcher;\r\n    },\r\n    setInvalidWatcher() {\r\n      return this.control.setInvalidWatcher;\r\n    },\r\n  },\r\n  watch: {\r\n    validateWatcher() {\r\n      this.blured = true;\r\n    },\r\n    focusWatcher() {\r\n      this.$refs.input.focus();\r\n    },\r\n    setInvalidWatcher(val) {\r\n      this.warning = val ? this.control.regexp_description : '';\r\n    },\r\n  },\r\n  methods: {\r\n    focus() {\r\n      if (this.value === '') {\r\n        this.value = '+7 (';\r\n      }\r\n      this.focused = true;\r\n      this.blured = false;\r\n      this.$emit('focus');\r\n    },\r\n    blur() {\r\n      if (this.value === '+7 (') {\r\n        this.value = '';\r\n      }\r\n      this.focused = false;\r\n      this.blured = true;\r\n      this.$emit('blur');\r\n    },\r\n    enter() {\r\n      this.$emit('enter');\r\n    },\r\n    keydown($event) {\r\n      this.inputphone($event);\r\n    },\r\n    inputphone(e) {\r\n      let key = e.key;\r\n      let not = key.replace(/([0-9])/, 1);\r\n\r\n      if (not == 1) {\r\n        if (this.value.length < 4 || this.value === '') {\r\n          this.value = '+7 (';\r\n        }\r\n        if (this.value.length === 7) {\r\n          this.value = this.value + ') ';\r\n        }\r\n        if (this.value.length === 12) {\r\n          this.value = this.value + '-';\r\n        }\r\n        if (this.value.length === 15) {\r\n          this.value = this.value + '-';\r\n        }\r\n        if (this.value.length >= 18) {\r\n          this.value = this.value.substring(0, 17);\r\n        }\r\n      } else if ('Backspace' !== not && 'Tab' !== not) {\r\n        e.preventDefault();\r\n      }\r\n    },\r\n    validate() {\r\n      if (\r\n        (this.control.required && this.value.trim()) ||\r\n        !this.control.required\r\n      ) {\r\n        if (this.control.regexp) {\r\n          const match = String(this.value.trim()).match(\r\n            RegExp(this.control.regexp)\r\n          );\r\n          if (!match) {\r\n            this.warning = this.control.regexp_description;\r\n          } else {\r\n            this.warning = '';\r\n          }\r\n          return match;\r\n        } else {\r\n          return true;\r\n        }\r\n      } else if (this.control.required && !this.value) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n  },\r\n};\r\n"],"names":["ControlTel","data","controlId","id","control","controlName","name","focused","blured","warning","hint","hint_external","props","template","emits","computed","value","get","set","$emit","placeholder","trim","hint_internal","active","invalid","validate","setInvalidWatcher","disabled","validateWatcher","focusWatcher","watch","$refs","input","focus","val","regexp_description","methods","blur","enter","keydown","$event","inputphone","e","key","not","replace","length","substring","preventDefault","required","regexp","match","String","RegExp"],"mappings":"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"}